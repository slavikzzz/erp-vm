#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Для Каждого Элт Из СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок("Дата,Комментарий,Название,Номер,ЖурналУчетаОтходов", ",") Цикл 
		Параметры.Свойство(Элт, ЭтотОбъект[Элт]);
	КонецЦикла;
	Для Каждого Элт Из СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок("ЖурналУчетаОтходов", ",") Цикл 
		Если Не Параметры.Свойство(Элт) Тогда 
			Элементы[Элт].Видимость = Ложь;
		КонецЕсли;
	КонецЦикла;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Ок(Команда)
	Результат = Новый Структура();
	Для Каждого Элт Из СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок("Дата,Комментарий,Название,Номер,ЖурналУчетаОтходов", ",") Цикл 
		Результат.Вставить(Элт, ЭтотОбъект[Элт]);
	КонецЦикла;
	
	Если ЗначениеЗаполнено(Дата) И ЗначениеЗаполнено(Название) И ЗначениеЗаполнено(Номер) Тогда 
		ОписаниеКА = Название + " №" + ?(ЗначениеЗаполнено(Номер), Номер, "б/н") + " от " + Формат(Дата, "ДЛФ=DD; ДП=-");
		Результат.Вставить("ФлагОшибки", Ложь);
	Иначе
		ОписаниеКА = "<Необходимо заполнить реквизиты документа>";
		Результат.Вставить("ФлагОшибки", Истина);
	КонецЕсли;
	Результат.Вставить("ОписаниеДокумента", СокрЛП(СтрЗаменить(ОписаниеКА, "  ", " ")));
	Закрыть(Результат);
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
	Закрыть(Неопределено);
КонецПроцедуры

#КонецОбласти
