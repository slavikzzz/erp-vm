
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Параметры.Свойство("ПрайсЛист", ПрайсЛист);

	ВнешняяСсылка = ТорговыеПредложенияСлужебный.СсылкаФидаПрайсЛиста(ПрайсЛист);

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОбновитьСсылку(Команда)
	
	ВопросОбновленияСсылки();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ВопросОбновленияСсылки()
	
	Оповещение = Новый ОписаниеОповещения("ВопросОбновленияСсылкиЗавершение", ЭтотОбъект);
	
	ТекстВопроса = НСтр("ru = 'Внешняя ссылка будет безвозвратно переформирована. Продолжить?';
						|en = 'The external link will be permanently regenerated. Continue?'");
	
	ЗаголовокВопроса = НСтр("ru = 'Обновить внешнюю ссылку прайс-листа 1С:Бизнес-сеть';
							|en = 'Update the external link of the 1C:Business Network price list'");
	
	ПоказатьВопрос(Оповещение, ТекстВопроса, РежимДиалогаВопрос.ДаНет, , КодВозвратаДиалога.Нет, ЗаголовокВопроса);

КонецПроцедуры 

&НаКлиенте
Процедура ВопросОбновленияСсылкиЗавершение(Ответ, ДополнительныеПараметры) Экспорт
	
	Если Ответ = КодВозвратаДиалога.Нет Тогда
		Возврат;
	КонецЕсли;	
	
	ВнешняяСсылка = ТорговыеПредложенияВызовСервера.СсылкаФидаПрайсЛиста(ПрайсЛист, Истина);
	
КонецПроцедуры

#КонецОбласти



