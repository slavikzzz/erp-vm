#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.РежимДиалогаПовторить Тогда
		
		Элементы.ФормаПовторитьОтправку.Видимость = Истина;
		Элементы.ФормаПовторитьОтправку.КнопкаПоУмолчанию = Истина;
		Элементы.ФормаЗакрыть.Видимость = Истина;
		Элементы.ДекорацияКартинкаОшибка.Видимость = Истина;
		Элементы.ДекорацияДлительнаяОперация.Видимость = Ложь;
		
		ТекстСообщения = Параметры.ТекстСообщения;
		Элементы.ДекорацияПоясняющийТекстДлительнойОперации.Заголовок = ТекстСообщения;
		Элементы.ФормаКоманднаяПанель.ГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Центр;
		Элементы.ДекорацияДлительнаяОперация.Видимость = Ложь;
		
		ДокументооборотСКОВызовСервера.ДобавитьСсылкуНаРекомендации(ЭтотОбъект);
		
	Иначе
		
		Элементы.ФормаПовторитьОтправку.Видимость = Ложь;
		Элементы.ФормаПовторитьОтправку.КнопкаПоУмолчанию = Ложь;
		Элементы.ДекорацияКартинкаОшибка.Видимость = Ложь;
		Элементы.ДекорацияДлительнаяОперация.Видимость = Истина;
		Элементы.ФормаЗакрыть.Видимость = Ложь;
		
		Если Не ПустаяСтрока(Параметры.ТекстСообщения) Тогда
			ТекстСообщения = Параметры.ТекстСообщения;
			Элементы.ДекорацияПоясняющийТекстДлительнойОперации.Заголовок = ТекстСообщения;
		КонецЕсли;
		Элементы.ФормаКоманднаяПанель.ГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Центр;
		Элементы.ДекорацияДлительнаяОперация.Видимость = Истина;
		
	КонецЕсли;
	
	Если ОбщегоНазначения.ЭтоМобильныйКлиент() Тогда
		ПоложениеКоманднойПанели = ПоложениеКоманднойПанелиФормы.Верх;
	КонецЕсли;
	
	ЗаменитьБубликНаДинамичный();
	
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_НадписьРекомендацииОбработкаНавигационнойСсылки(Элемент, НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка)
	
	Если НавигационнаяСсылкаФорматированнойСтроки = "РекомендацииСЭДО" Тогда
		СтандартнаяОбработка = Ложь;	
		
		ПараметрыФормы = Новый Структура;
		ПараметрыФормы.Вставить("Действие", "ОтправкаДокумента");   
		
		ОткрытьФорму("ОбщаяФорма.РекомендацииСЭДО", 
			ПараметрыФормы, 
			ЭтотОбъект, 
			УникальныйИдентификатор, , , , 
			РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ПовторитьОтправку(Команда)
	
	Результат = НСтр("ru = 'Повторить';
					|en = 'Повторить'");
	ЭтотОбъект.Закрыть(Результат);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ЗаменитьБубликНаДинамичный()
	
	Элементы.ДекорацияДлительнаяОперация.Картинка = БиблиотекаКартинок.ДлительнаяОперация48;
	
КонецПроцедуры

#КонецОбласти