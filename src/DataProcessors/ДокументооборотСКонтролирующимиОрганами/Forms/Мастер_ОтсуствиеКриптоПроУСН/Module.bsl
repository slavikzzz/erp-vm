
&НаКлиенте
Перем КонтекстЭДОКлиент Экспорт;

#Область ОбработчикиСобытийФормы

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если ЭлектронныйДокументооборотСКонтролирующимиОрганамиКлиент.ФормаОткрыта(ИмяФормы) Тогда
		Отказ = Истина;
	КонецЕсли;
	
	ОписаниеОповещения = Новый ОписаниеОповещения("ПриОткрытииЗавершение", ЭтотОбъект);
	
	ДокументооборотСКОКлиент.ПолучитьКонтекстЭДО(ОписаниеОповещения);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормы

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура СкачатьCryptoPro(Команда)
	
	ОписаниеОповещения = Новый ОписаниеОповещения(
		"СкачатьCryptoPro_ПослеУстановкиКомпонентыПлатформы", 
		ЭтотОбъект,
		,
		"ПолучитьМенеджерИСертификатКриптографии_ОбработчикОшибкиСертификата",
		КонтекстЭДОКлиент);
		
	ЭлектроннаяПодписьКлиент.УстановитьРасширение(Ложь, ОписаниеОповещения);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура СкачатьCryptoPro_ПослеУстановкиКомпонентыПлатформы(Результат, ВходящийКонтекст) Экспорт
	
	Оповещение = Новый ОписаниеОповещения("СкачатьCryptoProПослеУстановки", ЭтотОбъект);
	ОбщегоНазначенияЭДКОКлиент.УстановитьCryptoProCSP(Оповещение, ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытииЗавершение(Результат, ДополнительныеПараметры) Экспорт
	
	КонтекстЭДОКлиент = Результат.КонтекстЭДО;
	ДлительнаяОтправкаКлиент.ЗакрытьФормуОжиданияЗагрузкиМодуля(); 
	
КонецПроцедуры

&НаКлиенте
Процедура СкачатьCryptoProПослеУстановки(Результат, ВходящийКонтекст) Экспорт
	
	Если Результат.Выполнено Тогда
		ДокументооборотСКОКлиентСервер.АктивизироватьСтраницу(
			Элементы.Страницы, 
			Элементы.ПослеУстановки);
	Иначе
		ОбщегоНазначенияКлиент.СообщитьПользователю(НСтр("ru = 'Не удалось установить криптопровайдер.';
														|en = 'Не удалось установить криптопровайдер.'"));
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти



