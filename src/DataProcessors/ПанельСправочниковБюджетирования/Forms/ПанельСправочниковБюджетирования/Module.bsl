
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Если ПолучитьФункциональнуюОпцию("УправлениеТорговлей") Тогда
		Заголовок = НСтр("ru = 'Настройки и справочники по планированию';
						|en = 'Planning settings and catalogs'");
	Иначе
		Заголовок = НСтр("ru = 'Настройки и справочники по бюджетированию и планированию';
						|en = 'Budgeting and planning settings and catalogs'");
	КонецЕсли;
	
	// Настройки видимости при запуске
	УправлениеЭлементами();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОткрытьМоделиБюджетирования(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.МоделиБюджетирования.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСтатьиБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.СтатьиБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьАналитикиСтатейБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("ПланВидовХарактеристик.АналитикиСтатейБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСценарии(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.Сценарии.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьВидыБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.ВидыБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьПоказателиБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.ПоказателиБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСвязиПоказателейБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("РегистрСведений.СвязиПоказателейБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьНефинансовыеПоказатели(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.НефинансовыеПоказателиБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьШаблоныВводаНефинансовыхПоказателей(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.ШаблоныВводаНефинансовыхПоказателей.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьПравилаПолученияФактическихДанных(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Обработка.НастройкаПравилПолученияФактаБюджетирования.Форма");
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьЭтапыБюджетногоПроцесса(Команда)
	
	//++ НЕ УТКА
	ОткрытьФорму("Справочник.ЭтапыПодготовкиБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТКА
	Возврат; // в УТ2 и КА2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ВыгрузитьМодельБюджетирования(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Обработка.ПомощникВыгрузкиЗагрузкиМоделиБюджетирования.Форма.Выгрузка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ11 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ЗагрузитьМодельБюджетирования(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Обработка.ПомощникВыгрузкиЗагрузкиМоделиБюджетирования.Форма.Загрузка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ11 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьИсточникиДанныхПланирования(Команда)
	
	ОткрытьФорму("Справочник.ИсточникиДанныхПланирования.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьВидыПланов(Команда)
	
	ОткрытьФорму("Справочник.ВидыПланов.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСценарииПланирования(Команда)
	
	ОткрытьФорму("Справочник.СценарииТоварногоПланирования.ФормаСписка", , ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСезонныеКоэффициенты(Команда)
	
	ОткрытьФорму("РегистрСведений.СезонныеКоэффициенты.Форма.СезонныеКоэффициенты",, ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСезонныеГруппыБизнесРегионов(Команда)
	
	ОткрытьФорму("Справочник.СезонныеГруппыБизнесРегионов.ФормаСписка",, ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьНормативыРаспределения(Команда)
	
	ОткрытьФорму("Документ.НормативРаспределенияПлановПродажПоКатегориям.Форма.ФормаРедактирования",, ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьГруппыДоступаВидовБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.ГруппыДоступаВидовБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьГруппыДоступаСтатейИПоказателейБюджетов(Команда)
	
	//++ НЕ УТ
	ОткрытьФорму("Справочник.ГруппыДоступаСтатейИПоказателейБюджетов.ФормаСписка", , ЭтаФорма);
	//-- НЕ УТ
	Возврат; // в УТ2 не используется
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УправлениеЭлементами()
	
	//++ НЕ УТ

	// Бюджетирование
	ИспользоватьБюджетирование = ПолучитьФункциональнуюОпцию("ИспользоватьБюджетирование");
	
	ПравоДоступаМоделиБюджетирования                         = ПравоДоступа("Просмотр", Метаданные.Справочники.МоделиБюджетирования);
	ПравоДоступаСценарии                                     = ПравоДоступа("Просмотр", Метаданные.Справочники.Сценарии);
	ПравоДоступаСтатьиБюджетов                               = ПравоДоступа("Просмотр", Метаданные.Справочники.СтатьиБюджетов);
	ПравоДоступаАналитикиСтатейБюджетов                      = ПравоДоступа("Просмотр", Метаданные.ПланыВидовХарактеристик.АналитикиСтатейБюджетов);
	ПравоДоступаПоказателиБюджетов                           = ПравоДоступа("Просмотр", Метаданные.Справочники.ПоказателиБюджетов);
	ПравоДоступаСвязиПоказателейБюджетов                     = ПравоДоступа("Просмотр", Метаданные.РегистрыСведений.СвязиПоказателейБюджетов);
	ПравоДоступаНефинансовыеПоказателиБюджетов               = ПравоДоступа("Просмотр", Метаданные.Справочники.НефинансовыеПоказателиБюджетов);
	ПравоДоступаНастройкаПравилПолученияФактаБюджетирования  = ПравоДоступа("Просмотр", Метаданные.Обработки.НастройкаПравилПолученияФактаБюджетирования);
	ПравоДоступаВидыБюджетов                                 = ПравоДоступа("Просмотр", Метаданные.Справочники.ВидыБюджетов);
	ПравоДоступаПомощникВыгрузкиЗагрузкиМоделиБюджетирования = ПравоДоступа("Просмотр", Метаданные.Обработки.ПомощникВыгрузкиЗагрузкиМоделиБюджетирования);
	ПравоДоступаШаблоныВводаНефинансовыхПоказателей          = ПравоДоступа("Просмотр", Метаданные.Справочники.ШаблоныВводаНефинансовыхПоказателей);
	
	Элементы.ГруппаБюджетирование.Видимость                       = ИспользоватьБюджетирование;
	Элементы.ОткрытьМоделиБюджетирования.Видимость                = ПравоДоступаМоделиБюджетирования;
	Элементы.ЗагрузитьМодельБюджетирования.Видимость              = ПравоДоступаМоделиБюджетирования И ПравоДоступаПомощникВыгрузкиЗагрузкиМоделиБюджетирования;
	Элементы.ВыгрузитьМодельБюджетированияВФайл.Видимость         = ПравоДоступаМоделиБюджетирования И ПравоДоступаПомощникВыгрузкиЗагрузкиМоделиБюджетирования;
	Элементы.ОткрытьСценарии.Видимость                            = ПравоДоступаСценарии;
	Элементы.ОткрытьСтатьиБюджетов.Видимость                      = ПравоДоступаСтатьиБюджетов;
	Элементы.ОткрытьАналитикиСтатейБюджетов.Видимость             = ПравоДоступаАналитикиСтатейБюджетов;
	Элементы.ОткрытьПоказателиБюджетов.Видимость                  = ПравоДоступаПоказателиБюджетов;
	Элементы.ОткрытьСвязиПоказателейБюджетов.Видимость            = ПравоДоступаСвязиПоказателейБюджетов;
	Элементы.ОткрытьНефинансовыеПоказатели.Видимость              = ПравоДоступаНефинансовыеПоказателиБюджетов;
	Элементы.ОткрытьПравилаПолученияФакта.Видимость               = ПравоДоступаНастройкаПравилПолученияФактаБюджетирования;
	Элементы.ОткрытьВидыБюджетов.Видимость                        = ПравоДоступаВидыБюджетов;
	Элементы.ОткрытьШаблоныВводаНефинансовыхПоказателей.Видимость = ПравоДоступаШаблоныВводаНефинансовыхПоказателей;
	
	ПравоДоступаЭтапыПодготовкиБюджетов                           = Ложь;
	ИспользоватьБюджетныйПроцесс                                  = Ложь;
	ПравоДоступаГруппыДоступаВидовБюджетов                        = Ложь;
	ПравоДоступаГруппыДоступаСтатейИПоказателейБюджетов           = Ложь;
	ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов      = Ложь;
	//-- НЕ УТ
	
	//++ НЕ УТКА
	ПравоДоступаЭтапыПодготовкиБюджетов                      = ПравоДоступа("Просмотр", Метаданные.Справочники.ЭтапыПодготовкиБюджетов);
	ИспользоватьБюджетныйПроцесс                             = ПолучитьФункциональнуюОпцию("ИспользоватьБюджетныйПроцесс");
	ПравоДоступаГруппыДоступаВидовБюджетов                   = ПравоДоступа("Просмотр", Метаданные.Справочники.ГруппыДоступаВидовБюджетов);
	ПравоДоступаГруппыДоступаСтатейИПоказателейБюджетов      = ПравоДоступа("Просмотр", Метаданные.Справочники.ГруппыДоступаСтатейИПоказателейБюджетов);
	ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов = ПолучитьФункциональнуюОпцию("ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов");
	//-- НЕ УТКА
	
	//++ НЕ УТ
	Элементы.ОткрытьЭтапыПодготовкиБюджетов.Видимость                 = ПравоДоступаЭтапыПодготовкиБюджетов И ИспользоватьБюджетныйПроцесс;
	Элементы.ОткрытьГруппыДоступаВидовБюджетов.Видимость              = ПравоДоступаГруппыДоступаСтатейИПоказателейБюджетов 
		И ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов;
	Элементы.ОткрытьГруппыДоступаСтатейИПоказателейБюджетов.Видимость = ПравоДоступаГруппыДоступаВидовБюджетов 
		И ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов;
	//-- НЕ УТ
	
	ЕстьДанныеДляОтображенияБюджетирование = Ложь;
	
	//++ НЕ УТ
	ЕстьДанныеДляОтображенияБюджетирование = ИспользоватьБюджетирование
		И (ПравоДоступаМоделиБюджетирования
			Или ПравоДоступаСценарии
			Или ПравоДоступаСтатьиБюджетов
			Или ПравоДоступаАналитикиСтатейБюджетов
			Или ПравоДоступаПоказателиБюджетов
			Или ПравоДоступаСвязиПоказателейБюджетов
			Или ПравоДоступаНефинансовыеПоказателиБюджетов
			Или ПравоДоступаНастройкаПравилПолученияФактаБюджетирования
			Или ПравоДоступаВидыБюджетов
			Или ПравоДоступаПомощникВыгрузкиЗагрузкиМоделиБюджетирования
			Или ПравоДоступаШаблоныВводаНефинансовыхПоказателей
	//++ НЕ УТКА
			Или (ИспользоватьБюджетныйПроцесс И ПравоДоступаЭтапыПодготовкиБюджетов)
	//-- НЕ УТКА
			Или (ИспользоватьГруппыДоступаВидовСтатейИПоказателейБюджетов 
				И (ПравоДоступаГруппыДоступаВидовБюджетов
					Или ПравоДоступаГруппыДоступаСтатейИПоказателейБюджетов))
			);
	//-- НЕ УТ
			
	// Планирование
	ИспользоватьПланирование = 
		ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеЗакупок")
		Или ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеПродаж")
		//++ НЕ УТ
		Или ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеПроизводства")
		//-- НЕ УТ
		Или ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеСборкиРазборки")
		Или ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеПродажПоКатегориям")
		Или ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеВнутреннихПотреблений");
	
	ПравоДоступаИсточникиДанныхПланирования = ПравоДоступа("Просмотр", Метаданные.Справочники.ИсточникиДанныхПланирования);
	ПравоДоступаСценарииПланирования        = ПравоДоступа("Просмотр", Метаданные.Справочники.СценарииТоварногоПланирования);
	ПравоДоступаВидыПланов                  = ПравоДоступа("Просмотр", Метаданные.Справочники.ВидыПланов);
	ПравоДоступаСезонныеКоэффициенты        = ПравоДоступа("Просмотр", Метаданные.РегистрыСведений.СезонныеКоэффициенты);
	ПравоДоступаСезонныеГруппыБизнесРегионов= ПравоДоступа("Просмотр", Метаданные.Справочники.СезонныеГруппыБизнесРегионов);
	ПравоДоступаНормативыРаспределения      = ПравоДоступа("Просмотр", Метаданные.Документы.НормативРаспределенияПлановПродажПоКатегориям);
	
	Элементы.ОткрытьИсточникиДанныхПланирования.Видимость = ПравоДоступаИсточникиДанныхПланирования;
	Элементы.ОткрытьСценарииПланирования.Видимость = ПравоДоступаСценарииПланирования;
	Элементы.ОткрытьВидыПланов.Видимость = ПравоДоступаВидыПланов;
	Элементы.ОткрытьСезонныеКоэффициенты.Видимость = ПравоДоступаСезонныеКоэффициенты;
	Элементы.ОткрытьСезонныеГруппыБизнесРегионов.Видимость = ПравоДоступаСезонныеГруппыБизнесРегионов;
	Элементы.ОткрытьНормативыРаспределения.Видимость = ПравоДоступаНормативыРаспределения;
	
			
	ЕстьДанныеДляОтображенияПланирование = ИспользоватьПланирование
		И (ПравоДоступаИсточникиДанныхПланирования
			Или ПравоДоступаСценарииПланирования
			Или ПравоДоступаВидыПланов
			Или ПравоДоступаСезонныеКоэффициенты
			Или ПравоДоступаСезонныеГруппыБизнесРегионов
			Или ПравоДоступаНормативыРаспределения);
		
		
	Если ЕстьДанныеДляОтображенияБюджетирование Или ЕстьДанныеДляОтображенияПланирование Тогда
		Элементы.ГруппаНеУстановленыНеобходимыеНастройки.Видимость = Ложь;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
