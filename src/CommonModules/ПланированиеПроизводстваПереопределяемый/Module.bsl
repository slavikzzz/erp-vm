
////////////////////////////////////////////////////////////////////////////////
// Переопределяемые процедуры и функции планирования производства
//
////////////////////////////////////////////////////////////////////////////////

//++ Устарело_Производство21

//++ НЕ УТКА

#Область ПрограммныйИнтерфейс

#Область РасчетГрафикаПроизводства

// Выполняет расчет графика производства
//
// Параметры:
//  СтруктураПараметров	 - Структура - структура параметров расчета графика производства
//  ПараметрыОтладки	 - Структура - структура параметров отладки.
// 
// Возвращаемое значение:
//  ТаблицаЗначений - график выпуска продукции.
//
Функция РассчитатьГрафикВыпускаПродукции(СтруктураПараметров, ПараметрыОтладки = Неопределено) Экспорт
	
	ПланированиеПроизводства.СкорректироватьВремяВыполненияЭтапов(СтруктураПараметров);
	
	Пока Истина Цикл
		
		ПоследовательностьЭтапов = ПланированиеПроизводства.ПоследовательностьЭтапов(СтруктураПараметров);
		ПланированиеПроизводства.ВыполнитьПланирование(СтруктураПараметров, ПоследовательностьЭтапов);
		
		Если СтруктураПараметров.Ошибки.Количество() = 0 Тогда
			
			ГрафикВыпускаПродукции = СтруктураПараметров.ГрафикВыпускаПродукции;
			
		Иначе
												
			ГрафикВыпускаПродукции = Неопределено;
												
		КонецЕсли;
		
		Если ГрафикВыпускаПродукции = Неопределено
			И СтруктураПараметров.РазмещениеВыпуска = Перечисления.СпособыПривязкиОперацийПроизводства.КОкончанию
			И СтруктураПараметров.ИзменятьРазмещениеВыпуска Тогда
			
			Если СтруктураПараметров.Свойство("Ошибки") Тогда
				
				СтруктураПараметров.Удалить("Ошибки");
				
			КонецЕсли;
			
			СтруктураПараметров.РазмещениеВыпуска = Перечисления.СпособыПривязкиОперацийПроизводства.КНачалу;
			Продолжить;
			
		Иначе
			
			Прервать;
			
		КонецЕсли;
		
	КонецЦикла;
	
	Возврат ГрафикВыпускаПродукции;
	
КонецФункции

#КонецОбласти

#КонецОбласти

//-- НЕ УТКА

//-- Устарело_Производство21