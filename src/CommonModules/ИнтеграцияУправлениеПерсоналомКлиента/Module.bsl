
#Область СлужебныеПроцедурыИФункции

Функция ОписаниеКнопокВопроса() Экспорт

	Кнопки = Новый СписокЗначений;
	Кнопки.Добавить(КодВозвратаДиалога.Да, НСтр("ru = 'Продолжить';
												|en = 'Continue'"));
	Кнопки.Добавить(КодВозвратаДиалога.Отмена);
	
	Возврат Кнопки

КонецФункции

Функция ПроверитьИмяДомена(ИмяДомена, Текст, РазрешенныеСимволыИмениДомена) Экспорт
	
	Результат = Новый Структура("ИмяДоменаСоответствуетПравилам,СообщениеОбОшибке");
	
	ПроверятьОкончание = Истина;
	Если Текст <> Неопределено Тогда
		ПроверяемаяСтрока = Текст;
		ПроверятьОкончание = Ложь;
	Иначе
		ПроверяемаяСтрока = ИмяДомена;
	КонецЕсли;
	КоличествоСимволов = СтрДлина(ПроверяемаяСтрока);
	
	СообщенияПроверки = "";
	Если СтрНачинаетсяС(ПроверяемаяСтрока, "-") Тогда
		СообщенияПроверки = НСтр("ru = 'Адрес может начинаться только с буквы или цифры';
								|en = 'Адрес может начинаться только с буквы или цифры'");
	ИначеЕсли ПроверятьОкончание И СтрЗаканчиваетсяНа(ПроверяемаяСтрока, "-") Тогда
		СообщенияПроверки = НСтр("ru = 'Адрес должен заканчиваться буквой или цифрой';
								|en = 'Адрес должен заканчиваться буквой или цифрой'");
	ИначеЕсли СтрНайти(ПроверяемаяСтрока, "--") > 0 Тогда
		СообщенияПроверки = НСтр("ru = 'Адрес не может содержать два дефиса подряд';
								|en = 'Адрес не может содержать два дефиса подряд'");
	Иначе
		ПроверяемаяСтрока = НРег(ПроверяемаяСтрока);
		ЗапрещенныеСимволы = "";
		Для Позиция = 1 По КоличествоСимволов Цикл
			СимволИмени = Сред(ПроверяемаяСтрока, Позиция, 1);
			Если РазрешенныеСимволыИмениДомена.Получить(СимволИмени) = Неопределено Тогда
				ЗапрещенныеСимволы = ЗапрещенныеСимволы + ?(ПустаяСтрока(ЗапрещенныеСимволы),"",",") + """" +СимволИмени + """";
			КонецЕсли;
		КонецЦикла;
		Если Не ПустаяСтрока(ЗапрещенныеСимволы) Тогда
			СообщенияПроверки = НСтр("ru = 'В адресе используются неразрешенные символы:';
									|en = 'В адресе используются неразрешенные символы:'") + " ";
			СообщенияПроверки = СтрШаблон("%1 %2", СообщенияПроверки, ЗапрещенныеСимволы);
		КонецЕсли;
	КонецЕсли;
	
	Если ПустаяСтрока(СообщенияПроверки) Тогда
		Если ПроверятьОкончание И КоличествоСимволов < 3 Тогда
			СообщенияПроверки = НСтр("ru = 'Длина адреса должна быть от 3 до 63 символов';
									|en = 'Длина адреса должна быть от 3 до 63 символов'");
		ИначеЕсли КоличествоСимволов > 63 Тогда
			СообщенияПроверки = НСтр("ru = 'Длина адреса должна быть от 3 до 63 символов';
									|en = 'Длина адреса должна быть от 3 до 63 символов'");
		КонецЕсли;
	КонецЕсли;
	
	Результат.ИмяДоменаСоответствуетПравилам 	= ПроверятьОкончание И ПустаяСтрока(СообщенияПроверки);
	Результат.СообщениеОбОшибке 				= СообщенияПроверки;
	
	Возврат Результат;

КонецФункции

#КонецОбласти