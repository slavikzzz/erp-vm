
#Область ПрограммныйИнтерфейс

// Дозаполнение параметров структуры с настройками.
//
// Параметры:
//   Настройки   - Структура - Описание в ОМ.РасчетРезервов.СтруктураНастроекРезервов().
//   Организация - Спр.Организации.СправочникСсылка - Организация.
//   Резерв      - Спр.Резервы.СправочникСсылка - Резерв.
//   Период      - Дата - Период дат.
//
Процедура ЗаполнитьНастройкиРезервов(Настройки, Организация, Резерв, Период) Экспорт

КонецПроцедуры

// Уточняет необходимость выполнять расчет резервов, устанавливается в Ложь, 
// когда резервы рассчитываются в другой программе.
//
// Параметры:
//	РезервыРассчитываются - тип булево.
//
Процедура ПолучитьЗначениеРезервыРассчитываются(РезервыРассчитываются) Экспорт
	
	РезервыРассчитываются = ПолучитьФункциональнуюОпцию("ИспользоватьНачислениеЗарплаты");
	
КонецПроцедуры

// Уточняет возможность использования автоматического расчета резервов, 
// устанавливается в Ложь, когда авторасчет резервов отключен.
//
// Параметры:
//	Автоматически - тип булево.
//
Процедура РезервыРассчитываютсяАвтоматически(Автоматически) Экспорт
	
	Автоматически = ПолучитьФункциональнуюОпцию("ИспользоватьНачислениеЗарплаты");
	
КонецПроцедуры

// Процедура предназначена для формирования движений по месту внедрения.
//
// Параметры:
//	Объект - конкретный экземпляр документа Начисление оценочных обязательств по отпускам (ДокументОбъект.РезервыПоОплатеТруда)
//	Отказ  - булево, признак отказа от проведения документа.
//	РежимПроведения - режим проведения документа.
//
Процедура СформироватьДвижения(Объект, Отказ, РежимПроведения) Экспорт
	
	ПроведениеДокументов.ОбработкаПроведенияДокумента(Объект, Отказ);
	
КонецПроцедуры

// Процедура предназначена для дополнения таблицы параметров данными об остатках отпусков 
// и ФОТ с учетом специфики места внедрения.
//
// Параметры:
//   Организация - Спр.Организации.СправочникСсылка - Организация.
//   Период - Дата - Период дат.
//   ДанныеПоказателей - таблица значений.
//		Структура таблицы ДанныеПоказателей.
//			Сотрудник
//			СреднийЗаработок
//
Процедура ДополнитьТаблицуОстатковОтпусков(Организация, Период, ДанныеПоказателей) Экспорт

КонецПроцедуры

// Процедура предназначена для получения настройки использования обмена
// с учетом специфики места внедрения.
//
// Параметры:
// 	ОбменИспользуется - Булево - в параметр помещается вычисленное значение настройки.
// 	Организация - СправочникСсылка.Организации - организация (филиал), по которой получается настройка.
//
Процедура ПроверитьИспользованиеОбмена(ОбменИспользуется, Организация) Экспорт

КонецПроцедуры

//Процедура предназначена для уточнения сведений о видах отпусков по месту внедрения
// Параметры:
//   НачисленнаяЗарплатаИВзносы - таблица значений, см ОтражениеЗарплатыВБухучете.НоваяТаблицаБухучетНачисленнаяЗарплатаИВзносы().
//
Процедура ДополнитьТаблицуСведениямиОбОсобенностяхОтпусков(НачисленнаяЗарплатаИВзносы) Экспорт

КонецПроцедуры

//Процедура предназначена для уточнения сведений о видах операций по месту внедрения
// Параметры:
//   СписокВидовОпераций - Список значений, где 
//               Значение - ПеречислениеСсылка.ВидыОперацийРезервовПоОплатеТруда,
//               Представление - подробное описание операции
//
Процедура ЗаполнитьПодробноеОписаниеВидовОперациий(СписокВидовОпераций) Экспорт
	
	СписокВидовОпераций.Очистить();
	
	НоваяОперация = СписокВидовОпераций.Добавить();
	НоваяОперация.Значение      = Перечисления.ВидыОперацийРезервовПоОплатеТруда.Начисление;
	НоваяОперация.Представление = НСтр("ru = 'Плановое начисление резерва за выбранный период.
	|В учете отражается начисление по  Кт счета 96 в корреспонденции с Дт счета затрат.';
	|en = 'Planned payroll fund accrual for the selected period.
	|The accounting records the accrual by Cr of account 96 in correspondence with Dr of the expense account.'");
	
	НоваяОперация = СписокВидовОпераций.Добавить();
	НоваяОперация.Значение      = Перечисления.ВидыОперацийРезервовПоОплатеТруда.Инвентаризация;
	НоваяОперация.Представление = НСтр("ru = 'Сравнение накопленных и рассчитанных сумм.
	|В учете отражается доначисление или списание по счету 96 в корреспонденции со счетом 91.';
	|en = 'Compare accumulated and calculated amounts.
	|The accounting records the additional accrual or write-off by account 96 in correspondence with account 91.'");
	
	НоваяОперация = СписокВидовОпераций.Добавить();
	НоваяОперация.Значение      = Перечисления.ВидыОперацийРезервовПоОплатеТруда.Списание;
	НоваяОперация.Представление = НСтр("ru = 'Списание накопленных резервов полностью или частично.
	|В учете отражается списание по Дт счета 96 в корреспонденции с Кт выбранного счета.';
	|en = 'Write off accumulated payroll funds fully or partially.
	|The accounting records the write-off by Dr of account 96 in correspondence with Cr of the selected account.'");
	
	НоваяОперация = СписокВидовОпераций.Добавить();
	НоваяОперация.Значение      = Перечисления.ВидыОперацийРезервовПоОплатеТруда.Корректировка;
	НоваяОперация.Представление = НСтр("ru = 'Доначисление резервов.
	|В учете отражается начисление по Кт счета 96 в корреспонденции с Дт выбранного счета.';
	|en = 'Additional accrual of payroll funds.
	|The accounting records the accrual by Cr of account 96 in correspondence with Dr of the selected account.'");
	
КонецПроцедуры

//Процедура расширение обработчика ПередЗаписью документа по месту внедрения
// Параметры:
//	Объект - конкретный экземпляр документа Начисление оценочных обязательств по отпускам (ДокументОбъект.РезервыПоОплатеТруда)
//	Отказ  - булево, признак отказа от записи документа.
//	РежимЗаписи  - режим записи документа.
//	РежимПроведения - режим проведения документа.
//
Процедура ПередЗаписью(Объект, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	
	ПараметрыВыбораСтатейИАналитик = РезервыПоОплатеТрудаУП.ПараметрыВыбораСтатейИАналитик();
	ДоходыИРасходыСервер.ПередЗаписью(Объект, ПараметрыВыбораСтатейИАналитик);
	
	ОбщегоНазначенияУТ.ЗаполнитьИдентификаторыДокумента(Объект, "ОценочныеОбязательства");
	ПроведениеДокументов.ПередЗаписьюДокумента(Объект, РежимЗаписи, РежимПроведения);
	
КонецПроцедуры

//Процедура расширение обработчика ПриЗаписи документа по месту внедрения
// Параметры:
//	Объект - конкретный экземпляр документа Начисление оценочных обязательств по отпускам (ДокументОбъект.РезервыПоОплатеТруда)
//	Отказ  - булево, признак отказа от записи документа.
//
Процедура ПриЗаписи(Объект, Отказ) Экспорт
	
	ПроведениеДокументов.ПриЗаписиДокумента(Объект, Отказ);
	
КонецПроцедуры

//Процедура расширение обработчика ОбработкаУдаленияПроведения документа по месту внедрения
// Параметры:
//	Объект - конкретный экземпляр документа Начисление оценочных обязательств по отпускам (ДокументОбъект.РезервыПоОплатеТруда)
//	Отказ  - булево, признак отказа от удаления проведения документа.
//
Процедура ОбработкаУдаленияПроведения(Объект, Отказ) Экспорт
	
	ПроведениеДокументов.ОбработкаУдаленияПроведенияДокумента(Объект, Отказ);
	
КонецПроцедуры

// В процедуре возможно выполнить постобработку расчитанной таблицы оценочных обязательств по месту внедрения
//
// Параметры:
//   ОценочныеОбязательства - ТаблицаЗначений - Таблица оценочных обязательств по сотрудникам
//   Организация - СправочникСсылка.Организации - Организация
//   МесяцНачисления - Дата - Месяц начисления
//
Процедура ДополнитьТаблицуОценочныхОбязательствПоСотрудникам(ОценочныеОбязательства, Организация, МесяцНачисления) Экспорт
	РезервыПоОплатеТрудаУП.РаспределитьТаблицуОбязательствПоПодразделениямВыработки(ОценочныеОбязательства, Организация, МесяцНачисления);
КонецПроцедуры

// Процедура предназначена для определения использования детального учета резервов
// с учетом специфики места внедрения. 
// Например, если поддерживается внешняя загрузка данных, тогда детальный учет отсутствует.
//
// Параметры:
//   ИспользуетсяДетальныйУчетРезервов - Булево, переопределяется в зависимости от настройки
//
Процедура ИспользуетсяДетальныйУчетРезервов(ИспользуетсяДетальныйУчетРезервов) Экспорт
	
КонецПроцедуры

#КонецОбласти

#Область УстаревшиеПроцедурыИФункции

// Устарела. Следует использовать РезервыПоОплатеТрудаПереопределяемый.ПроверитьИспользованиеОбмена
// Процедура предназначена для получения настройки использования обмена с БП3
// с учетом специфики места внедрения.
//
// Параметры:
// 	ОбменИспользуется - Булево - в параметр помещается вычисленное значение настройки.
// 	Организация - СправочникСсылка.Организации - организация (филиал), по которой получается настройка.
//
Процедура ИспользуетсяОбменЗУПБП(ОбменИспользуется, Организация) Экспорт

КонецПроцедуры

#КонецОбласти

