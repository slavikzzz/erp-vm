
#Область ПрограммныйИнтерфейс

#Область Проведение

// Описывает учетные механизмы используемые в документе для регистрации в механизме проведения.
//
// Параметры:
//  МеханизмыДокумента - Массив - список имен учетных механизмов, для которых будет выполнена
//              регистрация в механизме проведения.
//
Процедура ЗарегистрироватьУчетныеМеханизмы(МеханизмыДокумента) Экспорт
	
	//++ Локализация
	МеханизмыДокумента.Добавить("РегламентированныйУчет");
	//-- Локализация
	
КонецПроцедуры

#КонецОбласти

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

#Область ОбработчикиСобытий

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый документ.
//  Отказ - Булево - Признак проведения документа.
//                   Если в теле процедуры-обработчика установить данному параметру значение Истина,
//                   то проведение документа выполнено не будет.
//  РежимПроведения - РежимПроведенияДокумента - В данный параметр передается текущий режим проведения.
//
Процедура ОбработкаПроведения(Объект, Отказ, РежимПроведения) Экспорт
	
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект
//  Отказ - Булево - Если в теле процедуры-обработчика установить данному параметру значение Истина,
//                   то будет выполнен отказ от продолжения работы после выполнения проверки заполнения.
//  ПроверяемыеРеквизиты - Массив - Массив путей к реквизитам, для которых будет выполнена проверка заполнения.
//
Процедура ОбработкаПроверкиЗаполнения(Объект, Отказ, ПроверяемыеРеквизиты) Экспорт
	
	
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект.
//  ДанныеЗаполнения - Произвольный - Значение, которое используется как основание для заполнения.
//  СтандартнаяОбработка - Булево - В данный параметр передается признак выполнения стандартной (системной) обработки события.
//
Процедура ОбработкаЗаполнения(Объект, ДанныеЗаполнения, СтандартнаяОбработка) Экспорт
	//++ Локализация
	ЗаполнениеДокументов.Заполнить(Объект, ДанныеЗаполнения);
	//-- Локализация
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект
//  Отказ - Булево - Признак отказа от записи.
//                   Если в теле процедуры-обработчика установить данному параметру значение Истина,
//                   то запись выполнена не будет и будет вызвано исключение.
//
Процедура ОбработкаУдаленияПроведения(Объект, Отказ) Экспорт
	
	
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект
//  Отказ - Булево - Признак отказа от записи.
//                   Если в теле процедуры-обработчика установить данному параметру значение Истина,
//                   то запись выполнена не будет и будет вызвано исключение.
//  РежимЗаписи - РежимЗаписиДокумента - В параметр передается текущий режим записи документа. Позволяет определить в теле процедуры режим записи.
//  РежимПроведения - РежимПроведенияДокумента - В данный параметр передается текущий режим проведения.
//
Процедура ПередЗаписью(Объект, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	
	
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект
//  Отказ - Булево - Признак отказа от записи.
//                   Если в теле процедуры-обработчика установить данному параметру значение Истина, то запись выполнена не будет и будет вызвано исключение.
//
Процедура ПриЗаписи(Объект, Отказ) Экспорт
	
	
КонецПроцедуры

// Вызывается из соответствующего обработчика документа
//
// Параметры:
//  Объект - ДокументОбъект - Обрабатываемый объект
//  ОбъектКопирования - ДокументОбъект.НачислениеСписаниеРезервовПредстоящихРасходов - Исходный документ, который является источником копирования.
//
Процедура ПриКопировании(Объект, ОбъектКопирования) Экспорт
	
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФорм

// Вызывается из соответствующего события модуля формы документы
//
// Параметры:
//  Форма  - ФормаКлиентскогоПриложения - форма документа
//
Процедура ПриЧтенииСозданииНаСервере(Форма) Экспорт
	
	//++ Локализация
	
	Элементы = Форма.Элементы;
	Элементы.РезервыТекущаяСуммаНУ.Видимость         = Истина;
	Элементы.РезервыУстановитьНовуюСуммуНУ.Видимость = Истина;
	Элементы.РезервыНоваяСуммаНУ.Видимость           = Истина;
	
	//-- Локализация
	
КонецПроцедуры

#КонецОбласти

#Область ПодключаемыеКоманды

// Определяет список команд создания на основании.
//
// Параметры:
//  КомандыСозданияНаОсновании - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.КомандыСозданияНаОсновании
//  Параметры - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.Параметры
//
Процедура ДобавитьКомандыСозданияНаОсновании(КомандыСозданияНаОсновании, Параметры) Экспорт
	
	
КонецПроцедуры

// Добавляет команду создания документа "Авансовый отчет".
//
// Параметры:
//  КомандыСозданияНаОсновании - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.КомандыСозданияНаОсновании
//
Процедура ДобавитьКомандуСоздатьНаОсновании(КомандыСозданияНаОсновании) Экспорт


КонецПроцедуры

// Определяет список команд отчетов.
//
// Параметры:
//   КомандыОтчетов - См. ВариантыОтчетовПереопределяемый.ПередДобавлениемКомандОтчетов.КомандыОтчетов
//   Параметры - См. ВариантыОтчетовПереопределяемый.ПередДобавлениемКомандОтчетов.Параметры
//
Процедура ДобавитьКомандыОтчетов(КомандыОтчетов, Параметры) Экспорт
	
	
КонецПроцедуры

// Заполняет список команд печати.
//
// Параметры:
//   КомандыПечати - см. УправлениеПечатью.СоздатьКоллекциюКомандПечати
//
Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
	
	
КонецПроцедуры

#КонецОбласти

#Область Печать

// Формирует печатные формы.
//
// Параметры:
//  МассивОбъектов  - Массив    - ссылки на объекты, которые нужно распечатать;
//  ПараметрыПечати - Структура - дополнительные настройки печати;
//  КоллекцияПечатныхФорм - ТаблицаЗначений - сформированные табличные документы (выходной параметр)
//  ОбъектыПечати         - СписокЗначений  - значение - ссылка на объект;
//                                            представление - имя области в которой был выведен объект (выходной параметр);
//  ПараметрыВывода       - Структура       - дополнительные параметры сформированных табличных документов (выходной параметр).
//
Процедура Печать(МассивОбъектов, ПараметрыПечати, КоллекцияПечатныхФорм, ОбъектыПечати, ПараметрыВывода) Экспорт
	
	
КонецПроцедуры

#КонецОбласти

//++ НЕ УТ
#Область ПроводкиРегУчета

// Функция возвращает текст запроса для отражения документа в регламентированном учете.
//
// Возвращаемое значение:
//	Строка - Текст запроса
//
Функция ТекстОтраженияВРеглУчете() Экспорт
	
	//++ Локализация
	
ТекстыОтражения = Новый Массив;
	
#Область ТекстНачислениеРезерва_ПрочиеРасходы

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Начисление резерва (Дт 20 :: Кт 96)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	ПрочиеРасходы.СуммаРегл КАК Сумма,
	|	ПрочиеРасходы.СуммаУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	ПрочиеРасходы.СтатьяРасходов КАК АналитикаУчетаДт,
	|	ПрочиеРасходы.Подразделение КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ПрочиеРасходы.Подразделение КАК ПодразделениеДт,
	|	ПрочиеРасходы.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	ПрочиеРасходы.СтатьяРасходов КАК СубконтоДт1,
	|	ПрочиеРасходы.АналитикаРасходов КАК СубконтоДт2,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее) КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	ПрочиеРасходы.СуммаРегл - ПрочиеРасходы.ПостояннаяРазница - ПрочиеРасходы.ВременнаяРазница КАК СуммаНУДт,
	|	ПрочиеРасходы.ПостояннаяРазница КАК СуммаПРДт,
	|	ПрочиеРасходы.ВременнаяРазница КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	ПрочиеРасходы.СуммаРегл - ПрочиеРасходы.ПостояннаяРазница - ПрочиеРасходы.ВременнаяРазница КАК СуммаНУКт,
	|	ПрочиеРасходы.ПостояннаяРазница КАК СуммаПРКт,
	|	ПрочиеРасходы.ВременнаяРазница КАК СуммаВРКт,
	|	""Начисление резерва"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация В(ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеРезервовПредстоящихРасходов), РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПроцентовПоДисконтированию))
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаРегл <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаНУ <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ПрочиеРасходы КАК ПрочиеРасходы
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = ПрочиеРасходы.Регистратор
	|		И РезервыПредстоящихРасходов.ИдентификаторФинЗаписи = ПрочиеРасходы.ИдентификаторФинЗаписи
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = ПрочиеРасходы.ХозяйственнаяОперация
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти
	
#Область ТекстНачислениеРезерва_СтоимостьОС

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Начисление резерва (Дт 01 :: Кт 96)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	СтоимостьОС.СтоимостьРегл КАК Сумма,
	|	СтоимостьОС.Стоимость КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.СтоимостьВНА) КАК ВидСчетаДт,
	|	СтоимостьОС.ГруппаФинансовогоУчета КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	СтоимостьОС.Подразделение КАК ПодразделениеДт,
	|	СтоимостьОС.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	СтоимостьОС.ОсновноеСредство КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	СтоимостьОС.СтоимостьНУ КАК СуммаНУДт,
	|	СтоимостьОС.СтоимостьПР КАК СуммаПРДт,
	|	СтоимостьОС.СтоимостьВР КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	СтоимостьОС.СтоимостьНУ КАК СуммаНУКт,
	|	СтоимостьОС.СтоимостьПР КАК СуммаПРКт,
	|	СтоимостьОС.СтоимостьВР КАК СуммаВРКт,
	|	""Начисление резерва"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация В(ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеРезервовПредстоящихРасходов), РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПроцентовПоДисконтированию))
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаРегл <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаНУ <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.СтоимостьОС КАК СтоимостьОС
	|	ПО 
	|		РезервыПредстоящихРасходов.Регистратор = СтоимостьОС.Регистратор
	|		И РезервыПредстоящихРасходов.ИдентификаторФинЗаписи = СтоимостьОС.ИдентификаторФинЗаписи
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = СтоимостьОС.ХозяйственнаяОперация
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти

#Область ТекстВосстановлениеРезерва_ПрочиеДоходы

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Восстановление резерва (Дт 96 :: Кт 91)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	ПрочиеДоходы.СуммаРегл КАК Сумма,
	|	ПрочиеДоходы.СуммаУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов.ПодразделениеНачисления КАК ПодразделениеДт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоДт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	ВЫБОР
	|		КОГДА ПрочиеДоходы.СуммаРегл = 0
	|			ТОГДА РезервыПредстоящихРасходов.СуммаНУ
	|		ИНАЧЕ 
	|			ВЫБОР
	|				КОГДА РезервыПредстоящихРасходов.СуммаРегл <> 0
	|					ТОГДА РезервыПредстоящихРасходов.СуммаНУ * ПрочиеДоходы.СуммаРегл / РезервыПредстоящихРасходов.СуммаРегл
	|				ИНАЧЕ 0
	|			КОНЕЦ
	|	КОНЕЦ КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	РезервыПредстоящихРасходов.СуммаРегл - ВЫБОР
	|		КОГДА ПрочиеДоходы.СуммаРегл = 0
	|			ТОГДА РезервыПредстоящихРасходов.СуммаНУ
	|		ИНАЧЕ 
	|			ВЫБОР
	|				КОГДА РезервыПредстоящихРасходов.СуммаРегл <> 0
	|					ТОГДА РезервыПредстоящихРасходов.СуммаНУ * ПрочиеДоходы.СуммаРегл / РезервыПредстоящихРасходов.СуммаРегл
	|				ИНАЧЕ 0
	|			КОНЕЦ
	|	КОНЕЦ КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Доходы) КАК ВидСчетаКт,
	|	ПрочиеДоходы.СтатьяДоходов КАК АналитикаУчетаКт,
	|	ПрочиеДоходы.Подразделение КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ПрочиеДоходы.Подразделение КАК ПодразделениеКт,
	|	ПрочиеДоходы.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	ПрочиеДоходы.СтатьяДоходов КАК СубконтоКт1,
	|	ПрочиеДоходы.АналитикаДоходов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	ВЫБОР КОГДА СтатьиДоходов.ПринятиеКНалоговомуУчету	
	|		ТОГДА ВЫБОР
	|			КОГДА ПрочиеДоходы.СуммаРегл = 0
	|				ТОГДА РезервыПредстоящихРасходов.СуммаНУ
	|			ИНАЧЕ 
	|				ВЫБОР
	|					КОГДА РезервыПредстоящихРасходов.СуммаРегл <> 0
	|						ТОГДА РезервыПредстоящихРасходов.СуммаНУ * ПрочиеДоходы.СуммаРегл / РезервыПредстоящихРасходов.СуммаРегл
	|					ИНАЧЕ 0
	|				КОНЕЦ
	|		КОНЕЦ
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК СуммаНУКт,
	|	ВЫБОР КОГДА СтатьиДоходов.ПринятиеКНалоговомуУчету	
	|		ТОГДА 0
	|		ИНАЧЕ ВЫБОР
	|			КОГДА ПрочиеДоходы.СуммаРегл = 0
	|				ТОГДА РезервыПредстоящихРасходов.СуммаНУ
	|			ИНАЧЕ 
	|				ВЫБОР
	|					КОГДА РезервыПредстоящихРасходов.СуммаРегл <> 0
	|						ТОГДА РезервыПредстоящихРасходов.СуммаНУ * ПрочиеДоходы.СуммаРегл / РезервыПредстоящихРасходов.СуммаРегл
	|					ИНАЧЕ 0
	|				КОНЕЦ
	|		КОНЕЦ
	|	КОНЕЦ КАК СуммаПРКт,
	|	РезервыПредстоящихРасходов.СуммаРегл - ВЫБОР
	|		КОГДА ПрочиеДоходы.СуммаРегл = 0
	|			ТОГДА РезервыПредстоящихРасходов.СуммаНУ
	|		ИНАЧЕ 
	|			ВЫБОР
	|				КОГДА РезервыПредстоящихРасходов.СуммаРегл <> 0
	|					ТОГДА РезервыПредстоящихРасходов.СуммаНУ * ПрочиеДоходы.СуммаРегл / РезервыПредстоящихРасходов.СуммаРегл
	|				ИНАЧЕ 0
	|			КОНЕЦ
	|	КОНЕЦ КАК СуммаВРКт,
	|	""Восстановление резерва"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация В(ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРезервовПредстоящихРасходов), РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеПроцентовПоДисконтированию))
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаРегл <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаНУ <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ПрочиеДоходы КАК ПрочиеДоходы
	|	ПО 
	|		РезервыПредстоящихРасходов.Регистратор = ПрочиеДоходы.Регистратор
	|		И РезервыПредстоящихРасходов.ИдентификаторФинЗаписи = ПрочиеДоходы.ИдентификаторФинЗаписи
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = ПрочиеДоходы.ХозяйственнаяОперация
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиДоходов КАК СтатьиДоходов
	|	ПО
	|		ПрочиеДоходы.СтатьяДоходов = СтатьиДоходов.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти
	
#Область ТекстВосстановлениеРезерва_ПрочиеРасходы

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Восстановление резерва (Дт 20 :: Кт 96)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	ПрочиеРасходы.СуммаРегл КАК Сумма,
	|	ПрочиеРасходы.СуммаУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	ПрочиеРасходы.СтатьяРасходов КАК АналитикаУчетаДт,
	|	ПрочиеРасходы.Подразделение КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ПрочиеРасходы.Подразделение КАК ПодразделениеДт,
	|	ПрочиеРасходы.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	ПрочиеРасходы.СтатьяРасходов КАК СубконтоДт1,
	|	ПрочиеРасходы.АналитикаРасходов КАК СубконтоДт2,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее) КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	ПрочиеРасходы.СуммаРегл - ПрочиеРасходы.ПостояннаяРазница - ПрочиеРасходы.ВременнаяРазница КАК СуммаНУДт,
	|	ПрочиеРасходы.ПостояннаяРазница КАК СуммаПРДт,
	|	ПрочиеРасходы.ВременнаяРазница КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеСписания КАК ПодразделениеКт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	ПрочиеРасходы.СуммаРегл - ПрочиеРасходы.ПостояннаяРазница - ПрочиеРасходы.ВременнаяРазница КАК СуммаНУКт,
	|	ПрочиеРасходы.ПостояннаяРазница КАК СуммаПРКт,
	|	ПрочиеРасходы.ВременнаяРазница КАК СуммаВРКт,
	|	""Восстановление резерва"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация В(ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРезервовПредстоящихРасходов), РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеПроцентовПоДисконтированию))
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаРегл <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаНУ <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ПрочиеРасходы КАК ПрочиеРасходы
	|	ПО 
	|		РезервыПредстоящихРасходов.Регистратор = ПрочиеРасходы.Регистратор
	|		И РезервыПредстоящихРасходов.ИдентификаторФинЗаписи = ПрочиеРасходы.ИдентификаторФинЗаписи
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = ПрочиеРасходы.ХозяйственнаяОперация
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти
	
#Область ТекстВосстановлениеРезерва_СтоимостьОС

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Восстановление резерва (Дт 01 :: Кт 96)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	СтоимостьОС.СтоимостьРегл КАК Сумма,
	|	СтоимостьОС.Стоимость КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.СтоимостьВНА) КАК ВидСчетаДт,
	|	СтоимостьОС.ГруппаФинансовогоУчета КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	СтоимостьОС.Подразделение КАК ПодразделениеДт,
	|	СтоимостьОС.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	СтоимостьОС.ОсновноеСредство КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	СтоимостьОС.СтоимостьНУ КАК СуммаНУДт,
	|	СтоимостьОС.СтоимостьПР КАК СуммаПРДт,
	|	СтоимостьОС.СтоимостьВР КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеСписания КАК ПодразделениеКт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	СтоимостьОС.СтоимостьНУ КАК СуммаНУКт,
	|	СтоимостьОС.СтоимостьПР КАК СуммаПРКт,
	|	СтоимостьОС.СтоимостьВР КАК СуммаВРКт,
	|	""Восстановление резерва"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация В(ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРезервовПредстоящихРасходов), РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеПроцентовПоДисконтированию))
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаРегл <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаНУ <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.СтоимостьОС КАК СтоимостьОС
	|	ПО 
	|		РезервыПредстоящихРасходов.Регистратор = СтоимостьОС.Регистратор
	|		И РезервыПредстоящихРасходов.ИдентификаторФинЗаписи = СтоимостьОС.ИдентификаторФинЗаписи
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = СтоимостьОС.ХозяйственнаяОперация
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти
	
#Область ТекстНачислениеПроцентовПоДисконтированию

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Начисление процентов по дисконтированию (Дт 96.Х :: Кт 96)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК Сумма,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПроцентыПоДисконтированиюРезервов) КАК ВидСчетаДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеДт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоДт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК СуммаВРКт,
	|	""Начисление процентов по дисконтированию"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеПроцентовПоДисконтированию)
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаДисконтированияУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаДисконтированияРегл <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти
	
#Область ТекстСписаниеПроцентовПоДисконтированию

	ТекстЗапроса = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ //// Списание процентов по дисконтированию (Дт 96 :: Кт 96.Х)
	|
	|	Операция.Ссылка КАК Ссылка, 
	|	Операция.Дата КАК Период,
	|	Операция.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК Сумма,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеДт,
	|	РезервыПредстоящихРасходов.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоДт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК СуммаВРДт,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПроцентыПоДисконтированиюРезервов) КАК ВидСчетаКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ОбъектыРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	ОбъектыРезервов.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	РезервыПредстоящихРасходов.ВидРезервов КАК СубконтоКт1,
	|	РезервыПредстоящихРасходов.ОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	РезервыПредстоящихРасходов.СуммаДисконтированияРегл КАК СуммаВРКт,
	|	""Списание процентов по дисконтированию"" КАК Содержание
	|
	|ИЗ 
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.РезервыПредстоящихРасходов КАК РезервыПредстоящихРасходов
	|	ПО
	|		РезервыПредстоящихРасходов.Регистратор = Операция.Ссылка
	|		И РезервыПредстоящихРасходов.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
	|		И РезервыПредстоящихРасходов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПроцентовПоДисконтированию)
	|		И НЕ РезервыПредстоящихРасходов.РасчетСебестоимости
	|		И (РезервыПредстоящихРасходов.СуммаДисконтированияУпр <> 0 ИЛИ РезервыПредстоящихРасходов.СуммаДисконтированияРегл <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.НачислениеСписаниеРезервовПредстоящихРасходов.Резервы КАК ОбъектыРезервов
	|	ПО
	|		ОбъектыРезервов.Ссылка = Операция.Ссылка
	|		И ОбъектыРезервов.ОбъектУчетаРезервов = РезервыПредстоящихРасходов.ОбъектУчетаРезервов
	|		И ОбъектыРезервов.ИдентификаторСтроки = РезервыПредстоящихРасходов.ИдентификаторФинЗаписи";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти

#Область СписаниеРасходовЗаСчетРезервов //(Дт 96 :: Кт 25, 26)
	ТекстЗапроса = "
	|ВЫБРАТЬ //// Списание расходов за счет резервов (основной вид деятельности расходов) (Дт 96 :: Кт 25, 26)
	|
	|	ДД.Регистратор КАК Ссылка,
	|	ДД.Период КАК Период,
	|	ДД.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	ДД.СуммаРегл КАК Сумма,
	|	ДД.СуммаУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаДт,
	|	ДД.КорВидРезервов КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ДД.КорОбъектУчетаРезервов.ПодразделениеНачисления КАК ПодразделениеДт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	ДД.КорВидРезервов КАК СубконтоДт1,
	|	ДД.КорОбъектУчетаРезервов КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	ДД.СуммаРегл - ДД.ПостояннаяРазница - ДД.ВременнаяРазница КАК СуммаНУДт,
	|	ДД.ПостояннаяРазница КАК СуммаПРДт,
	|	ДД.ВременнаяРазница КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаКт,
	|	ДД.СтатьяРасходов КАК АналитикаУчетаКт,
	|	ДД.Подразделение КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ДД.Подразделение КАК ПодразделениеКт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|
	|	ДД.СтатьяРасходов КАК СубконтоКт1,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее) КАК СубконтоКт2,
	|	ДД.АналитикаРасходов КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	ДД.СуммаРегл - ДД.ПостояннаяРазница - ДД.ВременнаяРазница КАК СуммаНУКт,
	|	ДД.ПостояннаяРазница КАК СуммаПРКт,
	|	ДД.ВременнаяРазница КАК СуммаВРКт,
	|	""Списание расходов за счет резервов"" КАК Содержание
	|
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.ПрочиеРасходы КАК ДД
	|		ПО ДокументыКОтражению.Ссылка = ДД.Регистратор
	|		И ДД.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРасходовЗаСчетРезервов)
	|		И (ДД.СуммаРегл <> 0 ИЛИ ДД.СуммаУпр <> 0 <> 0 ИЛИ ДД.ПостояннаяРазница <> 0 ИЛИ ДД.ВременнаяРазница <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиРасходов
	|		ПО ДД.СтатьяРасходов = СтатьиРасходов.Ссылка
	|ГДЕ
	|	СтатьиРасходов.ВидДеятельностиРасходов <> ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиРасходов.ПрочаяДеятельность)
	|";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти

#Область СписаниеРасходовЗаСчетРезервовПР //(Дт 91 :: Кт 96)
	ТекстЗапроса = "
	|ВЫБРАТЬ //// Списание расходов за счет резервов (основной вид деятельности расходов) ПР (Дт 91 :: Кт 96)
	|
	|	ДД.Регистратор КАК Ссылка,
	|	ДД.Период КАК Период,
	|	ДД.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.СписаниеРасходовОСНО) КАК ВидСчетаДт,
	|	ДД.СтатьяРасходов КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ДД.КорОбъектУчетаРезервов.ПодразделениеНачисления КАК ПодразделениеДт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	ДД.СтатьяРасходов КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	ДД.ПостояннаяРазница КАК СуммаПРДт,
	|	-ДД.ПостояннаяРазница КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	ДД.КорВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ДД.КорОбъектУчетаРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	ДД.КорВидРезервов КАК СубконтоКт1,
	|	ДД.КорОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	ДД.ПостояннаяРазница КАК СуммаПРКт,
	|	-ДД.ПостояннаяРазница КАК СуммаВРКт,
	|	""Списание расходов за счет резервов"" КАК Содержание
	|
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.ПрочиеРасходы КАК ДД
	|		ПО ДокументыКОтражению.Ссылка = ДД.Регистратор
	|		И ДД.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРасходовЗаСчетРезервов)
	|		И ДД.ПостояннаяРазница <> 0
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиРасходов
	|		ПО ДД.СтатьяРасходов = СтатьиРасходов.Ссылка
	|ГДЕ
	|	СтатьиРасходов.ВидДеятельностиРасходов <> ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиРасходов.ПрочаяДеятельность)
	|";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти

#Область СписаниеРасходовЗаСчетРезервов //(Дт 91 :: Кт 96)
	ТекстЗапроса = "
	|ВЫБРАТЬ //// Списание расходов за счет резервов (прочий вид деятельности расходов) (Дт 91 :: Кт 96)
	|
	|	ДД.Регистратор КАК Ссылка,
	|	ДД.Период КАК Период,
	|	ДД.Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК ИдентификаторСтроки,
	|
	|	-ДД.СуммаРегл КАК Сумма,
	|	-ДД.СуммаУпр КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	ДД.СтатьяРасходов КАК АналитикаУчетаДт,
	|	ДД.Подразделение КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	ДД.Подразделение КАК ПодразделениеДт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	ДД.СтатьяРасходов КАК СубконтоДт1,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее) КАК СубконтоДт2,
	|	ДД.АналитикаРасходов КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	-(ДД.СуммаРегл - ДД.ПостояннаяРазница - ДД.ВременнаяРазница) КАК СуммаНУДт,
	|	-ДД.ПостояннаяРазница КАК СуммаПРДт,
	|	-ДД.ВременнаяРазница КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Резервы) КАК ВидСчетаКт,
	|	ДД.КорВидРезервов КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	ДД.КорОбъектУчетаРезервов.ПодразделениеНачисления КАК ПодразделениеКт,
	|	ДД.НаправлениеДеятельности КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|
	|	ДД.КорВидРезервов КАК СубконтоКт1,
	|	ДД.КорОбъектУчетаРезервов КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	-(ДД.СуммаРегл - ДД.ПостояннаяРазница - ДД.ВременнаяРазница) КАК СуммаНУКт,
	|	-ДД.ПостояннаяРазница КАК СуммаПРКт,
	|	-ДД.ВременнаяРазница КАК СуммаВРКт,
	|	""Списание расходов за счет резервов"" КАК Содержание
	|
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.ПрочиеРасходы КАК ДД
	|		ПО ДокументыКОтражению.Ссылка = ДД.Регистратор
	|		И ДД.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеРасходовЗаСчетРезервов)
	|		И (ДД.СуммаРегл <> 0 ИЛИ ДД.СуммаУпр <> 0 <> 0 ИЛИ ДД.ПостояннаяРазница <> 0 ИЛИ ДД.ВременнаяРазница <> 0)
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиРасходов
	|		ПО ДД.СтатьяРасходов = СтатьиРасходов.Ссылка
	|ГДЕ
	|	СтатьиРасходов.ВидДеятельностиРасходов = ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиРасходов.ПрочаяДеятельность)
	|";
	ТекстыОтражения.Добавить(ТекстЗапроса);
	
#КонецОбласти

	ТекстЗапроса = СтрСоединить(ТекстыОтражения, ОбщегоНазначенияУТ.РазделительЗапросовВОбъединении());
	
	Возврат ТекстЗапроса;
	
	//-- Локализация
	
КонецФункции

// Функция возвращает текст запроса дополнительных временных таблиц,
// необходимых для отражения в регламентированном учете
//
// Возвращаемое значение:
//   Строка - сформированный текст запроса.
//
Функция ТекстЗапросаВТОтраженияВРеглУчете() Экспорт
	
	ТекстыЗапроса = Новый Массив;
	//++ Локализация
	
	//-- Локализация
	
	ТекстЗапроса = СтрСоединить(ТекстыЗапроса, ОбщегоНазначения.РазделительПакетаЗапросов());
	Возврат ТекстЗапроса;
	
КонецФункции

#КонецОбласти
//-- НЕ УТ

#Область Проведение

Процедура ТекстЗапросаТаблицаВтДанныеОсновныхСредств(ТекстЗапроса) Экспорт
	
	//++ Локализация
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	ПорядокУчетаОСБУ.ОсновноеСредство КАК ОсновноеСредство,
	|	ПорядокУчетаОСБУ.СостояниеБУ КАК СостояниеБУ,
	|	ПорядокУчетаОСБУ.НалогообложениеНДС КАК НалогообложениеНДС
	|ПОМЕСТИТЬ ВтПорядокУчетаОСБУ
	|ИЗ
	|	РегистрСведений.ПорядокУчетаОСБУ.СрезПоследних(&НачалоПериода, &ЭтоРезервыЛиквидационныхОбязательств И (ОсновноеСредство, Организация) В
	|			(ВЫБРАТЬ
	|				Т.АналитикаРасходов,
	|				&Организация
	|			ИЗ
	|				ВтНачисления КАК Т
	|
	|			ОБЪЕДИНИТЬ ВСЕ
	|
	|			ВЫБРАТЬ
	|				Т.АналитикаРасходов,
	|				&Организация
	|			ИЗ
	|				ВтСписания КАК Т)) КАК ПорядокУчетаОСБУ	
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	ОсновноеСредство";
	//-- Локализация
	
КонецПроцедуры

#КонецОбласти

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область Проведение

// Процедура дополняет тексты запросов проведения документа.
//
// Параметры:
//  Запрос - Запрос - Общий запрос проведения документа.
//  ТекстыЗапроса - СписокЗначений - Список текстов запроса проведения.
//  Регистры - Строка, Структура - Список регистров проведения документа через запятую или в ключах структуры.
//
Процедура ДополнитьТекстыЗапросовПроведения(Запрос, ТекстыЗапроса, Регистры) Экспорт
	
	//++ Локализация
	ТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(ТекстыЗапроса, Регистры);
	//-- Локализация
	
КонецПроцедуры

// Процедура дополняет тексты запросов проведения документа.
//
// Параметры:
//  ТекстыЗапроса - СписокЗначений - Список текстов запроса проведения.
//
Процедура ТаблицыОтложенногоФормированияДвижений(ТекстыЗапроса) Экспорт

	//++ Локализация
	ТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(ТекстыЗапроса);
	//-- Локализация
	
КонецПроцедуры

//++ Локализация
Функция ТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(ТекстыЗапроса, Регистры = Неопределено)
	
	ИмяРегистра = "ОтражениеДокументовВРеглУчете";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	&Период                      КАК Период,
	|	&Ссылка                      КАК Документ,
	|	&Организация                 КАК Организация,
	|	НАЧАЛОПЕРИОДА(&Период, ДЕНЬ) КАК ДатаОтражения";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции
//-- Локализация

#КонецОбласти

#КонецОбласти
