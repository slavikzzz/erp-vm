#Область СлужебныеПроцедурыИФункции

#Область ПараметрыРасчета

Функция СлужебныеНастройки() Экспорт
	
	Настройки = СтруктураЗаказа.СлужебныеНастройки();
	
	Возврат Настройки;
	
КонецФункции

Функция ПараметрыРасчета() Экспорт
	
	ПараметрыРасчета = СтруктураЗаказа.ПараметрыРасчета();
	
	Возврат ПараметрыРасчета;
	
КонецФункции

#КонецОбласти

#Область Метаданные

// Возвращает описание структуры регистра сведений
// 
// Параметры:
// 	ИмяРегистра - Строка - имя регистра сведений
// 	ИсключитьСлужебныеКолонки - Булево - исключить служебные колонки
// Возвращаемое значение:
// 	Структура - Описание:
// * Реквизиты - Массив -
// * РеквизитыСтрока - Строка -
// * Ресурсы - Массив -
// * РесурсыСтрока - Строка -
// * Измерения - Массив -
// * ИзмеренияСтрока - Строка -
Функция СтруктураМетаданныхРегистра(ИмяРегистра, ИсключитьСлужебныеКолонки = Истина) Экспорт
	
	МетаданныеРегистра = Метаданные.РегистрыСведений[ИмяРегистра];
	
	СтруктураМетаданных = Новый Структура();

	Колонки = МетаданныеРегистра.Измерения;

	МассивКолонок = Новый Массив();
	
	Для каждого Колонка Из Колонки Цикл
		Если ИсключитьСлужебныеКолонки
			И СтрНайти("Разделитель", Колонка.Имя) > 0 Тогда
			Продолжить;
		КонецЕсли;
		МассивКолонок.Добавить(Колонка.Имя);
	КонецЦикла;
	
	СтруктураМетаданных.Вставить("ИзмеренияСтрока", СтрСоединить(МассивКолонок, ","));
	СтруктураМетаданных.Вставить("Измерения", МассивКолонок);
	
	Колонки = МетаданныеРегистра.Ресурсы;
	
	МассивКолонок = Новый Массив();
	
	Для каждого Колонка Из Колонки Цикл
		МассивКолонок.Добавить(Колонка.Имя);
	КонецЦикла;
	
	СтруктураМетаданных.Вставить("РесурсыСтрока", СтрСоединить(МассивКолонок, ","));
	СтруктураМетаданных.Вставить("Ресурсы", МассивКолонок);
	
	Колонки = МетаданныеРегистра.Реквизиты;
	
	МассивКолонок = Новый Массив();
	
	Для каждого Колонка Из Колонки Цикл
		Если ИсключитьСлужебныеКолонки
			И СтрНайти("ДополнительнаяЗапись", Колонка.Имя) > 0 Тогда
			Продолжить;
		КонецЕсли;
		МассивКолонок.Добавить(Колонка.Имя);
	КонецЦикла;
	
	СтруктураМетаданных.Вставить("РеквизитыСтрока", СтрСоединить(МассивКолонок, ","));
	СтруктураМетаданных.Вставить("Реквизиты", МассивКолонок);
	
	Возврат СтруктураМетаданных;
	
КонецФункции

#КонецОбласти

#КонецОбласти