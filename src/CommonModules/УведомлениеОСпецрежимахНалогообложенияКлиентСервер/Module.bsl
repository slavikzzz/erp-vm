
#Область ПрограммныйИнтерфейс

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

#Область ЖурналыСправок

Процедура ПереименованиеСтраницЖурналаСправок(ДеревоСтраниц, УИДТекущаяСтраница, ДанныеМногостраничныхРазделов) Экспорт 
	Для Каждого Стр Из ДанныеМногостраничныхРазделов Цикл 
		ИмяСтраницыВДеревеЖурналаСправок(ДеревоСтраниц, Стр.Значение.УИД, ДанныеМногостраничныхРазделов, Стр.Значение);
	КонецЦикла;
КонецПроцедуры

Процедура ИмяСтраницыВДеревеЖурналаСправок(ДеревоСтраниц, УИДТекущаяСтраница, ДанныеМногостраничныхРазделов, Данные = Неопределено) Экспорт 
	СтрокаВдереве = Неопределено;
	Для Каждого Стр Из ДеревоСтраниц.ПолучитьЭлементы()[1].ПолучитьЭлементы() Цикл 
		Если Стр.УИД = УИДТекущаяСтраница Тогда 
			СтрокаВдереве = Стр;
			Прервать;
		КонецЕсли;
	КонецЦикла;
	
	Если Данные = Неопределено Тогда 
		Для Каждого Стр Из ДанныеМногостраничныхРазделов Цикл 
			Если Стр.Значение.УИД = УИДТекущаяСтраница Тогда 
				Данные = Стр.Значение;
				Прервать;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
	Если Данные <> Неопределено И СтрокаВдереве <> Неопределено Тогда 
		ФИО = СокрЛП("" + Данные.Фамилия + " " + Данные.Имя + " " + Данные.Отчество);
		Если СтрДлина(ФИО) > 29 Тогда 
			ФИО = СокрЛП("" + Данные.Фамилия + " " + Данные.Имя + Символы.ПС + Данные.Отчество);
		КонецЕсли;
		ФИО = ?(ЗначениеЗаполнено(ФИО), ФИО, "<Налогоплательщик не указан>");
		СтрокаВдереве.Наименование = ФИО;
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

Функция НайтиСтрокуВДеревеПоУИД(Дерево, UID) Экспорт 
	Для Каждого Элемент Из Дерево Цикл 
		Если Элемент.УИД = UID И Не ПустаяСтрока(Элемент.ИДНаименования) Тогда
			Возврат Элемент;
		КонецЕсли;
	
		НайденныйИД = НайтиСтрокуВДеревеПоУИД(Элемент.ПолучитьЭлементы(), UID);
		Если НайденныйИД <> Неопределено Тогда
			Возврат НайденныйИД;
		КонецЕсли;
	КонецЦикла;
	
	Возврат Неопределено;
КонецФункции

#КонецОбласти

