#Область ПрограммныйИнтерфейс

Процедура ОткрытьФормуНастройки(Организация, ФормаВладелец = Неопределено, Окно = Неопределено) Экспорт 
	
	Если ЗначениеЗаполнено(Организация) Тогда
		РеквизитыОрганизации = ЭлектронныйДокументооборотСКонтролирующимиОрганамиВызовСервера.ЗначенияРеквизитовОбъекта(
			Организация, "ВидОбменаСКонтролирующимиОрганами, УчетнаяЗаписьОбмена");
		
		Если РеквизитыОрганизации.ВидОбменаСКонтролирующимиОрганами =
			ПредопределенноеЗначение("Перечисление.ВидыОбменаСКонтролирующимиОрганами.ОбменВУниверсальномФормате")
			И ЗначениеЗаполнено(РеквизитыОрганизации.УчетнаяЗаписьОбмена) Тогда
			
			ПоказатьЗначение(, РеквизитыОрганизации.УчетнаяЗаписьОбмена);
			
		Иначе
			ЗначенияЗаполнения = Новый Структура;
			ЗначенияЗаполнения.Вставить("Организация", Организация);
			ЗначенияЗаполнения.Вставить("ВидОбменаСКонтролирующимиОрганами",
				РеквизитыОрганизации.ВидОбменаСКонтролирующимиОрганами);
			ЗначенияЗаполнения.Вставить("УчетнаяЗаписьОбмена", РеквизитыОрганизации.УчетнаяЗаписьОбмена);
			
			// Форма элемента
			ОткрытьФорму(
				"Обработка.ДокументооборотСКонтролирующимиОрганами.Форма.ФормаНастройкиДокументооборотаОрганизации",
				Новый Структура("ЗначенияЗаполнения", ЗначенияЗаполнения),
				ФормаВладелец);
		КонецЕсли;
		
	Иначе
		ПараметрыОткрытия = Новый Структура;
		ПараметрыОткрытия.Вставить("ВидНастроек", ПредопределенноеЗначение("Перечисление.ТипыКонтролирующихОрганов.ЦБ"));
		ОткрытьФорму(
			"Обработка.ДокументооборотСКонтролирующимиОрганами.Форма.ФормаНастроекДокументооборотаОрганизаций", 
			ПараметрыОткрытия,,
			Новый УникальныйИдентификатор,
			Окно);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#КонецОбласти
