
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ВидПериода = ПредопределенноеЗначение("Перечисление.ДоступныеПериодыОтчета.Год");
	ПериодПредставление = Формат(Запись.Период, "ДФ=yyyy");
	ОбработатьЗаголовокСуммы()
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура ОрганизацияПриИзменении(Элемент)
	ОбработатьЗаголовокСуммы();
КонецПроцедуры

&НаКлиенте
Процедура ПериодНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	ОписаниеОповещения = Новый ОписаниеОповещения("ПериодНачалоВыбораЗавершение", ЭтотОбъект);
	
	ОбщегоНазначенияУТКлиент.ВыбратьПериодИзСписка(
				ЭтаФорма,
				Элемент,
				ВидПериода,
				Запись.Период,
				ОписаниеОповещения);
КонецПроцедуры


&НаКлиенте
Процедура ПериодНачалоВыбораЗавершение(ВыбранныйПериод, ДополнительныеПараметры) Экспорт

	Если ВыбранныйПериод <> Неопределено Тогда
		
		ПериодПредставление = ВыбранныйПериод.Представление;
		
		Запись.Период = ВыбранныйПериод.Значение;
		
	КонецЕсли; 
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ОбработатьЗаголовокСуммы()
	
	Если ЗначениеЗаполнено(Запись.Организация) Тогда
		ВалютаРегл = ЗначениеНастроекПовтИсп.ВалютаРегламентированногоУчетаОрганизации(Запись.Организация);
		Элементы.Сумма.Заголовок = СтрШаблон(НСтр("ru = 'Сумма (%1)';
													|en = 'Amount (%1)'"), Строка(ВалютаРегл));
	Иначе
		Элементы.Сумма.Заголовок = СтрШаблон(НСтр("ru = 'Сумма';
													|en = 'Amount'"));
	КонецЕсли;

КонецПроцедуры

#КонецОбласти