
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Не ТипЗнч(Параметры.ВыбранныеТоварныеГруппы) = Тип("Массив") Тогда
		Возврат;
	КонецЕсли;
	
	ВыбранныеТоварныеГруппы.ЗагрузитьЗначения(Параметры.ВыбранныеТоварныеГруппы);
	
	ЗаполнитьСписокТоварныхГруппСУчетомВыбранных();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)
	
	МассивВыбранныхТГ = Новый Массив;
	
	Для Каждого ТоварнаяГруппа Из СписокТоварныхГрупп Цикл
		
		Если Не ТоварнаяГруппа.Пометка Тогда
			Продолжить;
		КонецЕсли;
		
		МассивВыбранныхТГ.Добавить(ТоварнаяГруппа.Значение);
		
	КонецЦикла;
	
	Закрыть(МассивВыбранныхТГ);
	
КонецПроцедуры

&НаКлиенте
Процедура ВыбратьВсе(Команда)
	
	Для Каждого СтрокаТоварныхГрупп Из СписокТоварныхГрупп Цикл
		
		СтрокаТоварныхГрупп.Пометка = Истина;
		
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура СнятьВсе(Команда)
	
	Для Каждого СтрокаТоварныхГрупп Из СписокТоварныхГрупп Цикл
		
		СтрокаТоварныхГрупп.Пометка = Ложь;
		
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаполнитьСписокТоварныхГруппСУчетомВыбранных()
	
	СписокТоварныхГрупп.Очистить();
	ТоварныеГруппыПроверки = ОбщегоНазначенияИСМПВызовСервера.СписокУчитываемойПродукцииТребующейОбязательнойОнлайнПроверкиПриПродажеВРозницуНаДату();
	
	Для Каждого ТоварнаяГруппа Из ТоварныеГруппыПроверки Цикл
		
		СписокТоварныхГрупп.Добавить(ТоварнаяГруппа, Строка(ТоварнаяГруппа), ВыбранныеТоварныеГруппы.НайтиПоЗначению(ТоварнаяГруппа) <> Неопределено);
		
	КонецЦикла;
	
	СписокТоварныхГрупп.СортироватьПоПредставлению();
	
КонецПроцедуры

#КонецОбласти