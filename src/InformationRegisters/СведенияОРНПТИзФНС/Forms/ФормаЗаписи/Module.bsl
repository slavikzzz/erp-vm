
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ЗначениеЗаполнено(Параметры.РНПТ) Тогда
		ТекущаяЗапись = РегистрыСведений.СведенияОРНПТИзФНС.СоздатьМенеджерЗаписи();
		ТекущаяЗапись.РНПТ = Параметры.РНПТ;
		ТекущаяЗапись.Прочитать();
		
		// Для РНПТ записей в регистре еще нет
		Если Не ТекущаяЗапись.Выбран() Тогда
			ТекущаяЗапись.РНПТ = Параметры.РНПТ;
		КонецЕсли;
		
		ЗначениеВРеквизитФормы(ТекущаяЗапись, "Запись");
		
	КонецЕсли;
	
	Если Запись.ОшибкаПроверкиРНПТ Тогда
		Элементы.ГруппаПолученныеСведения.Скрыть();
	КонецЕсли;
	
	УправлениеФормой(ЭтотОбъект);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура ОшибкаПроверкиРНПТПриИзменении(Элемент)
	
	Если НЕ Запись.ОшибкаПроверкиРНПТ Тогда
		Запись.ОписаниеОшибки = "";
	КонецЕсли;
	
	УправлениеФормой(ЭтотОбъект);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиентеНаСервереБезКонтекста
Процедура УправлениеФормой(Форма)
	
	Элементы = Форма.Элементы;
	Элементы.ОписаниеОшибки.Видимость = Форма.Запись.ОшибкаПроверкиРНПТ;
	
КонецПроцедуры

#КонецОбласти
