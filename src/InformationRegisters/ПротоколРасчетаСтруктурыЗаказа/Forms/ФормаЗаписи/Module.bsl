
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УстановитьУсловноеОформление();
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("ИдентификаторОшибки", Запись.ИдентификаторОшибки);
	Запрос.Текст = "
	|ВЫБРАТЬ
	|	Ошибки.Протокол КАК Протокол
	|ИЗ
	|	РегистрСведений.ПротоколРасчетаСтруктурыЗаказа КАК Ошибки
	|ГДЕ
	|	Ошибки.ИдентификаторОшибки = &ИдентификаторОшибки
	|";
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	СтруктураИзХранилища = Неопределено;
	
	Если Выборка.Следующий() Тогда
		ХранилищеПротокола = Выборка.Протокол; //ХранилищеЗначения
		СтруктураИзХранилища = ХранилищеПротокола.Получить();
	КонецЕсли;
	
	Если ТипЗнч(СтруктураИзХранилища) = Тип("Структура") Тогда
		
		СтруктураПротокола = РегистрыСведений.ПротоколРасчетаСтруктурыЗаказа.ПротоколМакет();
		ЗаполнитьЗначенияСвойств(СтруктураПротокола, СтруктураИзХранилища);
		ТекстСообщения = СтруктураПротокола.ТекстСообщения;
	
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УстановитьУсловноеОформление()
	
	УсловноеОформление.Элементы.Очистить();
	
КонецПроцедуры

#КонецОбласти
