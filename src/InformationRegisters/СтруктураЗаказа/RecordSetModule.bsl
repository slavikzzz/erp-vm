#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	ПустойЭтап = Справочники.ЭтапыПроизводства.ПустаяСсылка();
	
	Для каждого Строка Из ЭтотОбъект Цикл
		Строка.Этап = ?(ЗначениеЗаполнено(Строка.Этап), Строка.Этап, ПустойЭтап);
	КонецЦикла;
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Не Замещение Тогда
		РегистрыСведений.ЗаданияКСверткеСторноЗаписейВГрафикеПроизводства.ДобавитьЗадания(ЭтотОбъект, "КлючНабор");
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
