#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, Замещение)
	
	Если ЗарплатаКадры.ОтключитьБизнесЛогикуПриЗаписи(ЭтотОбъект) Тогда
		Возврат;
	КонецЕсли;
	
	// 1. Записывается набор записей (движения документа).
	// 2. Он сравнивается с предыдущим набором (предыдущими движениями).
	// 3. Те записи из предыдущего набора, которых нет в новом, и которые участвовали в обмене
	//    с ПФР (МероприятияТрудовойДеятельностиПереданные) - записываются в регистр МероприятияТрудовойДеятельностиПрочие.
	// 4. Для записей нового набора, у которых не назначен идентификатор мероприятия, ищутся полные
	//    аналоги в регистре сведений МероприятияТрудовойДеятельностиПрочие.
	// 5. Для записей, не имеющих идентификатора мероприятия, ищется аналог из предыдущих движений,
	//    если находится, то используется идентификатор из предыдущих движений.
	// 6. Если в предыдущих движениях не нашлось аналога - ищется аналог из числа найденных
	//    в МероприятияТрудовойДеятельностиПрочие, если находится, то используется идентификатор записи
	//    из Прочих, а сама запись в прочих удаляется.
	// 7. Если идентификатор так и не удалось заполнить, то назначается новый.

	Запрос = Новый Запрос;
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	
	Запрос.УстановитьПараметр("НовыйНабор", Выгрузить());
	Запрос.УстановитьПараметр("Регистратор", Отбор.Регистратор.Значение);
	Запрос.УстановитьПараметр("ДатаОтмены", ТекущаяДатаСеанса());
	Запрос.УстановитьПараметр("ПустойИдентификатор", Новый УникальныйИдентификатор("00000000-0000-0000-0000-000000000000"));
	Запрос.УстановитьПараметр("ДатаПостановленияЕФС1_2023", ПерсонифицированныйУчетКлиентСервер.ДатаПостановленияЕФС1_2023());
	
	УчетСтраховыхВзносов.ВременнаяТаблицаОтчитывающихсяПоВзносамОрганизаций(Запрос.МенеджерВременныхТаблиц,
		ОбщегоНазначенияКлиентСервер.ЗначениеВМассиве(Отбор.Регистратор.Значение));
	
	Запрос.Текст =
		"ВЫБРАТЬ
		|	Мероприятия.ФизическоеЛицо КАК ФизическоеЛицо,
		|	Мероприятия.Организация КАК Организация,
		|	Мероприятия.ИдМероприятия КАК ИдМероприятия,
		|	Мероприятия.Отменено КАК Отменено,
		|	Мероприятия.Сотрудник КАК Сотрудник,
		|	Мероприятия.ДатаМероприятия КАК ДатаМероприятия,
		|	Мероприятия.ВидМероприятия КАК ВидМероприятия,
		|	Мероприятия.Сведения КАК Сведения,
		|	Мероприятия.Подразделение КАК Подразделение,
		|	Мероприятия.Должность КАК Должность,
		|	Мероприятия.РазрядКатегория КАК РазрядКатегория,
		|	Мероприятия.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
		|	Мероприятия.ТрудоваяФункция КАК ТрудоваяФункция,
		|	Мероприятия.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
		|	Мероприятия.ДатаДокументаОснования КАК ДатаДокументаОснования,
		|	Мероприятия.СерияДокументаОснования КАК СерияДокументаОснования,
		|	Мероприятия.НомерДокументаОснования КАК НомерДокументаОснования,
		|	Мероприятия.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
		|	Мероприятия.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
		|	Мероприятия.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
		|	Мероприятия.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
		|	ВЫБОР
		|		КОГДА Мероприятия.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольнения.ПустаяСсылка)
		|			ТОГДА НЕОПРЕДЕЛЕНО
		|		КОГДА Мероприятия.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольненияПользовательские.ПустаяСсылка)
		|			ТОГДА НЕОПРЕДЕЛЕНО
		|		ИНАЧЕ Мероприятия.ОснованиеУвольнения
		|	КОНЕЦ КАК ОснованиеУвольнения,
		|	Мероприятия.ДатаС КАК ДатаС,
		|	Мероприятия.ДатаПо КАК ДатаПо,
		|	Мероприятия.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
		|	Мероприятия.ДатаОтмены КАК ДатаОтмены,
		|	Мероприятия.ПредставлениеДолжности КАК ПредставлениеДолжности,
		|	Мероприятия.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
		|	Мероприятия.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
		|	Мероприятия.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
		|	Мероприятия.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
		|	Мероприятия.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
		|	Мероприятия.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
		|	Мероприятия.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
		|	Мероприятия.КодПоОКЗ КАК КодПоОКЗ,
		|	Мероприятия.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
		|	Мероприятия.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
		|	Мероприятия.ОписаниеДолжности КАК ОписаниеДолжности,
		|	Мероприятия.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
		|	Мероприятия.УдаленностьРаботы КАК УдаленностьРаботы,
		|	Мероприятия.СокращенностьГрафика КАК СокращенностьГрафика
		|ПОМЕСТИТЬ ВТТекущийНабор
		|ИЗ
		|	РегистрСведений.МероприятияТрудовойДеятельности КАК Мероприятия
		|ГДЕ
		|	Мероприятия.Регистратор = &Регистратор
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	Мероприятия.ФизическоеЛицо КАК ФизическоеЛицо,
		|	Мероприятия.Организация КАК Организация,
		|	Мероприятия.ИдМероприятия КАК ИдМероприятия,
		|	Мероприятия.Отменено КАК Отменено,
		|	Мероприятия.Сотрудник КАК Сотрудник,
		|	Мероприятия.ДатаМероприятия КАК ДатаМероприятия,
		|	Мероприятия.ВидМероприятия КАК ВидМероприятия,
		|	Мероприятия.Сведения КАК Сведения,
		|	Мероприятия.Подразделение КАК Подразделение,
		|	Мероприятия.Должность КАК Должность,
		|	Мероприятия.РазрядКатегория КАК РазрядКатегория,
		|	Мероприятия.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
		|	Мероприятия.ТрудоваяФункция КАК ТрудоваяФункция,
		|	Мероприятия.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
		|	Мероприятия.ДатаДокументаОснования КАК ДатаДокументаОснования,
		|	Мероприятия.СерияДокументаОснования КАК СерияДокументаОснования,
		|	Мероприятия.НомерДокументаОснования КАК НомерДокументаОснования,
		|	Мероприятия.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
		|	Мероприятия.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
		|	Мероприятия.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
		|	Мероприятия.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
		|	Мероприятия.ОснованиеУвольнения КАК ОснованиеУвольнения,
		|	Мероприятия.ДатаС КАК ДатаС,
		|	Мероприятия.ДатаПо КАК ДатаПо,
		|	Мероприятия.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
		|	Мероприятия.ДатаОтмены КАК ДатаОтмены,
		|	Мероприятия.ПредставлениеДолжности КАК ПредставлениеДолжности,
		|	Мероприятия.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
		|	Мероприятия.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
		|	Мероприятия.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
		|	Мероприятия.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
		|	Мероприятия.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
		|	Мероприятия.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
		|	Мероприятия.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
		|	Мероприятия.КодПоОКЗ КАК КодПоОКЗ,
		|	Мероприятия.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
		|	Мероприятия.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
		|	Мероприятия.ОписаниеДолжности КАК ОписаниеДолжности,
		|	Мероприятия.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
		|	Мероприятия.УдаленностьРаботы КАК УдаленностьРаботы,
		|	Мероприятия.СокращенностьГрафика КАК СокращенностьГрафика
		|ПОМЕСТИТЬ ВТНовыйНабор
		|ИЗ
		|	&НовыйНабор КАК Мероприятия
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ ПЕРВЫЕ 1
		|	ТекущийНабор.ИдМероприятия КАК ИдМероприятия
		|ИЗ
		|	ВТТекущийНабор КАК ТекущийНабор";
	
	РезультатЗапроса = Запрос.Выполнить();
	Если Не РезультатЗапроса.Пустой() Тогда
		
		Запрос.Текст =
			"ВЫБРАТЬ РАЗЛИЧНЫЕ
			|	ТекущийНабор.ФизическоеЛицо КАК ФизическоеЛицо,
			|	ТекущийНабор.Организация КАК Организация,
			|	ТекущийНабор.ИдМероприятия КАК ИдМероприятия,
			|	ТекущийНабор.Отменено КАК Отменено,
			|	ТекущийНабор.Сотрудник КАК Сотрудник,
			|	ТекущийНабор.ДатаМероприятия КАК ДатаМероприятия,
			|	ТекущийНабор.ВидМероприятия КАК ВидМероприятия,
			|	ТекущийНабор.Сведения КАК Сведения,
			|	ТекущийНабор.Подразделение КАК Подразделение,
			|	ТекущийНабор.Должность КАК Должность,
			|	ТекущийНабор.РазрядКатегория КАК РазрядКатегория,
			|	ТекущийНабор.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
			|	ТекущийНабор.ТрудоваяФункция КАК ТрудоваяФункция,
			|	ТекущийНабор.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
			|	ТекущийНабор.ДатаДокументаОснования КАК ДатаДокументаОснования,
			|	ТекущийНабор.СерияДокументаОснования КАК СерияДокументаОснования,
			|	ТекущийНабор.НомерДокументаОснования КАК НомерДокументаОснования,
			|	ТекущийНабор.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
			|	ТекущийНабор.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
			|	ТекущийНабор.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
			|	ТекущийНабор.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
			|	ТекущийНабор.ОснованиеУвольнения КАК ОснованиеУвольнения,
			|	ТекущийНабор.ДатаС КАК ДатаС,
			|	ТекущийНабор.ДатаПо КАК ДатаПо,
			|	ТекущийНабор.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
			|	ТекущийНабор.ДатаОтмены КАК ДатаОтмены,
			|	ТекущийНабор.ПредставлениеДолжности КАК ПредставлениеДолжности,
			|	ТекущийНабор.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
			|	ТекущийНабор.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
			|	ТекущийНабор.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
			|	ТекущийНабор.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
			|	ТекущийНабор.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
			|	ТекущийНабор.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
			|	ТекущийНабор.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
			|	ТекущийНабор.КодПоОКЗ КАК КодПоОКЗ,
			|	ТекущийНабор.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
			|	ТекущийНабор.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
			|	ТекущийНабор.ОписаниеДолжности КАК ОписаниеДолжности,
			|	ТекущийНабор.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
			|	ТекущийНабор.УдаленностьРаботы КАК УдаленностьРаботы,
			|	ТекущийНабор.СокращенностьГрафика КАК СокращенностьГрафика,
			|	ВЫБОР
			|		КОГДА НовыйНабор.ФизическоеЛицо ЕСТЬ NULL
			|			ТОГДА ИСТИНА
			|		ИНАЧЕ ЛОЖЬ
			|	КОНЕЦ КАК УдаляемоеДвижение
			|ПОМЕСТИТЬ ВТИзменения
			|ИЗ
			|	ВТТекущийНабор КАК ТекущийНабор
			|		ЛЕВОЕ СОЕДИНЕНИЕ ВТНовыйНабор КАК НовыйНабор
			|		ПО ТекущийНабор.ФизическоеЛицо = НовыйНабор.ФизическоеЛицо
			|			И ТекущийНабор.Организация = НовыйНабор.Организация
			|			И ТекущийНабор.Сотрудник = НовыйНабор.Сотрудник
			|			И ТекущийНабор.ДатаМероприятия = НовыйНабор.ДатаМероприятия
			|			И ТекущийНабор.ВидМероприятия = НовыйНабор.ВидМероприятия
			|			И ТекущийНабор.Сведения = НовыйНабор.Сведения
			|			И ТекущийНабор.Подразделение = НовыйНабор.Подразделение
			|			И ТекущийНабор.Должность = НовыйНабор.Должность
			|			И ТекущийНабор.РазрядКатегория = НовыйНабор.РазрядКатегория
			|			И ТекущийНабор.КодПоРееструДолжностей = НовыйНабор.КодПоРееструДолжностей
			|			И ТекущийНабор.ТрудоваяФункция = НовыйНабор.ТрудоваяФункция
			|			И (ВЫБОР
			|				КОГДА ТекущийНабор.НаименованиеДокументаОснования = """"
			|					ТОГДА ИСТИНА
			|				КОГДА НовыйНабор.НаименованиеДокументаОснования = """"
			|					ТОГДА ИСТИНА
			|				КОГДА ТекущийНабор.НаименованиеДокументаОснования = НовыйНабор.НаименованиеДокументаОснования
			|					ТОГДА ИСТИНА
			|				ИНАЧЕ ЛОЖЬ
			|			КОНЕЦ)
			|			И ТекущийНабор.ДатаДокументаОснования = НовыйНабор.ДатаДокументаОснования
			|			И ТекущийНабор.СерияДокументаОснования = НовыйНабор.СерияДокументаОснования
			|			И ТекущийНабор.НомерДокументаОснования = НовыйНабор.НомерДокументаОснования
			|			И ТекущийНабор.НаименованиеВторогоДокументаОснования = НовыйНабор.НаименованиеВторогоДокументаОснования
			|			И ТекущийНабор.ДатаВторогоДокументаОснования = НовыйНабор.ДатаВторогоДокументаОснования
			|			И ТекущийНабор.СерияВторогоДокументаОснования = НовыйНабор.СерияВторогоДокументаОснования
			|			И ТекущийНабор.НомерВторогоДокументаОснования = НовыйНабор.НомерВторогоДокументаОснования
			|			И (ТекущийНабор.ОснованиеУвольнения = ВЫБОР
			|				КОГДА НовыйНабор.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольнения.ПустаяСсылка)
			|					ТОГДА НЕОПРЕДЕЛЕНО
			|				КОГДА НовыйНабор.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольненияПользовательские.ПустаяСсылка)
			|					ТОГДА НЕОПРЕДЕЛЕНО
			|				ИНАЧЕ НовыйНабор.ОснованиеУвольнения
			|			КОНЕЦ)
			|			И ТекущийНабор.ДатаС = НовыйНабор.ДатаС
			|			И ТекущийНабор.ДатаПо = НовыйНабор.ДатаПо
			|			И ТекущийНабор.ЯвляетсяСовместителем = НовыйНабор.ЯвляетсяСовместителем
			|			И ТекущийНабор.ДатаОтмены = НовыйНабор.ДатаОтмены
			|			И ТекущийНабор.ПредставлениеДолжности = НовыйНабор.ПредставлениеДолжности
			|			И ТекущийНабор.ПредставлениеПодразделения = НовыйНабор.ПредставлениеПодразделения
			|			И ТекущийНабор.ОснованиеУвольненияТекстОснования = НовыйНабор.ОснованиеУвольненияТекстОснования
			|			И ТекущийНабор.ОснованиеУвольненияСтатья = НовыйНабор.ОснованиеУвольненияСтатья
			|			И ТекущийНабор.ОснованиеУвольненияЧасть = НовыйНабор.ОснованиеУвольненияЧасть
			|			И ТекущийНабор.ОснованиеУвольненияПункт = НовыйНабор.ОснованиеУвольненияПункт
			|			И ТекущийНабор.ОснованиеУвольненияПодпункт = НовыйНабор.ОснованиеУвольненияПодпункт
			|			И ТекущийНабор.ОснованиеУвольненияАбзац = НовыйНабор.ОснованиеУвольненияАбзац
			|			И (ВЫБОР
			|				КОГДА ТекущийНабор.ДатаМероприятия < ДАТАВРЕМЯ(2021, 7, 1)
			|					ТОГДА ИСТИНА
			|				КОГДА ТекущийНабор.ВидМероприятия = ЗНАЧЕНИЕ(Перечисление.ВидыМероприятийТрудовойДеятельности.Увольнение)
			|					ТОГДА ИСТИНА
			|				КОГДА ТекущийНабор.КодПоОКЗ = НовыйНабор.КодПоОКЗ
			|					ТОГДА ИСТИНА
			|				ИНАЧЕ ЛОЖЬ
			|			КОНЕЦ)
			|			И (ВЫБОР
			|				КОГДА ТекущийНабор.ДатаМероприятия < ДАТАВРЕМЯ(2021, 7, 1)
			|					ТОГДА ИСТИНА
			|				КОГДА ТекущийНабор.ТерриториальныеУсловия = НовыйНабор.ТерриториальныеУсловия
			|					ТОГДА ИСТИНА
			|				ИНАЧЕ ЛОЖЬ
			|			КОНЕЦ)
			|			И ТекущийНабор.ОписаниеДолжности = НовыйНабор.ОписаниеДолжности
			|			И (ТекущийНабор.ДатаМероприятия < &ДатаПостановленияЕФС1_2023
			|				ИЛИ ТекущийНабор.СрочностьТрудовогоДоговора = НовыйНабор.СрочностьТрудовогоДоговора
			|					И ТекущийНабор.УдаленностьРаботы = НовыйНабор.УдаленностьРаботы
			|					И ТекущийНабор.СокращенностьГрафика = НовыйНабор.СокращенностьГрафика)
			|;
			|
			|////////////////////////////////////////////////////////////////////////////////
			|ВЫБРАТЬ
			|	Изменения.ФизическоеЛицо КАК ФизическоеЛицо,
			|	Изменения.Организация КАК Организация,
			|	Изменения.ИдМероприятия КАК ИдМероприятия,
			|	Изменения.Сотрудник КАК Сотрудник,
			|	Изменения.ДатаМероприятия КАК ДатаМероприятия,
			|	Изменения.ВидМероприятия КАК ВидМероприятия,
			|	Изменения.Сведения КАК Сведения,
			|	Изменения.Подразделение КАК Подразделение,
			|	Изменения.Должность КАК Должность,
			|	Изменения.РазрядКатегория КАК РазрядКатегория,
			|	Изменения.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
			|	Изменения.ТрудоваяФункция КАК ТрудоваяФункция,
			|	Изменения.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
			|	Изменения.ДатаДокументаОснования КАК ДатаДокументаОснования,
			|	Изменения.СерияДокументаОснования КАК СерияДокументаОснования,
			|	Изменения.НомерДокументаОснования КАК НомерДокументаОснования,
			|	Изменения.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
			|	Изменения.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
			|	Изменения.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
			|	Изменения.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
			|	Изменения.ОснованиеУвольнения КАК ОснованиеУвольнения,
			|	Изменения.ДатаС КАК ДатаС,
			|	Изменения.ДатаПо КАК ДатаПо,
			|	Изменения.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
			|	Изменения.ДатаОтмены КАК ДатаОтменыПереданного,
			|	Изменения.ПредставлениеДолжности КАК ПредставлениеДолжности,
			|	Изменения.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
			|	Изменения.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
			|	Изменения.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
			|	Изменения.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
			|	Изменения.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
			|	Изменения.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
			|	Изменения.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
			|	Изменения.КодПоОКЗ КАК КодПоОКЗ,
			|	Изменения.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
			|	Изменения.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
			|	Изменения.ОписаниеДолжности КАК ОписаниеДолжности,
			|	Изменения.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
			|	Изменения.УдаленностьРаботы КАК УдаленностьРаботы,
			|	Изменения.СокращенностьГрафика КАК СокращенностьГрафика,
			|	ВЫБОР
			|		КОГДА Изменения.ДатаОтмены = ДАТАВРЕМЯ(1, 1, 1)
			|			ТОГДА &ДатаОтмены
			|		ИНАЧЕ Изменения.ДатаОтмены
			|	КОНЕЦ КАК ДатаОтмены,
			|	Изменения.Отменено КАК Отменено
			|ПОМЕСТИТЬ ВТУдаляемыеПереданные
			|ИЗ
			|	ВТИзменения КАК Изменения
			|		ЛЕВОЕ СОЕДИНЕНИЕ ВТОтчитывающиесяОрганизации КАК ОтчитывающиесяОрганизации
			|		ПО Изменения.Организация = ОтчитывающиесяОрганизации.Организация
			|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.МероприятияТрудовойДеятельностиПереданные КАК МероприятияПереданные
			|		ПО (МероприятияПереданные.Организация В (ОтчитывающиесяОрганизации.ОтчитывающаясяПоВзносамОрганизация, Изменения.Организация))
			|			И Изменения.ИдМероприятия = МероприятияПереданные.ИдМероприятия
			|			И Изменения.Отменено = МероприятияПереданные.Отменено
			|ГДЕ
			|	Изменения.УдаляемоеДвижение
			|	И НЕ МероприятияПереданные.ИдМероприятия ЕСТЬ NULL
			|;
			|
			|////////////////////////////////////////////////////////////////////////////////
			|ВЫБРАТЬ
			|	Изменения.ФизическоеЛицо КАК ФизическоеЛицо,
			|	Изменения.Организация КАК Организация,
			|	Изменения.ИдМероприятия КАК ИдМероприятия,
			|	Изменения.Сотрудник КАК Сотрудник,
			|	Изменения.ДатаМероприятия КАК ДатаМероприятия,
			|	Изменения.ВидМероприятия КАК ВидМероприятия,
			|	Изменения.Сведения КАК Сведения,
			|	Изменения.Подразделение КАК Подразделение,
			|	Изменения.Должность КАК Должность,
			|	Изменения.РазрядКатегория КАК РазрядКатегория,
			|	Изменения.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
			|	Изменения.ТрудоваяФункция КАК ТрудоваяФункция,
			|	Изменения.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
			|	Изменения.ДатаДокументаОснования КАК ДатаДокументаОснования,
			|	Изменения.СерияДокументаОснования КАК СерияДокументаОснования,
			|	Изменения.НомерДокументаОснования КАК НомерДокументаОснования,
			|	Изменения.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
			|	Изменения.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
			|	Изменения.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
			|	Изменения.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
			|	Изменения.ОснованиеУвольнения КАК ОснованиеУвольнения,
			|	Изменения.ДатаС КАК ДатаС,
			|	Изменения.ДатаПо КАК ДатаПо,
			|	Изменения.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
			|	Изменения.ДатаОтмены КАК ДатаОтмены,
			|	Изменения.ПредставлениеДолжности КАК ПредставлениеДолжности,
			|	Изменения.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
			|	Изменения.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
			|	Изменения.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
			|	Изменения.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
			|	Изменения.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
			|	Изменения.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
			|	Изменения.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
			|	Изменения.КодПоОКЗ КАК КодПоОКЗ,
			|	Изменения.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
			|	Изменения.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
			|	Изменения.ОписаниеДолжности КАК ОписаниеДолжности,
			|	Изменения.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
			|	Изменения.УдаленностьРаботы КАК УдаленностьРаботы,
			|	Изменения.СокращенностьГрафика КАК СокращенностьГрафика,
			|	ИСТИНА КАК Отменено
			|ИЗ
			|	ВТУдаляемыеПереданные КАК Изменения
			|;
			|
			|////////////////////////////////////////////////////////////////////////////////
			|ВЫБРАТЬ
			|	Изменения.ФизическоеЛицо КАК ФизическоеЛицо,
			|	Изменения.Организация КАК Организация,
			|	Изменения.ИдМероприятия КАК ИдМероприятия,
			|	Изменения.Отменено КАК Отменено,
			|	Изменения.Сотрудник КАК Сотрудник,
			|	Изменения.ДатаМероприятия КАК ДатаМероприятия,
			|	Изменения.ВидМероприятия КАК ВидМероприятия,
			|	Изменения.Сведения КАК Сведения,
			|	Изменения.Подразделение КАК Подразделение,
			|	Изменения.Должность КАК Должность,
			|	Изменения.РазрядКатегория КАК РазрядКатегория,
			|	Изменения.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
			|	Изменения.ТрудоваяФункция КАК ТрудоваяФункция,
			|	Изменения.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
			|	Изменения.ДатаДокументаОснования КАК ДатаДокументаОснования,
			|	Изменения.СерияДокументаОснования КАК СерияДокументаОснования,
			|	Изменения.НомерДокументаОснования КАК НомерДокументаОснования,
			|	Изменения.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
			|	Изменения.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
			|	Изменения.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
			|	Изменения.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
			|	Изменения.ОснованиеУвольнения КАК ОснованиеУвольнения,
			|	Изменения.ДатаС КАК ДатаС,
			|	Изменения.ДатаПо КАК ДатаПо,
			|	Изменения.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
			|	Изменения.ДатаОтмены КАК ДатаОтмены,
			|	Изменения.ПредставлениеДолжности КАК ПредставлениеДолжности,
			|	Изменения.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
			|	Изменения.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
			|	Изменения.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
			|	Изменения.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
			|	Изменения.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
			|	Изменения.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
			|	Изменения.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
			|	Изменения.КодПоОКЗ КАК КодПоОКЗ,
			|	Изменения.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
			|	Изменения.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
			|	Изменения.ОписаниеДолжности КАК ОписаниеДолжности,
			|	Изменения.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
			|	Изменения.УдаленностьРаботы КАК УдаленностьРаботы,
			|	Изменения.СокращенностьГрафика КАК СокращенностьГрафика
			|ИЗ
			|	ВТИзменения КАК Изменения
			|ГДЕ
			|	НЕ Изменения.УдаляемоеДвижение";
	
		РезультатЗапроса = Запрос.ВыполнитьПакет();
		ПрежниеИдентификаторы = РезультатЗапроса[РезультатЗапроса.Количество() - 1].Выгрузить();
		
		Выборка = РезультатЗапроса[РезультатЗапроса.Количество() - 2].Выбрать();
		Если Выборка.Количество() > 0 Тогда
			
			Пока Выборка.Следующий() Цикл
				
				Запись = РегистрыСведений.МероприятияТрудовойДеятельностиПрочие.СоздатьМенеджерЗаписи();
				ЗаполнитьЗначенияСвойств(Запись, Выборка);
				Запись.Записать();
				
			КонецЦикла;
			
		КонецЕсли;
		
	Иначе
		ПрежниеИдентификаторы = Неопределено;
	КонецЕсли;
	
	Запрос.Текст =
		"ВЫБРАТЬ
		|	МероприятияПрочие.ФизическоеЛицо КАК ФизическоеЛицо,
		|	МероприятияПрочие.Организация КАК Организация,
		|	МероприятияПрочие.ИдМероприятия КАК ИдМероприятия,
		|	МероприятияПрочие.Отменено КАК Отменено,
		|	МероприятияПрочие.Сотрудник КАК Сотрудник,
		|	МероприятияПрочие.ДатаМероприятия КАК ДатаМероприятия,
		|	МероприятияПрочие.ВидМероприятия КАК ВидМероприятия,
		|	МероприятияПрочие.Сведения КАК Сведения,
		|	МероприятияПрочие.Подразделение КАК Подразделение,
		|	МероприятияПрочие.Должность КАК Должность,
		|	МероприятияПрочие.РазрядКатегория КАК РазрядКатегория,
		|	МероприятияПрочие.КодПоРееструДолжностей КАК КодПоРееструДолжностей,
		|	МероприятияПрочие.ТрудоваяФункция КАК ТрудоваяФункция,
		|	МероприятияПрочие.НаименованиеДокументаОснования КАК НаименованиеДокументаОснования,
		|	МероприятияПрочие.ДатаДокументаОснования КАК ДатаДокументаОснования,
		|	МероприятияПрочие.СерияДокументаОснования КАК СерияДокументаОснования,
		|	МероприятияПрочие.НомерДокументаОснования КАК НомерДокументаОснования,
		|	МероприятияПрочие.НаименованиеВторогоДокументаОснования КАК НаименованиеВторогоДокументаОснования,
		|	МероприятияПрочие.ДатаВторогоДокументаОснования КАК ДатаВторогоДокументаОснования,
		|	МероприятияПрочие.СерияВторогоДокументаОснования КАК СерияВторогоДокументаОснования,
		|	МероприятияПрочие.НомерВторогоДокументаОснования КАК НомерВторогоДокументаОснования,
		|	ВЫБОР
		|		КОГДА МероприятияПрочие.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольнения.ПустаяСсылка)
		|			ТОГДА НЕОПРЕДЕЛЕНО
		|		КОГДА МероприятияПрочие.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольненияПользовательские.ПустаяСсылка)
		|			ТОГДА НЕОПРЕДЕЛЕНО
		|		ИНАЧЕ МероприятияПрочие.ОснованиеУвольнения
		|	КОНЕЦ КАК ОснованиеУвольнения,
		|	МероприятияПрочие.ДатаС КАК ДатаС,
		|	МероприятияПрочие.ДатаПо КАК ДатаПо,
		|	МероприятияПрочие.ЯвляетсяСовместителем КАК ЯвляетсяСовместителем,
		|	МероприятияПрочие.ДатаОтмены КАК ДатаОтмены,
		|	МероприятияПрочие.ПредставлениеДолжности КАК ПредставлениеДолжности,
		|	МероприятияПрочие.ПредставлениеПодразделения КАК ПредставлениеПодразделения,
		|	МероприятияПрочие.ОснованиеУвольненияТекстОснования КАК ОснованиеУвольненияТекстОснования,
		|	МероприятияПрочие.ОснованиеУвольненияСтатья КАК ОснованиеУвольненияСтатья,
		|	МероприятияПрочие.ОснованиеУвольненияЧасть КАК ОснованиеУвольненияЧасть,
		|	МероприятияПрочие.ОснованиеУвольненияПункт КАК ОснованиеУвольненияПункт,
		|	МероприятияПрочие.ОснованиеУвольненияПодпункт КАК ОснованиеУвольненияПодпункт,
		|	МероприятияПрочие.ОснованиеУвольненияАбзац КАК ОснованиеУвольненияАбзац,
		|	МероприятияПрочие.КодПоОКЗ КАК КодПоОКЗ,
		|	МероприятияПрочие.ТерриториальныеУсловия КАК ТерриториальныеУсловия,
		|	МероприятияПрочие.ПричинаУвольненияПФР КАК ПричинаУвольненияПФР,
		|	МероприятияПрочие.ОписаниеДолжности КАК ОписаниеДолжности,
		|	МероприятияПрочие.СрочностьТрудовогоДоговора КАК СрочностьТрудовогоДоговора,
		|	МероприятияПрочие.УдаленностьРаботы КАК УдаленностьРаботы,
		|	МероприятияПрочие.СокращенностьГрафика КАК СокращенностьГрафика
		|ИЗ
		|	ВТНовыйНабор КАК НовыйНабор
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.МероприятияТрудовойДеятельностиПрочие КАК МероприятияПрочие
		|			ЛЕВОЕ СОЕДИНЕНИЕ ВТОтчитывающиесяОрганизации КАК ОтчитывающиесяОрганизации
		|			ПО МероприятияПрочие.Организация = ОтчитывающиесяОрганизации.Организация
		|			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.МероприятияТрудовойДеятельностиПереданные КАК МероприятияПереданные
		|			ПО (МероприятияПереданные.Организация В (ОтчитывающиесяОрганизации.ОтчитывающаясяПоВзносамОрганизация, МероприятияПрочие.Организация))
		|				И МероприятияПрочие.ИдМероприятия = МероприятияПереданные.ИдМероприятия
		|				И (МероприятияПереданные.Отменено)
		|		ПО НовыйНабор.ФизическоеЛицо = МероприятияПрочие.ФизическоеЛицо
		|			И НовыйНабор.Организация = МероприятияПрочие.Организация
		|			И НовыйНабор.Сотрудник = МероприятияПрочие.Сотрудник
		|			И НовыйНабор.ДатаМероприятия = МероприятияПрочие.ДатаМероприятия
		|			И НовыйНабор.ВидМероприятия = МероприятияПрочие.ВидМероприятия
		|			И НовыйНабор.Сведения = МероприятияПрочие.Сведения
		|			И НовыйНабор.Подразделение = МероприятияПрочие.Подразделение
		|			И НовыйНабор.Должность = МероприятияПрочие.Должность
		|			И НовыйНабор.РазрядКатегория = МероприятияПрочие.РазрядКатегория
		|			И НовыйНабор.КодПоРееструДолжностей = МероприятияПрочие.КодПоРееструДолжностей
		|			И НовыйНабор.ТрудоваяФункция = МероприятияПрочие.ТрудоваяФункция
		|			И НовыйНабор.НаименованиеДокументаОснования = МероприятияПрочие.НаименованиеДокументаОснования
		|			И НовыйНабор.ДатаДокументаОснования = МероприятияПрочие.ДатаДокументаОснования
		|			И НовыйНабор.СерияДокументаОснования = МероприятияПрочие.СерияДокументаОснования
		|			И НовыйНабор.НомерДокументаОснования = МероприятияПрочие.НомерДокументаОснования
		|			И НовыйНабор.НаименованиеВторогоДокументаОснования = МероприятияПрочие.НаименованиеВторогоДокументаОснования
		|			И НовыйНабор.ДатаВторогоДокументаОснования = МероприятияПрочие.ДатаВторогоДокументаОснования
		|			И НовыйНабор.СерияВторогоДокументаОснования = МероприятияПрочие.СерияВторогоДокументаОснования
		|			И НовыйНабор.НомерВторогоДокументаОснования = МероприятияПрочие.НомерВторогоДокументаОснования
		|			И (ВЫБОР
		|				КОГДА НовыйНабор.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольнения.ПустаяСсылка)
		|					ТОГДА НЕОПРЕДЕЛЕНО
		|				КОГДА НовыйНабор.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольненияПользовательские.ПустаяСсылка)
		|					ТОГДА НЕОПРЕДЕЛЕНО
		|				ИНАЧЕ НовыйНабор.ОснованиеУвольнения
		|			КОНЕЦ = ВЫБОР
		|				КОГДА МероприятияПрочие.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольнения.ПустаяСсылка)
		|					ТОГДА НЕОПРЕДЕЛЕНО
		|				КОГДА МероприятияПрочие.ОснованиеУвольнения = ЗНАЧЕНИЕ(Справочник.ОснованияУвольненияПользовательские.ПустаяСсылка)
		|					ТОГДА НЕОПРЕДЕЛЕНО
		|				ИНАЧЕ МероприятияПрочие.ОснованиеУвольнения
		|			КОНЕЦ)
		|			И НовыйНабор.ДатаС = МероприятияПрочие.ДатаС
		|			И НовыйНабор.ДатаПо = МероприятияПрочие.ДатаПо
		|			И НовыйНабор.ЯвляетсяСовместителем = МероприятияПрочие.ЯвляетсяСовместителем
		|			И НовыйНабор.ПредставлениеДолжности = МероприятияПрочие.ПредставлениеДолжности
		|			И НовыйНабор.ПредставлениеПодразделения = МероприятияПрочие.ПредставлениеПодразделения
		|			И НовыйНабор.ОснованиеУвольненияТекстОснования = МероприятияПрочие.ОснованиеУвольненияТекстОснования
		|			И НовыйНабор.ОснованиеУвольненияСтатья = МероприятияПрочие.ОснованиеУвольненияСтатья
		|			И НовыйНабор.ОснованиеУвольненияЧасть = МероприятияПрочие.ОснованиеУвольненияЧасть
		|			И НовыйНабор.ОснованиеУвольненияПункт = МероприятияПрочие.ОснованиеУвольненияПункт
		|			И НовыйНабор.ОснованиеУвольненияПодпункт = МероприятияПрочие.ОснованиеУвольненияПодпункт
		|			И НовыйНабор.ОснованиеУвольненияАбзац = МероприятияПрочие.ОснованиеУвольненияАбзац
		|			И (ВЫБОР
		|				КОГДА НовыйНабор.ДатаМероприятия < ДАТАВРЕМЯ(2021, 7, 1)
		|					ТОГДА ИСТИНА
		|				КОГДА НовыйНабор.ВидМероприятия = ЗНАЧЕНИЕ(Перечисление.ВидыМероприятийТрудовойДеятельности.Увольнение)
		|					ТОГДА ИСТИНА
		|				КОГДА НовыйНабор.КодПоОКЗ = МероприятияПрочие.КодПоОКЗ
		|					ТОГДА ИСТИНА
		|				ИНАЧЕ ЛОЖЬ
		|			КОНЕЦ)
		|			И (ВЫБОР
		|				КОГДА НовыйНабор.ДатаМероприятия < ДАТАВРЕМЯ(2021, 7, 1)
		|					ТОГДА ИСТИНА
		|				КОГДА НовыйНабор.ТерриториальныеУсловия = МероприятияПрочие.ТерриториальныеУсловия
		|					ТОГДА ИСТИНА
		|				ИНАЧЕ ЛОЖЬ
		|			КОНЕЦ)
		|			И НовыйНабор.ОписаниеДолжности = МероприятияПрочие.ОписаниеДолжности
		|			И (НовыйНабор.ДатаМероприятия < &ДатаПостановленияЕФС1_2023
		|				ИЛИ НовыйНабор.СрочностьТрудовогоДоговора = МероприятияПрочие.СрочностьТрудовогоДоговора
		|					И НовыйНабор.УдаленностьРаботы = МероприятияПрочие.УдаленностьРаботы
		|					И НовыйНабор.СокращенностьГрафика = МероприятияПрочие.СокращенностьГрафика)
		|ГДЕ
		|	НовыйНабор.ИдМероприятия = &ПустойИдентификатор
		|	И НЕ НовыйНабор.Отменено
		|	И МероприятияПереданные.ИдМероприятия ЕСТЬ NULL";
	
	ПрочиеМероприятия = Запрос.Выполнить().Выгрузить();
	
	ЗаписиПереводов = Новый ТаблицаЗначений;
	ЗаписиПереводов.Колонки.Добавить("ФизическоеЛицо",                        Новый ОписаниеТипов("СправочникСсылка.ФизическиеЛица"));
	ЗаписиПереводов.Колонки.Добавить("Сотрудник",                             Новый ОписаниеТипов("СправочникСсылка.Сотрудники"));
	ЗаписиПереводов.Колонки.Добавить("ДатаМероприятия",                       Новый ОписаниеТипов("Дата"));
	ЗаписиПереводов.Колонки.Добавить("ВидМероприятия",                        Новый ОписаниеТипов("ПеречислениеСсылка.ВидыМероприятийТрудовойДеятельности"));
	ЗаписиПереводов.Колонки.Добавить("ИдМероприятия",                         Новый ОписаниеТипов("УникальныйИдентификатор"));
	ЗаписиПереводов.Колонки.Добавить("НаименованиеДокументаОснования",        Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("ДатаДокументаОснования",                Новый ОписаниеТипов("Дата"));
	ЗаписиПереводов.Колонки.Добавить("СерияДокументаОснования",               Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("НомерДокументаОснования",               Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("НаименованиеВторогоДокументаОснования", Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("ДатаВторогоДокументаОснования",         Новый ОписаниеТипов("Дата"));
	ЗаписиПереводов.Колонки.Добавить("СерияВторогоДокументаОснования",        Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("НомерВторогоДокументаОснования",        Новый ОписаниеТипов("Строка"));
	ЗаписиПереводов.Колонки.Добавить("ДатаОтмены",                            Новый ОписаниеТипов("Дата"));
	ЗаписиПереводов.Колонки.Добавить("ЯвляетсяСовместителем",                 Новый ОписаниеТипов("Булево"));
	ЗаписиПереводов.Колонки.Добавить("Отменено",                              Новый ОписаниеТипов("Булево"));
	
	Для Каждого Запись Из ЭтотОбъект Цикл
		
		Если Не ЗначениеЗаполнено(Запись.ИдМероприятия) Тогда
			
			СтруктураПоиска = Новый Структура(
				"ФизическоеЛицо,
				|Организация,
				|Сотрудник,
				|ДатаМероприятия,
				|ВидМероприятия,
				|Сведения,
				|Подразделение,
				|Должность,
				|РазрядКатегория,
				|КодПоРееструДолжностей,
				|ТрудоваяФункция,
				|НаименованиеДокументаОснования,
				|ДатаДокументаОснования,
				|СерияДокументаОснования,
				|НомерДокументаОснования,
				|НаименованиеВторогоДокументаОснования,
				|ДатаВторогоДокументаОснования,
				|СерияВторогоДокументаОснования,
				|НомерВторогоДокументаОснования,
				|ОснованиеУвольнения,
				|ДатаС,
				|ДатаПо,
				|ДатаОтмены,
				|ЯвляетсяСовместителем,
				|Отменено,
				|ПредставлениеДолжности,
				|ПредставлениеПодразделения,
				|ОснованиеУвольненияТекстОснования,
				|ОснованиеУвольненияСтатья,
				|ОснованиеУвольненияЧасть,
				|ОснованиеУвольненияПункт,
				|ОснованиеУвольненияПодпункт,
				|ОснованиеУвольненияАбзац,
				|ОписаниеДолжности");
			
			Если Запись.ДатаМероприятия >= '20210701' Тогда
				Если Запись.ВидМероприятия <> Перечисления.ВидыМероприятийТрудовойДеятельности.Увольнение Тогда
					СтруктураПоиска.Вставить("КодПоОКЗ");
				КонецЕсли;
				СтруктураПоиска.Вставить("ТерриториальныеУсловия");
			КонецЕсли;
			
			Если Запись.ДатаМероприятия >= ЗарплатаКадрыПовтИсп.ДатаВступленияВСилуНА("ДатаНачалаПриемаЕФС1") Тогда
				СтруктураПоиска.Вставить("ПричинаУвольненияПФР");
			КонецЕсли;
			
			Если Запись.ДатаМероприятия >= ПерсонифицированныйУчетКлиентСервер.ДатаПостановленияЕФС1_2023() Тогда
				СтруктураПоиска.Вставить("СрочностьТрудовогоДоговора");
				СтруктураПоиска.Вставить("УдаленностьРаботы");
				СтруктураПоиска.Вставить("СокращенностьГрафика");
			КонецЕсли;
			
			ЗаполнитьЗначенияСвойств(СтруктураПоиска, Запись);
			Если Не ЗначениеЗаполнено(Запись.ОснованиеУвольнения) Тогда
				СтруктураПоиска.ОснованиеУвольнения = Неопределено;
			КонецЕсли;
			
			Если ПрежниеИдентификаторы <> Неопределено Тогда
				
				// Заполнение идентификаторов мероприятий, регистрировавшихся ранее
				НайденныеЗаписи = ПрежниеИдентификаторы.НайтиСтроки(СтруктураПоиска);
				Если НайденныеЗаписи.Количество() > 0 Тогда
					Запись.ИдМероприятия = НайденныеЗаписи[0].ИдМероприятия;
					НайденныеЗаписи[0].ИдМероприятия = Неопределено;
				КонецЕсли;
				
			КонецЕсли;
			
			Если Не ЗначениеЗаполнено(Запись.ИдМероприятия) Тогда
				
				// Заполнение идентификаторов мероприятий, регистрировавшихся ранее
				Если Не ЗначениеЗаполнено(Запись.ДатаОтмены) Тогда
					СтруктураПоиска.Удалить("ДатаОтмены");
					СтруктураПоиска.Удалить("Отменено");
				КонецЕсли;
				
				НайденныеЗаписи = ПрочиеМероприятия.НайтиСтроки(СтруктураПоиска);
				Если НайденныеЗаписи.Количество() > 0 Тогда
					
					Запись.ИдМероприятия = НайденныеЗаписи[0].ИдМероприятия;
					
					Запись = РегистрыСведений.МероприятияТрудовойДеятельностиПрочие.СоздатьМенеджерЗаписи();
					Запись.ФизическоеЛицо = НайденныеЗаписи[0].ФизическоеЛицо;
					Запись.Организация = НайденныеЗаписи[0].Организация;
					Запись.ИдМероприятия = НайденныеЗаписи[0].ИдМероприятия;
					Запись.Отменено = НайденныеЗаписи[0].Отменено;
					Запись.Удалить();
					
				КонецЕсли;
				
			КонецЕсли;
			
			Если Не ЗначениеЗаполнено(Запись.ИдМероприятия) Тогда
				// Назначение идентификаторов новым мероприятиям
				
				Если Не ЗначениеЗаполнено(Запись.ИдМероприятия) Тогда
					Запись.ИдМероприятия = Новый УникальныйИдентификатор;
				КонецЕсли;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если Запись.ВидМероприятия = Перечисления.ВидыМероприятийТрудовойДеятельности.Перевод Тогда
			ЗаполнитьЗначенияСвойств(ЗаписиПереводов.Добавить(), Запись);
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Иначе
ВызватьИсключение НСтр("ru = 'Недопустимый вызов объекта на клиенте.';
						|en = 'Invalid object call on the client.'");
#КонецЕсли