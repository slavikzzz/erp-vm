#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныйПрограммныйИнтерфейс

Процедура ОбработкаПроведенияРегистратора(РегистраторОбъект, Отказ, РежимПроведения) Экспорт
	Очистить();
	
	Если Не ЗначениеЗаполнено(РегистраторОбъект.Дата)
		Или Не ЗначениеЗаполнено(РегистраторОбъект.ФизическоеЛицо) Тогда
		Возврат;
	КонецЕсли;
	
	Для Каждого СтрокаТаблицы Из РегистраторОбъект.ДанныеОЗаработке Цикл
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.РасчетныйГод) Тогда
			Продолжить;
		КонецЕсли;
		Движение = Добавить();
		Движение.Регистратор         = РегистраторОбъект.Ссылка;
		Движение.Период              = РегистраторОбъект.Дата;
		Движение.ФизическоеЛицо      = РегистраторОбъект.ФизическоеЛицо;
		Движение.РасчетныйГод        = СтрокаТаблицы.РасчетныйГод;
		Движение.ЗаработокПоВсем     = СтрокаТаблицы.ЗаработокПоВсем;
		Движение.ЗаработокПоВсемГПХ  = СтрокаТаблицы.ЗаработокПоВсемГПХ;
		Движение.СНИЛС               = РегистраторОбъект.СНИЛС;
	КонецЦикла;
КонецПроцедуры

#КонецОбласти

#Иначе
ВызватьИсключение НСтр("ru = 'Недопустимый вызов объекта на клиенте.';
						|en = 'Invalid object call on the client.'");
#КонецЕсли

