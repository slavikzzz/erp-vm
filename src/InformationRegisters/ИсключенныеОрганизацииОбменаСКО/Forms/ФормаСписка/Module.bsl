
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ЕстьПрава = Пользователи.ЭтоПолноправныйПользователь();
	УстановитьОтборПоПользователю();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормы

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Параметр = Новый Структура;
	Параметр.Вставить("ЗначенияЗаполнения", Новый Структура("Пользователь", ПользователиКлиент.ТекущийПользователь()));
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура УстановитьОтборПоПользователю()

	Если ЕстьПрава Тогда
		Возврат;
	КонецЕсли;
	
	ИмяПоля = "Пользователь";
	ПредставлениеПоля = "ПользовательОграничения";
	
	ЭлементОтбора = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ЭлементОтбора.ЛевоеЗначение  = Новый ПолеКомпоновкиДанных(ИмяПоля);
	ЭлементОтбора.ВидСравнения   = ВидСравненияКомпоновкиДанных.Равно;
	ЭлементОтбора.Использование  = Истина;
	ЭлементОтбора.ПравоеЗначение = Пользователи.АвторизованныйПользователь();
	ЭлементОтбора.Представление  = ПредставлениеПоля;
	ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
	
КонецПроцедуры

#КонецОбласти

