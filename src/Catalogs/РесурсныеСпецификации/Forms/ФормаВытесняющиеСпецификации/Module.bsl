
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	//++ НЕ УТКА
	ПараметрыВызова = Справочники.РесурсныеСпецификации.СписокВытесняющихСпецификацийПараметрыВызова(Параметры.Контекст);
	
	Заголовок = СтрШаблон(НСтр("ru = 'Вытесняющие спецификации для ""%1""';
								|en = 'Preemptive bills of materials for ""%1""'"), ПараметрыВызова.Спецификация);
	//-- НЕ УТКА
	
	СформироватьСписокВытесняющихСпецификаций();
	
	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);

КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)

	Если ИмяСобытия = "Запись_РесурсныеСпецификации" Тогда
		
		СформироватьСписокВытесняющихСпецификаций();
		
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийТаблицыВытесняющиеСпецификации

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОбновитьДанные(Команда)
	
	СформироватьСписокВытесняющихСпецификаций();
	
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ВыполнитьПереопределяемуюКоманду(Команда)
	
	СобытияФормКлиент.ВыполнитьПереопределяемуюКоманду(ЭтаФорма, Команда);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура СформироватьСписокВытесняющихСпецификаций()
	
	//++ НЕ УТКА
	СписокСпецификаций = Справочники.РесурсныеСпецификации.СписокВытесняющихСпецификаций(ПараметрыВызова.Спецификация, ПараметрыВызова);
	
	ОбщегоНазначенияКлиентСервер.УстановитьПараметрДинамическогоСписка(
		ВытесняющиеСпецификации,
		"СписокСпецификаций",
		СписокСпецификаций);
	//-- НЕ УТКА
	
	Возврат; // пустой обработчик
	
КонецПроцедуры

#КонецОбласти