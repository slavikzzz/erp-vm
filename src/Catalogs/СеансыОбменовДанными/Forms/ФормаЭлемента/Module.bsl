///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2025, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ЗамерыПроизводительности(Команда)
	
	АдресФайла = ПолучитьАдресФайлаНаСервере();
	Заголовок = НСтр("ru = 'Сохранение файла';
					|en = 'Save files'");
		
	ИмяФайла = НСтр("ru = 'Замеры производительности.zip';
					|en = 'Performance measurements.zip'", ОбщегоНазначенияКлиент.КодОсновногоЯзыка());
		
	ПараметрыДиалога = Новый ПараметрыДиалогаПолученияФайлов(Заголовок, Истина);
	НачатьПолучениеФайлаССервера(АдресФайла, ИмяФайла, ПараметрыДиалога);

КонецПроцедуры

&НаСервере
Функция ПолучитьАдресФайлаНаСервере()
	
	ДвоичныеДанные = РеквизитФормыВЗначение("Объект").ЗамерыПроизводительности.Получить();	
	Адрес = ПоместитьВоВременноеХранилище(ДвоичныеДанные);
	
	Возврат Адрес;
	
КонецФункции

#КонецОбласти
