
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Если ЭтоАдресВременногоХранилища(Параметры.АдресСпискаАналитик) Тогда
		АналитикиШапки = ПолучитьИзВременногоХранилища(Параметры.АдресСпискаАналитик);
		Список.ЗагрузитьЗначения(АналитикиШапки.ВыгрузитьКолонку("ВидАналитики"));
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗавершитьРедактирование(Команда)
	
	МаксимальноеКоличествоАналитик = БюджетированиеКлиентСервер.МаксимальноеКоличествоАналитик();
	Результат = ОбщегоНазначенияКлиентСервер.СвернутьМассив(Список.ВыгрузитьЗначения());
	Если Результат.Количество() > МаксимальноеКоличествоАналитик Тогда
		ТекстПредупреждения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			НСтр("ru = 'Количество аналитик не может превышать %1';
				|en = 'Quantity of dimensions cannot exceed %1'"),
			МаксимальноеКоличествоАналитик);
		ПоказатьПредупреждение(, ТекстПредупреждения);
		Возврат;
	КонецЕсли;
	
	Закрыть(Результат);
	
КонецПроцедуры
