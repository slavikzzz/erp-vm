

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	ЕстьПериод = Справочники.ЭлементыФинансовыхОтчетов.ЭлементРазвернутПоПериоду(Параметры);
	
	ЗаполнитьСпискиВыбораПериода(ЕстьПериод);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)
	
	Если ПроверитьЗаполнение() Тогда
		Результат = Новый Структура(
			"НачалоПериода, КонецПериода, Периодичность", 
			НачалоПериода, КонецПериода, Периодичность);
			
		Закрыть(Результат);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаполнитьСпискиВыбораПериода(ЕстьПериод)
	
	ПеременныеПериодов = БюджетнаяОтчетностьКлиентСервер.ПеременныеПериодовБюджетирования();
	
	Элементы.НачалоПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.НачалоПериодаДанных.Имя,
		ПеременныеПериодов.НачалоПериодаДанных.Представление);
	Элементы.КонецПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.НачалоПериодаДанных.Имя,
		ПеременныеПериодов.НачалоПериодаДанных.Представление);
	
	Элементы.НачалоПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.КонецПериодаДанных.Имя,
		ПеременныеПериодов.КонецПериодаДанных.Представление);
	Элементы.КонецПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.КонецПериодаДанных.Имя,
		ПеременныеПериодов.КонецПериодаДанных.Представление);
	
	Элементы.НачалоПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.ГраницаФактДанных.Имя,
		ПеременныеПериодов.ГраницаФактДанных.Представление);
	Элементы.КонецПериода.СписокВыбора.Добавить(
		ПеременныеПериодов.ГраницаФактДанных.Имя,
		ПеременныеПериодов.ГраницаФактДанных.Представление);
	
	Если ЕстьПериод Тогда
		
		Элементы.НачалоПериода.СписокВыбора.Добавить(
			ПеременныеПериодов.ПериодГруппировки.Имя,
			ПеременныеПериодов.ПериодГруппировки.Представление);
		Элементы.КонецПериода.СписокВыбора.Добавить(
			ПеременныеПериодов.ПериодГруппировки.Имя,
			ПеременныеПериодов.ПериодГруппировки.Представление);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти