
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	НастройкаФормированияПроводокИспользуется = 
		Справочники.НастройкиФормированияПроводокМеждународногоУчета.НастройкаФормированияПроводокИспользуется(Параметры.НастройкаФормированияПроводок);
	
	Если НастройкаФормированияПроводокИспользуется Тогда
		Элементы.ОписаниеЗапретРедактирования.Видимость = Истина;
		РазрешитьРедактированиеВыделенияДолгосрочныхАктивовОбязательств = Ложь;
		РазрешитьРедактированиеНастройкиПроводокПоВыручкеБезНДС = Ложь;
		РазрешитьРедактированиеЗакрытияСчетовДоходовИРасходов = Ложь;
	Иначе
		Элементы.ОписаниеЗапретРедактирования.Видимость = Ложь;
		РазрешитьРедактированиеВыделенияДолгосрочныхАктивовОбязательств = Истина;
		РазрешитьРедактированиеНастройкиПроводокПоВыручкеБезНДС = Истина;
		РазрешитьРедактированиеЗакрытияСчетовДоходовИРасходов = Истина;
	КонецЕсли;
	
	СпособАннулированияПроводокДоступен = 
		МеждународныйУчетОбщегоНазначения.НастройкаПроводокПоОбъектамУчетаИлиРеглУчету();
	
	Если СпособАннулированияПроводокДоступен Тогда
		Элементы.РазрешитьРедактированиеСпособаАннулированияПроводок.Доступность = Истина;
		РазрешитьРедактированиеСпособаАннулированияПроводок = НЕ НастройкаФормированияПроводокИспользуется;
	Иначе
		Элементы.РазрешитьРедактированиеСпособаАннулированияПроводок.Доступность = Ложь;
	КонецЕсли;

	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура РазрешитьРедактирование(Команда)

	Результат = Новый Массив;
	Если РазрешитьРедактированиеСпособаАннулированияПроводок Тогда
		Результат.Добавить("СпособАннулированияПроводок");
	КонецЕсли;
	Если РазрешитьРедактированиеВыделенияДолгосрочныхАктивовОбязательств Тогда
		Результат.Добавить("ИспользоватьВыделениеДолгосрочныхАктивовОбязательств");
	КонецЕсли;
	Если РазрешитьРедактированиеНастройкиПроводокПоВыручкеБезНДС Тогда
		Результат.Добавить("ПроводкиПоВыручкеБезНДС");
	КонецЕсли;
	Если РазрешитьРедактированиеЗакрытияСчетовДоходовИРасходов Тогда
		Результат.Добавить("ЗакрытиеСчетовДоходовИРасходов");
	КонецЕсли;

	Закрыть(Результат);
	
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ВыполнитьПереопределяемуюКоманду(Команда)
	
	СобытияФормКлиент.ВыполнитьПереопределяемуюКоманду(ЭтаФорма, Команда);
	
КонецПроцедуры

#КонецОбласти
