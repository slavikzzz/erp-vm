

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	РазрешитьРедактированиеОрганизацииПодразделения = Ложь;
	РазрешитьРедактированиеТипаИВариантовРаспределенияРасходов = Истина;
	
	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);
	
КонецПроцедуры

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура РазрешитьРедактирование(Команда)

	Результат = РедактируемыеРеквизиты();
	Закрыть(Результат);

КонецПроцедуры

&НаСервере
Функция РедактируемыеРеквизиты()
	
	Результат = Новый Массив;
	Если РазрешитьРедактированиеОрганизацииПодразделения Тогда
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.Организация.Имя);
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.Подразделение.Имя);
	КонецЕсли;
	Если РазрешитьРедактированиеТипаИВариантовРаспределенияРасходов Тогда
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.ТипРасходов.Имя);
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.ВариантРаспределенияРасходовУпр.Имя);
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.ВариантРаспределенияРасходовРегл.Имя);
		Результат.Добавить(Метаданные.Справочники.ОбъектыВозникновенияЗатрат.Реквизиты.ВариантРаспределенияРасходовНУ.Имя);
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти
