#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Возвращает имена блокируемых реквизитов для механизма блокирования реквизитов БСП.
//
// Возвращаемое значение:
//	Массив - имена блокируемых реквизитов.
//
Функция ПолучитьБлокируемыеРеквизитыОбъекта() Экспорт
	
	Результат = Новый Массив;
	Результат.Добавить("Организация");
	Результат.Добавить("Подразделение");
	Результат.Добавить("ТипРасходов");
	Результат.Добавить("ВариантРаспределенияРасходовУпр");
	Результат.Добавить("ВариантРаспределенияРасходовРегл");
	Результат.Добавить("ВариантРаспределенияРасходовНУ");
	
	СтатьиРасходовЛокализация.ДополнитьБлокируемыеРеквизитыОбъекта(Результат);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#КонецЕсли

#Область ОбработчикиСобытий
Процедура ОбработкаПолученияФормы(ВидФормы, Параметры, ВыбраннаяФорма, ДополнительнаяИнформация, СтандартнаяОбработка)
	Если Не ВидФормы = "ФормаВыбора" Тогда
		Возврат;
	КонецЕсли;
	Если Не Параметры.Свойство("Отбор") Тогда
		Параметры.Вставить("Отбор", Новый Структура);
	КонецЕсли;
	Если Параметры.Свойство("Организация") Тогда
		Параметры.Отбор.Вставить("Организация", Параметры.Организация);
	КонецЕсли;
	Если Параметры.Свойство("Подразделение") Тогда
		Параметры.Отбор.Вставить("Подразделение", Параметры.Подразделение);
	КонецЕсли;
	Если Не Параметры.Отбор.Свойство("НеИспользуется") Тогда
		Параметры.Отбор.Вставить("НеИспользуется", Ложь);
	КонецЕсли;
КонецПроцедуры

Процедура ОбработкаПолученияДанныхВыбора(ДанныеВыбора, Параметры, СтандартнаяОбработка)
	Если Не Параметры.Отбор.Свойство("НеИспользуется") Тогда
		Параметры.Отбор.Вставить("НеИспользуется", Ложь);
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

