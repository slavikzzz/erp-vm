#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриЗаписи(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если НЕ Значение Тогда
		
		Настройки = Новый Структура("АвтозагрузкаУдалитьЗадание");
		
		ТекстЗапроса = "
		|ВЫБРАТЬ
		|	Настройки.ИсточникДанных,
		|	Настройки.АвтозагрузкаИдентификаторЗадания
		|ИЗ
		|	РегистрСведений.НастройкиВыполненияЗагрузкиНСИ КАК Настройки";
		
		Запрос = Новый Запрос;
		Запрос.Текст = ТекстЗапроса;
		
		Выборка = Запрос.Выполнить().Выбрать();
		Пока Выборка.Следующий() Цикл
			Если ЗначениеЗаполнено(Выборка.АвтозагрузкаИдентификаторЗадания) Тогда
				РегистрыСведений.НастройкиВыполненияЗагрузкиНСИ.ЗаписатьНастройкиИсточника(Выборка.ИсточникДанных, Настройки, Истина);
			КонецЕсли;
		КонецЦикла;
	
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли