#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если ТипЗнч(Параметры.Данные) = Тип("ХранилищеЗначения") Тогда 
		ЗаполнитьЗначенияСвойств(ЭтотОбъект, Параметры.Данные.Получить());
		_ИННФЛ = ЗначениеЗаполнено(ИННФЛ) И РегламентированныеДанныеКлиентСервер.ИННСоответствуетТребованиям(ИННФЛ, Ложь, "");
		_ОГРН = ЗначениеЗаполнено(ОГРН) И РегламентированныеДанныеКлиентСервер.ОГРНСоответствуетТребованиям(ОГРН, Ложь, "");
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ИННФЛПриИзменении(Элемент)
	ПроверкаНаКорректность();
КонецПроцедуры

&НаКлиенте
Процедура ОГРНПриИзменении(Элемент)
	ПроверкаНаКорректность();
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Ок(Команда)
	Если _ИННФЛ И _ОГРН И ЗначениеЗаполнено(Фамилия) И ЗначениеЗаполнено(Имя) Тогда 
		Закрыть(ОписаниеРезультата());
	Иначе
		ОбщегоНазначенияКлиент.СообщитьПользователю("Необходимо корректно заплонить данные");
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция ОписаниеРезультата()
	Данные = Новый Структура("ИННФЛ,Фамилия,Имя,Отчество,ОГРН", ИННФЛ, Фамилия, Имя, Отчество, ОГРН);
	Описание = "ИП " + СокрЛП(Фамилия + " " + Имя + " " + Отчество) + ", ИНН:" + ИННФЛ;
	Возврат Новый Структура("Описание, Данные, Тип", Описание, Новый ХранилищеЗначения(Данные), "4");
КонецФункции

&НаКлиенте
Процедура ПроверкаНаКорректность()
	_ИННФЛ = ЗначениеЗаполнено(ИННФЛ) И РегламентированныеДанныеКлиентСервер.ИННСоответствуетТребованиям(ИННФЛ, Ложь, "");
	_ОГРН = ЗначениеЗаполнено(ОГРН) И РегламентированныеДанныеКлиентСервер.ОГРНСоответствуетТребованиям(ОГРН, Ложь, "");
КонецПроцедуры

#КонецОбласти
