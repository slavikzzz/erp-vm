#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	МеждународнаяОтчетностьСервер.ПриКомпоновкеРезультата(СхемаКомпоновкиДанных, КомпоновщикНастроек, ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка);
	
	МеждународнаяОтчетностьСервер.ОбъединитьЗаголовкиПолей(ДокументРезультат, НСтр("ru = 'Дебет';
																					|en = 'Debit'"));
	МеждународнаяОтчетностьСервер.ОбъединитьЗаголовкиПолей(ДокументРезультат, НСтр("ru = 'Кредит';
																					|en = 'Credit'"));
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Для общей формы "Форма отчета" подсистемы "Варианты отчетов".
Процедура ОпределитьНастройкиФормы(Форма, КлючВарианта, Настройки) Экспорт
	
	Настройки.События.ПередЗагрузкойНастроекВКомпоновщик = Истина;
	
КонецПроцедуры

// Вызывается перед загрузкой новых настроек. Используется для изменения схемы компоновки.
//
Процедура ПередЗагрузкойНастроекВКомпоновщик(Контекст, КлючСхемы, КлючВарианта, НовыеНастройкиКД, НовыеПользовательскиеНастройкиКД) Экспорт
	
	Если Не ПолучитьФункциональнуюОпцию("ИспользоватьНесколькоПлановСчетовВМеждународномУчете") Тогда
		ПолеСчет = ЭтотОбъект.СхемаКомпоновкиДанных.НаборыДанных["ОсновнойНаборДанных"].Поля.Найти("Счет"); // ПолеНабораДанныхСхемыКомпоновкиДанных - 
		ПараметрыРедактирования =  ПолеСчет.ПараметрыРедактирования.Элементы;
		ПолеПараметраПланСчетов = Новый ПолеКомпоновкиДанных("ПараметрыДанных.ПланСчетов");
		Для Каждого ПараметрРедактирования Из ПараметрыРедактирования Цикл
			Если ПараметрРедактирования.Параметр = Новый ПараметрКомпоновкиДанных("СвязиПараметровВыбора") Тогда
				ПараметрРедактирования.Использование = Ложь;
				Для Каждого СвязьПараметровВыбора Из ПараметрРедактирования.Значение Цикл
					Если СвязьПараметровВыбора.Поле = ПолеПараметраПланСчетов Тогда
						ПараметрРедактирования.Значение.Удалить(СвязьПараметровВыбора);
					КонецЕсли;
				КонецЦикла;
			КонецЕсли;
		КонецЦикла;
		ОтчетыСервер.ПодключитьСхему(ЭтотОбъект, Контекст, ЭтотОбъект.СхемаКомпоновкиДанных, КлючСхемы);
	КонецЕсли;
	Если ТипЗнч(Контекст) = Тип("ФормаКлиентскогоПриложения") И Контекст.Параметры.Свойство("ДополнительныеПараметры") Тогда 
		ДополнительныеПараметры = ОбщегоНазначенияКлиентСервер.СвойствоСтруктуры(Контекст.Параметры,"ДополнительныеПараметры");
		ГруппировкаПоПериоду = ОбщегоНазначенияКлиентСервер.СвойствоСтруктуры(ДополнительныеПараметры, "ГруппировкаПоПериоду");
		Если ГруппировкаПоПериоду <> Неопределено Тогда
			Поле = ГруппировкаПоПериоду;
			НовыеНастройкиКД.Структура.Очистить();
			КомпоновкаДанныхКлиентСервер.ДобавитьГруппировку(НовыеНастройкиКД, Новый ПолеКомпоновкиДанных(Поле));
		КонецЕсли;
	КонецЕсли;	
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
