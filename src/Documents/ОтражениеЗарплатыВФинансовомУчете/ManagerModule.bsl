#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

#Область Проведение

// Описывает учетные механизмы используемые в документе для регистрации в механизме проведения.
//
// Параметры:
//  МеханизмыДокумента - Массив - список имен учетных механизмов, для которых будет выполнена
//              регистрация в механизме проведения.
//
Процедура ЗарегистрироватьУчетныеМеханизмы(МеханизмыДокумента) Экспорт
	
	МеханизмыДокумента.Добавить("ИнтеграцияБЗК");
	//++ НЕ УТКА
	МеханизмыДокумента.Добавить("МеждународныйУчет");
	//-- НЕ УТКА
	МеханизмыДокумента.Добавить("ОборотныеРегистрыУправленческогоУчета");
	МеханизмыДокумента.Добавить("ОтражениеЗарплатыВФинансовомУчете");
	МеханизмыДокумента.Добавить("РасчетыСПодотчетниками");
	МеханизмыДокумента.Добавить("РегламентированныйУчет");
	МеханизмыДокумента.Добавить("УчетУСНПСН");
	МеханизмыДокумента.Добавить("СебестоимостьИПартионныйУчет");
	МеханизмыДокумента.Добавить("УчетДоходовРасходов");
	МеханизмыДокумента.Добавить("УчетНЗП");
	МеханизмыДокумента.Добавить("УчетПрочихАктивовПассивов");
	МеханизмыДокумента.Добавить("РеестрДокументов");
	МеханизмыДокумента.Добавить("ИсправлениеДокументов");
	
КонецПроцедуры

// Возвращает таблицы для движений, необходимые для проведения документа по регистрам учетных механизмов.
//
// Параметры:
//  Документ - ДокументСсылка, ДокументОбъект - ссылка на документ или объект, по которому необходимо получить данные
//  Регистры - Структура - список имен регистров, для которых необходимо получить таблицы
//  ДопПараметры - Структура - дополнительные параметры для получения данных, определяющие контекст проведения.
//
// Возвращаемое значение:
//  Структура - коллекция элементов:
//     * Таблица<ИмяРегистра> - ТаблицаЗначений - таблица данных для отражения в регистр.
//
Функция ДанныеДокументаДляПроведения(Документ, Регистры, ДопПараметры = Неопределено) Экспорт
	
	Если ДопПараметры = Неопределено Тогда
		ДопПараметры = ПроведениеДокументов.ДопПараметрыИнициализироватьДанныеДокументаДляПроведения();
	КонецЕсли;
	
	Если ТипЗнч(Документ) = Тип("ДокументОбъект.ОтражениеЗарплатыВФинансовомУчете") Тогда
		ДокументСсылка = Документ.Ссылка;
	Иначе
		ДокументСсылка = Документ;
	КонецЕсли;
	
	Запрос			= Новый Запрос;
	ТекстыЗапроса	= Новый СписокЗначений;
	
	Если Не ДопПараметры.ПолучитьТекстыЗапроса Тогда
		////////////////////////////////////////////////////////////////////////////
		// Создадим запрос инициализации движений
		
		ЗаполнитьПараметрыИнициализации(Запрос, ДокументСсылка);
		
		////////////////////////////////////////////////////////////////////////////
		// Сформируем текст запроса
		
		ТекстЗапросаТаблицаТрудозатратыНезавершенногоПроизводства(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаОтражениеЗарплатыВФинансовомУчете(Запрос, ТекстыЗапроса, Регистры);
		
		ТекстЗапросаТаблицаПрочиеРасходы(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаПартииПрочихРасходов(Запрос, ТекстыЗапроса, Регистры);
		
		ТекстЗапросаТаблицаДвиженияДоходыРасходыПрочиеАктивыПассивы(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаДвиженияДенежныеСредстваДоходыРасходы(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаДвиженияПоПрочимАктивамПассивам(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаПрочиеАктивыПассивы(Запрос, ТекстыЗапроса, Регистры);
		
		ТекстЗапросаТаблицаДенежныеСредстваУПодотчетныхЛиц(Запрос, ТекстыЗапроса, Регистры);
		
		ТекстЗапросаТаблицаОценочныеОбязательстваПоСотрудникам(Запрос, ТекстыЗапроса, Регистры);
		
		ТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаПорядокОтраженияПрочихОпераций(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаКУДиР(Запрос, ТекстыЗапроса, Регистры);
		ОтразитьПрочуюВыручку(Запрос, ТекстыЗапроса, Регистры);
		ТекстЗапросаТаблицаРеестрДокументов(Запрос, ТекстыЗапроса, Регистры);
		
	КонецЕсли;
	
	ПроведениеДокументов.ДобавитьЗапросыСторноДвижений(Запрос, ТекстыЗапроса, Регистры, ПустаяСсылка().Метаданные());
	
	////////////////////////////////////////////////////////////////////////////
	// Получим таблицы для движений
	
	Возврат ПроведениеДокументов.ИнициализироватьДанныеДокументаДляПроведения(Запрос, ТекстыЗапроса, ДопПараметры);
	
КонецФункции

#КонецОбласти

// СтандартныеПодсистемы.ВерсионированиеОбъектов

// Определяет настройки объекта для подсистемы ВерсионированиеОбъектов.
//
// Параметры:
//  Настройки - Структура - настройки подсистемы.
Процедура ПриОпределенииНастроекВерсионированияОбъектов(Настройки) Экспорт

КонецПроцедуры

// Конец СтандартныеПодсистемы.ВерсионированиеОбъектов

// Определяет список команд создания на основании.
//
// Параметры:
//  КомандыСозданияНаОсновании - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.КомандыСозданияНаОсновании
//  Параметры - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.Параметры
//
Процедура ДобавитьКомандыСозданияНаОсновании(КомандыСозданияНаОсновании, Параметры) Экспорт
	
	 ИсправлениеДокументов.ДобавитьКомандыСозданияНаОсновании(КомандыСозданияНаОсновании, ПустаяСсылка().Метаданные());
	
КонецПроцедуры

// Добавляет команду создания документа "Отражение зарплаты в финансовом учете".
//
// Параметры:
//  КомандыСозданияНаОсновании - см. СозданиеНаОснованииПереопределяемый.ПередДобавлениемКомандСозданияНаОсновании.КомандыСозданияНаОсновании
//
Функция ДобавитьКомандуСоздатьНаОсновании(КомандыСозданияНаОсновании) Экспорт
	Если ПравоДоступа("Добавление", Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете) Тогда
		
		КомандаСоздатьНаОсновании = КомандыСозданияНаОсновании.Добавить();
		КомандаСоздатьНаОсновании.Менеджер = Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете.ПолноеИмя();
		КомандаСоздатьНаОсновании.Представление = ОбщегоНазначенияУТ.ПредставлениеОбъекта(Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете);
		КомандаСоздатьНаОсновании.РежимЗаписи = "Проводить";
		КомандаСоздатьНаОсновании.ФункциональныеОпции = "ИспользоватьРасчетЗарплатыРасширенная,УправлениеПредприятием,КомплекснаяАвтоматизация";
		
		Возврат КомандаСоздатьНаОсновании;
		
	КонецЕсли;
	
	Возврат Неопределено;
КонецФункции

// Формирует документ отражения зарплаты за период по указанной организации. Вызывается
// при автоматическом выполнении операций закрытия месяца.
//
// Параметры:
//   Организации - СправочникСсылка.Организации - Организация, по которой формируется документ
//   Период - Дата - Период, за который формируется документ.
//
Процедура ОтражениеЗарплатыПриЗакрытииМесяца(Организации, Период) Экспорт
	
	Если Не ПолучитьФункциональнуюОпцию("ИспользоватьНачислениеЗарплатыУТ") Тогда
		Возврат;
	КонецЕсли;
	
	ПроверитьБлокировкуВходящихДанныхПриОбновленииИБ(НСтр("ru = 'Отражение зарплаты при закрытии месяца';
															|en = 'Salary record upon month-end closing'"));
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	ОтражениеЗарплатыВФинансовомУчете.Ссылка КАК Ссылка,
	|	ОтражениеЗарплатыВФинансовомУчете.Организация КАК Организация,
	|	ОтражениеЗарплатыВФинансовомУчете.Проведен КАК Проведен
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете КАК ОтражениеЗарплатыВФинансовомУчете
	|ГДЕ
	|	(ОтражениеЗарплатыВФинансовомУчете.Организация В(&Организации) ИЛИ &ПоВсемОрганизациям)
	|	И НАЧАЛОПЕРИОДА(ОтражениеЗарплатыВФинансовомУчете.ПериодРегистрации, МЕСЯЦ) = &НачалоМесяца
	|	И НЕ ОтражениеЗарплатыВФинансовомУчете.ПометкаУдаления
	|
	|УПОРЯДОЧИТЬ ПО
	|	Организация,
	|	Проведен УБЫВ");
	
	Запрос.УстановитьПараметр("Организации", Организации);
	Запрос.УстановитьПараметр("ПоВсемОрганизациям", НЕ ЗначениеЗаполнено(Организации));
	Запрос.УстановитьПараметр("НачалоМесяца", НачалоМесяца(Период));
	
	СуществующиеДокументы = Запрос.Выполнить().Выбрать();
	
	Для Каждого Организация Из Организации Цикл
		
		ДокументыПоОрганизацииОбработаны = Ложь;
		
		ДокументОбъект = Неопределено;
		
		СуществующиеДокументы.Сбросить();
		
		Пока СуществующиеДокументы.НайтиСледующий(Новый Структура("Организация, Проведен", Организация, Истина)) Цикл
			
			ДокументОбъект = СуществующиеДокументы.Ссылка.ПолучитьОбъект();
			
			Если ДокументОбъект.ПроверитьЗаполнение() Тогда
				ДокументОбъект.ДополнительныеСвойства.Вставить("ПроверкаДокументов_Отключить", Истина);
				ДокументОбъект.Записать(РежимЗаписиДокумента.Проведение);
			КонецЕсли;
			
			ДокументыПоОрганизацииОбработаны = Истина;
			
		КонецЦикла;
		
		Если ДокументыПоОрганизацииОбработаны Тогда
			Продолжить;
		КонецЕсли;
		
		СуществующиеДокументы.Сбросить();
		
		Если СуществующиеДокументы.НайтиСледующий(Новый Структура("Организация, Проведен", Организация, Ложь)) Тогда
			ДокументОбъект = СуществующиеДокументы.Ссылка.ПолучитьОбъект();
			ДокументОбъект.НачисленнаяЗарплатаИВзносы.Очистить();
			ДокументОбъект.НачисленнаяЗарплатаИВзносыПоФизлицам.Очистить();
			ДокументОбъект.ВыплатаЗаСчетРезервов.Очистить();
			ДокументОбъект.НачисленныйНДФЛ.Очистить();
			ДокументОбъект.УдержаннаяЗарплата.Очистить();
			ДокументОбъект.ФизическиеЛица.Очистить();
			ДокументОбъект.Записать(РежимЗаписиДокумента.Запись);
		КонецЕсли;
		
		Если ДокументОбъект = Неопределено Тогда
			ДокументОбъект = Документы.ОтражениеЗарплатыВФинансовомУчете.СоздатьДокумент();
		КонецЕсли;
		
		ДокументОбъект.Заполнить(Неопределено);
		ДокументОбъект.Организация = Организация;
		ДокументОбъект.ПериодРегистрации = НачалоМесяца(Период);
		ДокументОбъект.Дата = КонецМесяца(Период);
		ДокументОбъект.Сводно = Ложь;
		
		// Заполнение табличных частей
		
		СтруктураПараметров = ОтражениеЗарплатыВБухучетеРасширенный.ПараметрыДляЗаполненияТаблицДокумента();
		СтруктураПараметров.Организация 		= ДокументОбъект.Организация;
		СтруктураПараметров.ПериодРегистрации 	= ДокументОбъект.ПериодРегистрации;
		СтруктураПараметров.ДокументСсылка 		= ДокументОбъект.Ссылка;
		
		СписокТаблиц = Новый СписокЗначений;
		СписокТаблиц.Добавить("НачисленнаяЗарплатаИВзносы",  Нстр("ru = 'Начисленная зарплата и взносы';
																	|en = 'Accrued salary and contributions'"));
		СписокТаблиц.Добавить("НачисленныйНДФЛ",             Нстр("ru = 'Начисленый НДФЛ';
																	|en = 'Accrued PIT'"));
		СписокТаблиц.Добавить("УдержаннаяЗарплата",          Нстр("ru = 'Удержанная зарплата';
																	|en = 'Deducted salary'"));
		СписокТаблиц.Добавить("НачисленныеПроцентыПоЗаймам", Нстр("ru = 'Начисленные проценты по займам';
																	|en = 'Accrued loan interest'"));
		СписокТаблиц.Добавить("ВыплатаЗаСчетРезервов",       НСтр("ru = 'Выплата за счет резервов';
																	|en = 'Payment from payroll funds'"));
		
		СтрокаСписокТаблиц = "НачисленнаяЗарплатаИВзносы, НачисленныйНДФЛ, УдержаннаяЗарплата, НачисленныеПроцентыПоЗаймам, ВыплатаЗаСчетРезервов";
		
		СтруктураПараметров.Вставить("СтрокаСписокТаблиц", СтрокаСписокТаблиц);
		СтруктураПараметров.Вставить("СписокТаблиц", СписокТаблиц);
		
		АдресХранилища = ПоместитьВоВременноеХранилище(Неопределено);
		ПодготовитьДанныеДляЗаполнения(СтруктураПараметров, АдресХранилища);
		
		Результат = Новый Структура;
		Результат.Вставить("АдресХранилища", АдресХранилища);
		Результат.Вставить("СтрокаСписокТаблиц", СтрокаСписокТаблиц);
		Результат.Вставить("СписокТаблиц", СписокТаблиц);
		Результат.Вставить("ТекстОповещения", );
		Результат.Вставить("ПояснениеОповещения", );
		Результат.Вставить("ЕстьДанныеДляЗаполнения", Ложь);
		Результат.Вставить("Сводно", ДокументОбъект.Сводно);
		Результат.Вставить("ЗаполнятьАналитики", Истина);
		
		ЗаполнениеПослеВыполненияДлительнойОперации(ДокументОбъект, Результат);
		
		Если ДокументОбъект.НачисленнаяЗарплатаИВзносы.Количество() = 0 И
			ДокументОбъект.НачисленныйНДФЛ.Количество() = 0 И
			ДокументОбъект.УдержаннаяЗарплата.Количество() = 0 И
			ДокументОбъект.НачисленныеПроцентыПоЗаймам.Количество() = 0 Тогда
			
			Продолжить;
		КонецЕсли;
		
		ДокументОбъект.Записать(РежимЗаписиДокумента.Запись);
		
		Если ДокументОбъект.ПроверитьЗаполнение() Тогда
			ДокументОбъект.Записать(РежимЗаписиДокумента.Проведение);
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

Функция КолонкиВзносов(ВключатьФССНС = Истина) Экспорт
	
	Колонки = Новый Массив;
	
	Колонки.Добавить("ВзносыПоЕдиномуТарифу");
	
	Колонки.Добавить("ФФОМС");
	Колонки.Добавить("ТФОМС");
	Колонки.Добавить("ФСС");
	
	Колонки.Добавить("ПФРСтраховая");
	Колонки.Добавить("ПФРНакопительная");
	Колонки.Добавить("ПФРПоСуммарномуТарифу");
	Колонки.Добавить("ПФРДоПредельнойВеличины");
	Колонки.Добавить("ПФРСПревышения");
	Колонки.Добавить("ПФРНаДоплатуЛетчикам");
	Колонки.Добавить("ПФРНаДоплатуШахтерам");
	Колонки.Добавить("ПФРЗаЗанятыхНаПодземныхИВредныхРаботах");
	Колонки.Добавить("ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах");
	Колонки.Добавить("ПФРЗаЗанятыхНаПодземныхИВредныхРаботахБезСпецОценки");
	Колонки.Добавить("ПФРЗаЗанятыхНаПодземныхИВредныхРаботахСпецОценка");
	Колонки.Добавить("ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахБезСпецОценки");
	Колонки.Добавить("ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахСпецОценка");
	
	Колонки.Добавить("ОПСпоМеждународнымДоговорам");
	Колонки.Добавить("ОПСпоМеждународнымДоговорамСПревышения");
	Колонки.Добавить("ОМСпоМеждународнымДоговорам");
	Колонки.Добавить("ОМСпоМеждународнымДоговорамСПревышения");
	Колонки.Добавить("ОССпоМеждународнымДоговорам");
	Колонки.Добавить("ОССпоМеждународнымДоговорамСПревышения");
	
	Если ВключатьФССНС Тогда
		Колонки.Добавить("ФССНесчастныеСлучаи");
	КонецЕсли;
	
	Возврат Колонки;
	
КонецФункции

// Возвращает строку с наименованием колонок взносов, через запятую.
//
// Возвращаемое значение:
//   Строка - строка колонок для суммирования, перечисленных через запятую.
//
Функция КолонкиДляСуммирования(ВключатьФССНС = Истина) Экспорт
	
	Возврат СтрСоединить(КолонкиВзносов(ВключатьФССНС), ",");
	
КонецФункции

// Процедура заполняет структуру данных для заполнения документа отражения зарплаты.
//
// Параметры:
//   СтруктураПараметров - Структура - параметры заполнения, содержит имена таблиц, организацию и период регистрации.
//   АдресХранилища - Строка - Адрес хранилища для помещения результата заполнения.
//
Процедура ПодготовитьДанныеДляЗаполнения(СтруктураПараметров, АдресХранилища) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	Если ОтражениеЗарплатыВФинансовомУчетеУП.ИспользоватьДокументОтражениеЗарплатыДляСписанияРезервовОтпусков(СтруктураПараметров.ПериодРегистрации) Тогда
		
		ДанныеДляЗаполнения = ОтражениеЗарплатыВБухучетеРасширенный.ДанныеДляЗаполненияТаблицДокумента(СтруктураПараметров);
		
	Иначе
		
		ДанныеДляЗаполнения = ОтражениеЗарплатыВБухучете.ДанныеДляОтраженияЗарплатыВБухучете(
			СтруктураПараметров.Организация,
			СтруктураПараметров.ПериодРегистрации);
		
		ВыделитьОтпускаЗаСчетОценочныхОбязательств(ДанныеДляЗаполнения.НачисленнаяЗарплатаИВзносы, СтруктураПараметров);
		
		Если ОбщегоНазначения.ПодсистемаСуществует("ЗарплатаКадрыПриложения.ОрганизационнаяСтруктура") Тогда
			Модуль = ОбщегоНазначения.ОбщийМодуль("ОрганизационнаяСтруктура");
			Модуль.ДополнитьДанныеДокументаМестомВСтруктуреПредприятия(ДанныеДляЗаполнения, "НачисленнаяЗарплатаИВзносы,УдержаннаяЗарплата");
		КонецЕсли;
		
	КонецЕсли;
	
	ИменаТаблиц = Новый Массив;
	ИменаТаблиц.Добавить("НачисленнаяЗарплатаИВзносы");
	ИменаТаблиц.Добавить("НачисленныйНДФЛ");
	ИменаТаблиц.Добавить("УдержаннаяЗарплата");
	
	Для Каждого ИмяТаблицы Из ИменаТаблиц Цикл
		
		Колонка = ДанныеДляЗаполнения[ИмяТаблицы].Колонки.Найти("МестоВСтруктуреПредприятия");
		Если Колонка <> Неопределено Тогда
			Колонка.Имя = "ПодразделениеПредприятия";
		Иначе
			ДанныеДляЗаполнения[ИмяТаблицы].Колонки.Добавить(
				"ПодразделениеПредприятия", Новый ОписаниеТипов("СправочникСсылка.СтруктураПредприятия"));
		КонецЕсли;
		
		Колонка = ДанныеДляЗаполнения[ИмяТаблицы].Колонки.Найти("Подразделение");
		Если Колонка <> Неопределено Тогда
			ДанныеДляЗаполнения[ИмяТаблицы].Колонки.Удалить(Колонка);
		КонецЕсли;
		
	КонецЦикла;
	
	ЗаполнитьПодразделениеПредприятияНачисленоСдельно(ДанныеДляЗаполнения.НачисленнаяЗарплатаИВзносы, СтруктураПараметров);
	
	РезультатЗаполнения = Новый Структура("РезультатОтраженияЗарплаты", ДанныеДляЗаполнения);
	
	ПоместитьВоВременноеХранилище(РезультатЗаполнения, АдресХранилища);
	
КонецПроцедуры

// Процедура дополнительной обработки данных перед отражением в учете.
// 
// Параметры:
//   Объект - ДанныеФормыСтруктура, Структура - объект, в который будет помещен результат
//   Параметры - Структура - дополнительные параметры обработки
//   ЗаполнитьСводнуюТаблицу - Булево - Истина, если требуется заполнить сводную таблицу начислений.
//
Процедура ЗаполнениеПослеВыполненияДлительнойОперации(Объект, Параметры, ЗаполнитьСводнуюТаблицу = Истина) Экспорт
	
	СтруктураДанных = ПолучитьИзВременногоХранилища(Параметры.АдресХранилища);
	Если ТипЗнч(СтруктураДанных) <> Тип("Структура") Тогда
		Возврат;
	КонецЕсли;
	
	РезультатОтраженияЗарплаты = Неопределено;
	Если СтруктураДанных.Свойство("РезультатОтраженияЗарплаты", РезультатОтраженияЗарплаты) Тогда
		
		Параметры.ТекстОповещения = НСтр("ru = 'Заполнено строк';
										|en = 'Lines filled'");
		
		Если РезультатОтраженияЗарплаты.Свойство("НачисленнаяЗарплатаИВзносы") И РезультатОтраженияЗарплаты.НачисленнаяЗарплатаИВзносы.Количество() > 0
			И СтрНайти(Параметры.СтрокаСписокТаблиц, "НачисленнаяЗарплатаИВзносы") > 0 Тогда
			
			КолонкиВзносов = КолонкиВзносов();
			
			Для Каждого Строка Из РезультатОтраженияЗарплаты.НачисленнаяЗарплатаИВзносы Цикл
				
				НоваяСтрока = Объект.НачисленнаяЗарплатаИВзносыПоФизлицам.Добавить();
				ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
				
				НоваяСтрока.ВзносыВсего = 0;
				Для Каждого Колонка Из КолонкиВзносов Цикл
					НоваяСтрока.ВзносыВсего = НоваяСтрока.ВзносыВсего + НоваяСтрока[Колонка];
				КонецЦикла;
				
				Если НоваяСтрока.Сумма = 0 И НоваяСтрока.ВзносыВсего = 0 Тогда
					Объект.НачисленнаяЗарплатаИВзносыПоФизлицам.Удалить(НоваяСтрока);
					Продолжить;
				КонецЕсли;
				
				НоваяСтрока.СпособРасчетов = Строка.СтатьяРасходов.СпособРасчетовСФизическимиЛицами;
				Если Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы Тогда
					НоваяСтрока.СпособОтраженияЗарплатыВБухучете = Справочники.СпособыОтраженияЗарплатыВБухУчете.ПустаяСсылка();
				КонецЕсли;
				
			КонецЦикла;
			
			Если ЗаполнитьСводнуюТаблицу Тогда
				
				КолонкиГруппировки = "ПодразделениеПредприятия, ВидОперации, СпособРасчетов,
					|СпособОтраженияЗарплатыВБухучете, Резерв, РезервБУ, РезервНУ, ОблагаетсяЕНВД, НеОблагаетсяНДФЛ";
				КолонкиСуммирования = "Сумма, ВзносыВсего," + СтрСоединить(КолонкиВзносов, ",");
				
				Если Параметры.Сводно Тогда
					КолонкиГруппировки = "ВидНачисленияОплатыТрудаДляНУ, " + КолонкиГруппировки;
				КонецЕсли;
				
				ТаблицаИтоги = Объект.НачисленнаяЗарплатаИВзносыПоФизлицам.Выгрузить(, КолонкиГруппировки + "," + КолонкиСуммирования);
				ТаблицаИтоги.Свернуть(КолонкиГруппировки, КолонкиСуммирования);
				
				ТаблицаИтоги.Сортировать("ПодразделениеПредприятия");
				
				ОбщегоНазначенияКлиентСервер.ДополнитьТаблицу(ТаблицаИтоги, Объект.НачисленнаяЗарплатаИВзносы);
				
				Если Объект.НачисленнаяЗарплатаИВзносы.Количество() > 0 Тогда
					
					Параметры.ЕстьДанныеДляЗаполнения = Истина;
					
					Параметры.ПояснениеОповещения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = 'Начисления: %1';
							|en = 'Earnings: %1'"), Объект.НачисленнаяЗарплатаИВзносы.Количество());
					
				КонецЕсли;
				
				Если Параметры.Сводно Тогда
					Объект.НачисленнаяЗарплатаИВзносыПоФизлицам.Очистить();
				КонецЕсли;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если РезультатОтраженияЗарплаты.Свойство("НачисленныйНДФЛ") И РезультатОтраженияЗарплаты.НачисленныйНДФЛ.Количество() > 0 
			И СтрНайти(Параметры.СтрокаСписокТаблиц, "НачисленныйНДФЛ") Тогда
			
			СписокКолонок = "ПодразделениеПредприятия, ВидОперации, СтатьяРасходов, РегистрацияВНалоговомОргане";
			
			Если Не Параметры.Сводно Тогда
				СписокКолонок = "ФизическоеЛицо, " + СписокКолонок;
			КонецЕсли;
			
			ТаблицаИтогиНДФЛ = РезультатОтраженияЗарплаты.НачисленныйНДФЛ.Скопировать(, "Сумма, " + СписокКолонок);
			ТаблицаИтогиНДФЛ.Свернуть(СписокКолонок, "Сумма");
			ТаблицаИтогиНДФЛ.Сортировать(СписокКолонок);
			
			Для Каждого Строка Из ТаблицаИтогиНДФЛ Цикл
				
				Если Строка.Сумма = 0 Тогда
					Продолжить;
				КонецЕсли;
				
				// Данные по НДФЛ с дивидендов исключаются т.к. дивиденды и НДФЛ с них начисляет отдельный документ.
				Если Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.НФДЛДивидендыСотрудникам 
					Или Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.НФДЛДивиденды Тогда
					Продолжить;
				КонецЕсли;
				
				НоваяСтрока = Объект.НачисленныйНДФЛ.Добавить();
				ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
				НоваяСтрока.СпособРасчетов = Строка.СтатьяРасходов.СпособРасчетовСФизическимиЛицами;
				
			КонецЦикла;
			
			Если Объект.НачисленныйНДФЛ.Количество() > 0 Тогда
				
				Если ЗначениеЗаполнено(Параметры.ПояснениеОповещения) Тогда
					Параметры.ПояснениеОповещения = Параметры.ПояснениеОповещения + СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = ', НДФЛ: %1';
							|en = ', personal income tax: %1'"),
						Объект.НачисленныйНДФЛ.Количество());
				Иначе
					Параметры.ПояснениеОповещения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = 'НДФЛ: %1';
							|en = 'Personal income tax: %1'"),
						Объект.НачисленныйНДФЛ.Количество());
				КонецЕсли;
				
				Параметры.ЕстьДанныеДляЗаполнения = Истина;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если РезультатОтраженияЗарплаты.Свойство("ВыплатаЗаСчетРезерва") И РезультатОтраженияЗарплаты.ВыплатаЗаСчетРезерва.Количество() > 0
			И СтрНайти(Параметры.СтрокаСписокТаблиц, "ВыплатаЗаСчетРезервов") Тогда
			
			Для Каждого Строка Из РезультатОтраженияЗарплаты.ВыплатаЗаСчетРезерва Цикл
				ЗаполнитьЗначенияСвойств(Объект.ВыплатаЗаСчетРезервов.Добавить(), Строка);
			КонецЦикла;
			
			Если Объект.ВыплатаЗаСчетРезервов.Количество() > 0 Тогда
				
				Если ЗначениеЗаполнено(Параметры.ПояснениеОповещения) Тогда
					Параметры.ПояснениеОповещения = Параметры.ПояснениеОповещения + СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = ', отпуска за счет резерва: %1';
							|en = ', leave at reserve expense: %1'"),
						Объект.ВыплатаЗаСчетРезервов.Количество());
				Иначе
					Параметры.ПояснениеОповещения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = 'Отпуска за счет резерва: %1';
							|en = 'Leave at reserve expense: %1'"),
						Объект.ВыплатаЗаСчетРезервов.Количество());
				КонецЕсли;
				
				Параметры.ЕстьДанныеДляЗаполнения = Истина;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если ТипЗнч(Объект) = Тип("Структура") Тогда
			УдержаннаяЗарплата = Объект.УдержаннаяЗарплата.Скопировать();
			НачисленныеПроцентыПоЗаймам = Объект.НачисленныеПроцентыПоЗаймам.Скопировать();
		Иначе
			УдержаннаяЗарплата = Объект.УдержаннаяЗарплата.Выгрузить();
			НачисленныеПроцентыПоЗаймам = Объект.НачисленныеПроцентыПоЗаймам.Выгрузить();
		КонецЕсли;
		
		Если РезультатОтраженияЗарплаты.Свойство("УдержаннаяЗарплата") И РезультатОтраженияЗарплаты.УдержаннаяЗарплата.Количество() > 0
			И СтрНайти(Параметры.СтрокаСписокТаблиц, "УдержаннаяЗарплата") Тогда
			
			Для Каждого Строка Из РезультатОтраженияЗарплаты.УдержаннаяЗарплата Цикл
				
				Если Строка.Сумма = 0 Тогда
					Продолжить;
				КонецЕсли;
				
				Если Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.НачисленоПроцентовПоЗайму Тогда
					ЗаполнитьЗначенияСвойств(НачисленныеПроцентыПоЗаймам.Добавить(), Строка);
				Иначе
					НоваяСтрока = УдержаннаяЗарплата.Добавить();
					ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка);
					НоваяСтрока.СпособРасчетов = Строка.СтатьяРасходов.СпособРасчетовСФизическимиЛицами;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;
		
		ТаблицыДляЗаполненияСтатейПоУмолчанию = "";
		
		Если Параметры.СписокТаблиц.НайтиПоЗначению("УдержаннаяЗарплата") <> Неопределено Тогда
			
			Если УдержаннаяЗарплата.Количество() > 0 Тогда
				
				Если ТипЗнч(Объект) = Тип("Структура") Тогда
					Объект.УдержаннаяЗарплата = УдержаннаяЗарплата;
				Иначе
					Объект.УдержаннаяЗарплата.Загрузить(УдержаннаяЗарплата);
				КонецЕсли;
				
				Если Параметры.ЗаполнятьАналитики Тогда
					ТаблицыДляЗаполненияСтатейПоУмолчанию = "УдержаннаяЗарплата";
				КонецЕсли;
				
				Если ЗначениеЗаполнено(Параметры.ПояснениеОповещения) Тогда
					Параметры.ПояснениеОповещения = Параметры.ПояснениеОповещения + СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = ', удержания: %1';
							|en = ', deductions: %1'"),
						Объект.УдержаннаяЗарплата.Количество());
				Иначе
					Параметры.ПояснениеОповещения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = 'Удержания: %1';
							|en = 'Deductions: %1'"),
						Объект.УдержаннаяЗарплата.Количество());
				КонецЕсли;
				
				Параметры.ЕстьДанныеДляЗаполнения = Истина;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если Параметры.СписокТаблиц.НайтиПоЗначению("НачисленныеПроцентыПоЗаймам") <> Неопределено Тогда
			
			Если НачисленныеПроцентыПоЗаймам.Количество() > 0 Тогда
				
				Если ТипЗнч(Объект) = Тип("Структура") Тогда
					Объект.НачисленныеПроцентыПоЗаймам = НачисленныеПроцентыПоЗаймам;
				Иначе
					Объект.НачисленныеПроцентыПоЗаймам.Загрузить(НачисленныеПроцентыПоЗаймам);
				КонецЕсли;
				
				Если Параметры.ЗаполнятьАналитики Тогда
					ТаблицыДляЗаполненияСтатейПоУмолчанию = ТаблицыДляЗаполненияСтатейПоУмолчанию + ", " + "НачисленныеПроцентыПоЗаймам";
				КонецЕсли;
				
				Если ЗначениеЗаполнено(Параметры.ПояснениеОповещения) Тогда
					Параметры.ПояснениеОповещения = Параметры.ПояснениеОповещения + СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = ', проценты по займам: %1';
							|en = ', loan interest: %1'"),
						Объект.НачисленныеПроцентыПоЗаймам.Количество());
				Иначе
					Параметры.ПояснениеОповещения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
						НСтр("ru = 'Проценты по займам: %1';
							|en = 'Loan interest: %1'"),
						Объект.НачисленныеПроцентыПоЗаймам.Количество());
				КонецЕсли;
				
				Параметры.ЕстьДанныеДляЗаполнения = Истина;
				
			КонецЕсли;
			
		КонецЕсли;
		
		Если ЗначениеЗаполнено(ТаблицыДляЗаполненияСтатейПоУмолчанию) Тогда
			ЗаполнитьСтатьиАналитикуРасходовПоУмолчанию(Объект, ТаблицыДляЗаполненияСтатейПоУмолчанию);
		КонецЕсли;
		
	КонецЕсли;
	
	Если Не Параметры.ЕстьДанныеДляЗаполнения Тогда
		Параметры.ТекстОповещения = НСтр("ru = 'Начисления не заполнены';
										|en = 'Earnings are not filled'");
		Параметры.ПояснениеОповещения = НСтр("ru = 'В информационной базе отсутствуют данные для заполнения.';
											|en = 'There is no data to fill the infobase.'");
	КонецЕсли;
	
КонецПроцедуры

//	Создает в менеджере таблицу с аналитикой других документов
//
//	Параметры:
//		МенеджерВременныхТаблиц - МенеджерВременныхТаблиц - менеджер,
//		ТекущийДокумент - ДокументСсылка.ОтражениеЗарплатыВФинансовомУчете - текущий документ,
//		ДатаАктуальности - Дата - дата, до которой обрабатываются документы,
//		ИмяТаблицы - Строка - имя таблицы, для которой строится аналитика.
//
Процедура СоздатьВТАналитикаДругихДокументов(МенеджерВременныхТаблиц, ТекущийДокумент, ДатаАктуальности, ИмяТаблицы = "") Экспорт
	
	// Получаем последние используемые значения по совпадающим сочетаниям заполненных полей.
	
	ТекстЗапросаУдержаннаяЗарплата = 
	"ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.АлиментыПрочиеИсполнительныеЛисты) КАК ВидОперации,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоИсполнительнымДокументамРаботников) КАК СчетУчета,
	|	ЛОЖЬ КАК АналитикаПоРаботникам,
	|	ИСТИНА КАК АналитикаПоКонтрагентам
	|ПОМЕСТИТЬ ВТСчетаПоОперациям
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозмещениеУщерба),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВозмещениюМатериальногоУщерба),
	|	ИСТИНА,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВознаграждениеПлатежногоАгента),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимУдержаниямРаботников),
	|	ЛОЖЬ,
	|	ИСТИНА
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДобровольныеВзносыВНПФ),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимУдержаниямРаботников),
	|	ЛОЖЬ,
	|	ИСТИНА
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДСВ),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ДОБР_сотр),
	|	ЛОЖЬ,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.Профвзносы),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимУдержаниямРаботников),
	|	ЛОЖЬ,
	|	ИСТИНА
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПрочиеУдержания),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимУдержаниямРаботников),
	|	ЛОЖЬ,
	|	ИСТИНА
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеЗаОтпуск),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям),
	|	ИСТИНА,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПодотчетнымиЛицами),
	|	ИСТИНА,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеПоПрочимОперациямСРаботниками),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям),
	|	ИСТИНА,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПогашениеЗаймов),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПредоставленнымЗаймам),
	|	ИСТИНА,
	|	ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПроцентыПоЗайму),
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПредоставленнымЗаймам),
	|	ИСТИНА,
	|	ЛОЖЬ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	|	НезаполненнаяАналитика.ВидОперации КАК ВидОперации,
	|	Удержания.СтатьяАктивовПассивов КАК СтатьяАктивовПассивов,
	|	Удержания.АналитикаАктивовПассивов КАК АналитикаАктивовПассивов,
	|	НезаполненнаяАналитика.ФизическоеЛицо,
	|	НезаполненнаяАналитика.ПодразделениеПредприятия,
	|	Документы.Дата КАК Дата,
	|	Удержания.НастройкаСчетовУчета.СчетУчета КАК СчетУчета,
	|	Удержания.НастройкаСчетовУчета.Субконто1 КАК Субконто1,
	|	Удержания.НастройкаСчетовУчета.Субконто2 КАК Субконто2,
	|	Удержания.НастройкаСчетовУчета.Субконто3 КАК Субконто3,
	|	Удержания.Контрагент
	|ПОМЕСТИТЬ ВТАналитикаДругихДокументовУдержания
	|ИЗ
	|	ВТНезаполненнаяАналитика КАК НезаполненнаяАналитика
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержания
	|			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ОтражениеЗарплатыВФинансовомУчете КАК Документы
	|			ПО Удержания.Ссылка = Документы.Ссылка
	|		ПО НезаполненнаяАналитика.ВидОперации = Удержания.ВидОперации
	|			И Удержания.ФизическоеЛицо = НезаполненнаяАналитика.ФизическоеЛицо
	|			И Удержания.ПодразделениеПредприятия = НезаполненнаяАналитика.ПодразделениеПредприятия
	|			И НезаполненнаяАналитика.Контрагент = Удержания.Контрагент
	|ГДЕ
	|	Удержания.Ссылка <> &ТекущийДокумент
	|	И Документы.ПериодРегистрации <= &ДатаАктуальности
	|	И Документы.Проведен
	|	И Удержания.СтатьяАктивовПассивов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ВТАналитикаДругихДокументовУдержания.ВидОперации,
	|	ВТАналитикаДругихДокументовУдержания.ФизическоеЛицо,
	|	ВТАналитикаДругихДокументовУдержания.ПодразделениеПредприятия,
	|	МАКСИМУМ(ВТАналитикаДругихДокументовУдержания.Дата) КАК Дата,
	|	ВТАналитикаДругихДокументовУдержания.Контрагент
	|ПОМЕСТИТЬ ВТЕдинственныеЗначенияСтатьи
	|ИЗ
	|	ВТАналитикаДругихДокументовУдержания КАК ВТАналитикаДругихДокументовУдержания
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТАналитикаДругихДокументовУдержания.ФизическоеЛицо,
	|	ВТАналитикаДругихДокументовУдержания.ПодразделениеПредприятия,
	|	ВТАналитикаДругихДокументовУдержания.ВидОперации,
	|	ВТАналитикаДругихДокументовУдержания.Контрагент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТАналитикаДругихДокументовУдержания.ВидОперации,
	|	ВТАналитикаДругихДокументовУдержания.ФизическоеЛицо,
	|	ВТАналитикаДругихДокументовУдержания.ПодразделениеПредприятия,
	|	ВТАналитикаДругихДокументовУдержания.СтатьяАктивовПассивов,
	|	ВТАналитикаДругихДокументовУдержания.АналитикаАктивовПассивов,
	|	ВТАналитикаДругихДокументовУдержания.СчетУчета КАК СчетУчета,
	|	ВТАналитикаДругихДокументовУдержания.Субконто1 КАК Субконто1,
	|	ВТАналитикаДругихДокументовУдержания.Субконто2 КАК Субконто2,
	|	ВТАналитикаДругихДокументовУдержания.Субконто3 КАК Субконто3,
	|	ВТАналитикаДругихДокументовУдержания.Контрагент
	|ПОМЕСТИТЬ ВТЗаполненнаяСтатьяПассивов
	|ИЗ
	|	ВТАналитикаДругихДокументовУдержания КАК ВТАналитикаДругихДокументовУдержания
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТЕдинственныеЗначенияСтатьи КАК ВТЕдинственныеЗначенияСтатьи
	|		ПО ВТЕдинственныеЗначенияСтатьи.ВидОперации = ВТАналитикаДругихДокументовУдержания.ВидОперации
	|			И ВТЕдинственныеЗначенияСтатьи.ФизическоеЛицо = ВТАналитикаДругихДокументовУдержания.ФизическоеЛицо
	|			И ВТЕдинственныеЗначенияСтатьи.ПодразделениеПредприятия = ВТАналитикаДругихДокументовУдержания.ПодразделениеПредприятия
	|			И ВТЕдинственныеЗначенияСтатьи.Дата = ВТАналитикаДругихДокументовУдержания.Дата
	|			И ВТАналитикаДругихДокументовУдержания.Контрагент = ВТЕдинственныеЗначенияСтатьи.Контрагент
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	НезаполненнаяАналитика.ВидОперации КАК ВидОперации,
	|	НезаполненнаяАналитика.ФизическоеЛицо,
	|	НезаполненнаяАналитика.ПодразделениеПредприятия,
	|	ВТЗаполненнаяСтатьяПассивов.СтатьяАктивовПассивов,
	|	ВТЗаполненнаяСтатьяПассивов.АналитикаАктивовПассивов,
	|	ВЫБОР
	|		КОГДА ВТЗаполненнаяСтатьяПассивов.СчетУчета ЕСТЬ NULL 
	|			ТОГДА ВТСчетаПоОперациям.СчетУчета
	|		ИНАЧЕ ВТЗаполненнаяСтатьяПассивов.СчетУчета
	|	КОНЕЦ КАК СчетУчета,
	|	ВЫБОР
	|		КОГДА ВТЗаполненнаяСтатьяПассивов.СчетУчета ЕСТЬ NULL 
	|				И ВТСчетаПоОперациям.АналитикаПоРаботникам
	|			ТОГДА НезаполненнаяАналитика.ФизическоеЛицо
	|		КОГДА ВТЗаполненнаяСтатьяПассивов.СчетУчета ЕСТЬ NULL 
	|				И ВТСчетаПоОперациям.АналитикаПоКонтрагентам
	|			ТОГДА НезаполненнаяАналитика.Контрагент
	|		ИНАЧЕ ВТЗаполненнаяСтатьяПассивов.Субконто1
	|	КОНЕЦ КАК Субконто1,
	|	ВТЗаполненнаяСтатьяПассивов.Субконто2,
	|	ВТЗаполненнаяСтатьяПассивов.Субконто3
	|ПОМЕСТИТЬ ЗаполненнаяСтатьяПассивов
	|ИЗ
	|	ВТНезаполненнаяАналитика КАК НезаполненнаяАналитика
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТЗаполненнаяСтатьяПассивов КАК ВТЗаполненнаяСтатьяПассивов
	|		ПО НезаполненнаяАналитика.ВидОперации = ВТЗаполненнаяСтатьяПассивов.ВидОперации
	|			И НезаполненнаяАналитика.ФизическоеЛицо = ВТЗаполненнаяСтатьяПассивов.ФизическоеЛицо
	|			И НезаполненнаяАналитика.ПодразделениеПредприятия = ВТЗаполненнаяСтатьяПассивов.ПодразделениеПредприятия
	|			И НезаполненнаяАналитика.Контрагент = ВТЗаполненнаяСтатьяПассивов.Контрагент
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТСчетаПоОперациям КАК ВТСчетаПоОперациям
	|		ПО НезаполненнаяАналитика.ВидОперации = ВТСчетаПоОперациям.ВидОперации
	|;";
	
	ТекстЗапросаНачисленныеПроцентыПоЗаймам = 
	"ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	|	Документы.Дата КАК Дата,
	|	Проценты.ФизическоеЛицо КАК ФизическоеЛицо,
	|	Проценты.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
	|	Проценты.СтатьяДоходов КАК СтатьяДоходов,
	|	Проценты.АналитикаДоходов КАК АналитикаДоходов
	|ПОМЕСТИТЬ ВТАналитикаДругихДокументовПроценты
	|ИЗ
	|	ВТНезаполненнаяАналитикаДоходов КАК ВТНезаполненнаяАналитикаДоходов
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК Проценты
	|			ЛЕВОЕ СОЕДИНЕНИЕ Документ.ОтражениеЗарплатыВФинансовомУчете КАК Документы
	|			ПО Проценты.Ссылка = Документы.Ссылка
	|		ПО ВТНезаполненнаяАналитикаДоходов.ФизическоеЛицо = Проценты.ФизическоеЛицо
	|			И ВТНезаполненнаяАналитикаДоходов.ПодразделениеПредприятия = Проценты.ПодразделениеПредприятия
	|ГДЕ
	|	Проценты.Ссылка <> &ТекущийДокумент
	|	И Документы.ПериодРегистрации <= &ДатаАктуальности
	|	И Документы.Проведен
	|	И Проценты.СтатьяДоходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиДоходов.ПустаяСсылка)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТАналитикаДругихДокументовПроценты.ФизическоеЛицо,
	|	ВТАналитикаДругихДокументовПроценты.ПодразделениеПредприятия,
	|	МАКСИМУМ(ВТАналитикаДругихДокументовПроценты.Дата) КАК Дата
	|ПОМЕСТИТЬ ВТЕдинственноеЗначениеСтатьиДоходов
	|ИЗ
	|	ВТАналитикаДругихДокументовПроценты КАК ВТАналитикаДругихДокументовПроценты
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТАналитикаДругихДокументовПроценты.ФизическоеЛицо,
	|	ВТАналитикаДругихДокументовПроценты.ПодразделениеПредприятия
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТЕдинственноеЗначениеСтатьиДоходов.ФизическоеЛицо,
	|	ВТЕдинственноеЗначениеСтатьиДоходов.ПодразделениеПредприятия,
	|	ВТАналитикаДругихДокументовПроценты.СтатьяДоходов,
	|	ВТАналитикаДругихДокументовПроценты.АналитикаДоходов
	|ПОМЕСТИТЬ ВТЗаполненнаяСтатьяДоходов
	|ИЗ
	|	ВТЕдинственноеЗначениеСтатьиДоходов КАК ВТЕдинственноеЗначениеСтатьиДоходов
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТАналитикаДругихДокументовПроценты КАК ВТАналитикаДругихДокументовПроценты
	|		ПО ВТЕдинственноеЗначениеСтатьиДоходов.ФизическоеЛицо = ВТАналитикаДругихДокументовПроценты.ФизическоеЛицо
	|			И ВТЕдинственноеЗначениеСтатьиДоходов.Дата = ВТАналитикаДругихДокументовПроценты.Дата
	|			И ВТЕдинственноеЗначениеСтатьиДоходов.ПодразделениеПредприятия = ВТАналитикаДругихДокументовПроценты.ПодразделениеПредприятия";
	
	Если ИмяТаблицы = "" Тогда
		ТекстЗапроса = ТекстЗапросаУдержаннаяЗарплата + ТекстЗапросаНачисленныеПроцентыПоЗаймам;
	ИначеЕсли ИмяТаблицы = "УдержаннаяЗарплата" Тогда
		ТекстЗапроса = ТекстЗапросаУдержаннаяЗарплата;
	Иначе
		ТекстЗапроса = ТекстЗапросаНачисленныеПроцентыПоЗаймам;
	КонецЕсли;
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	Запрос.УстановитьПараметр("ТекущийДокумент", ТекущийДокумент);
	Запрос.УстановитьПараметр("ДатаАктуальности", ДатаАктуальности);
	Запрос.Выполнить();
	
КонецПроцедуры

// Возвращает текст запроса для отражения в регл. учете.
// 
// Возвращаемое значение:
//   Строка - текст отражения в регл. учете.
//
Функция ТекстОтраженияВРеглУчете() Экспорт

#Область ТекстЗапросаНачисленоПоСтатьям
	ТекстЗапросаНачисленоПоСтатьям = "
	// зарплата и взносы на расходы по статьям
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	СУММА(Строки.Сумма) КАК Сумма,
	|	СУММА(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	Строки.СтатьяРасходов КАК АналитикаУчетаДт,
	|	Строки.Подразделение КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	Строки.СтатьяРасходов КАК СубконтоДт1,
	|	Строки.АналитикаРасходов КАК СубконтоДт2,
	|	ВЫБОР КОГДА СтатьиСтроительства.Ссылка ЕСТЬ НЕ NULL ТОГДА
	|			ВЫБОР 
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	КОНЕЦ КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	СУММА(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление заработной платы""
	|		ИНАЧЕ ""Начисление взносов с заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата =
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиСтроительства
	|	ПО
	|		Строки.СтатьяРасходов = СтатьиСтроительства.Ссылка
	|		И СтатьиСтроительства.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаВнеоборотныеАктивы)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ 
	|		Справочник.ОбъектыСтроительства КАК ОбъектыСтроительства
	|	ПО 
	|		ОбъектыСтроительства.Ссылка = Строки.АналитикаРасходов
	|ГДЕ
	|	Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	И НЕ (Строки.РезервБУ ИЛИ Строки.РезервНУ)
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Операция.Организация,
	|	Строки.АналитикаРасходов,
	|	ВЫБОР КОГДА СтатьиСтроительства.Ссылка ЕСТЬ НЕ NULL ТОГДА
	|			ВЫБОР 
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	КОНЕЦ,
	|	Строки.СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ,
	|	Строки.СубконтоКт2,
	|	Строки.СтатьяРасходов,
	|	Строки.Подразделение,
	|	Строки.НаправлениеДеятельности,
	|	Строки.СтатьяРасходов,
	|	Строки.Подразделение,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// зарплата и взносы на прочие операции (устаревшее)
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	СУММА(Строки.Сумма) КАК Сумма,
	|	СУММА(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	СУММА(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление заработной платы""
	|		ИНАЧЕ ""Начисление взносов с заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	И НЕ (Строки.РезервБУ ИЛИ Строки.РезервНУ)
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Операция.Организация,
	|	Строки.СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ,
	|	Строки.СубконтоКт2,
	|	Строки.Подразделение,
	|	Строки.Подразделение,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// зарплата и взносы на пассивы
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|	
	|	СУММА(Строки.Сумма) КАК Сумма,
	|	СУММА(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеАктивыПассивы) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|	
	|	Строки.СчетУчета КАК СчетДт,
	|	Строки.Субконто1 КАК СубконтоДт1,
	|	Строки.Субконто2 КАК СубконтоДт2,
	|	Строки.Субконто3 КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	СУММА(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление заработной платы""
	|		ИНАЧЕ ""Начисление взносов с заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	И НЕ (Строки.РезервБУ ИЛИ Строки.РезервНУ)
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Операция.Организация,
	|	Строки.АналитикаРасходов,
	|	Строки.СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ,
	|	Строки.СубконтоКт2,
	|	Строки.СтатьяРасходов,
	|	Строки.Подразделение,
	|	Строки.СтатьяРасходов,
	|	Строки.НаправлениеДеятельности,
	|	Строки.СчетУчета,
	|	Строки.Субконто1,
	|	Строки.Субконто2,
	|	Строки.Субконто3,
	|	Строки.ТипНалога
	|";
	
#КонецОбласти

// Отпуск за счет обязательств и резервов: одинаковое отражение в бухгалтерском и налоговом учетах.
#Область ТекстЗапросаЕжегодныйОтпускОценочныеОбязательстваИРезервы
	ТекстЗапросаЕжегодныйОтпускОценочныеОбязательстваИРезервы = "
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	НЕОПРЕДЕЛЕНО КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	
	|	ВЫБОР КОГДА Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам)
	|	КОНЕЦ КАК СчетДт,
	
	|	Строки.ВидРезерва КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""Отпуск за счет обязательств и резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы))
	|	ИЛИ (Строки.РезервБУ И Строки.РезервНУ)
	|";

#КонецОбласти

// Отпуск за счет обязательств: отражение резервов только в БУ, в НУ на счета затрат.
#Область ТекстЗапросаЕжегодныйОтпускОценочныеОбязательства

	ТекстЗапросаЕжегодныйОтпускОценочныеОбязательства = "
	// резервы в БУ
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	НЕОПРЕДЕЛЕНО КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	
	|	ВЫБОР КОГДА Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам)
	|	КОНЕЦ КАК СчетДт,
	
	|	Строки.ВидРезерва КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	Строки.Сумма КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет обязательств"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	(Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|	ИЛИ (Строки.РезервБУ И НЕ Строки.РезервНУ))
	|	И НЕ Строки.СтатьяРасходов В (
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка),
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка))
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	- (Строки.ПостояннаяРазница + Строки.ВременнаяРазница) КАК Сумма,
	|	- (Строки.ПостояннаяРазница + Строки.ВременнаяРазница) / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	НЕОПРЕДЕЛЕНО КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам)
	|	КОНЕЦ КАК СчетДт,
	
	|	ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков) КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	- Строки.ПостояннаяРазница КАК СуммаПРДт,
	|	- Строки.ВременнаяРазница КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВтСчета.СчетУчета КАК СчетКт,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ КАК СубконтоКт1,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ВидНачисленияОплатыТруда
	|	ИНАЧЕ
	|		НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	- Строки.ПостояннаяРазница КАК СуммаПРКт,
	|	- Строки.ВременнаяРазница КАК СуммаВРКт,
	|	""Отпуск за счет обязательств"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ОтражениеЗарплатыВФинансовомУчете КАК Строки
	|	ПО
	|		ДокументыКОтражению.Ссылка = Строки.Регистратор
	|		И НЕ Строки.Сторно
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ВтСчетаУчетаНалоговИВзносов КАК ВтСчета
	|	ПО
	|		Строки.ТипНалога = ВтСчета.ТипНалога
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперацииПоЗарплате В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в НУ по статьям
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	Строки.СтатьяРасходов КАК АналитикаУчетаДт,
	|	Строки.Подразделение КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	
	|	Строки.СтатьяРасходов КАК СубконтоДт1,
	|	Строки.АналитикаРасходов КАК СубконтоДт2,
	|	ВЫБОР КОГДА СтатьиСтроительства.Ссылка ЕСТЬ НЕ NULL ТОГДА
	|			ВЫБОР
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ 
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	КОНЕЦ КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	Строки.Сумма КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	- Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	Строки.Сумма КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	- Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет обязательств"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиСтроительства
	|	ПО
	|		Строки.СтатьяРасходов = СтатьиСтроительства.Ссылка
	|		И СтатьиСтроительства.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаВнеоборотныеАктивы)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ 
	|		Справочник.ОбъектыСтроительства КАК ОбъектыСтроительства
	|	ПО 
	|		ОбъектыСтроительства.Ссылка = Строки.АналитикаРасходов
	|ГДЕ
	|	(Строки.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|		ИЛИ (Строки.РезервБУ И НЕ Строки.РезервНУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в НУ по прочим операциям (устаревшее)
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	Строки.Сумма КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	- Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	Строки.Сумма КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	- Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет обязательств"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	(Строки.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|		ИЛИ (Строки.РезервБУ И НЕ Строки.РезервНУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в НУ на пассивы
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеАктивыПассивы) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|	
	|	Строки.СчетУчета КАК СчетДт,
	|	
	|	Строки.Субконто1 КАК СубконтоДт1,
	|	Строки.Субконто2 КАК СубконтоДт2,
	|	Строки.Субконто3 КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	Строки.Сумма КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	- Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	Строки.Сумма КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	- Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет обязательств"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	(Строки.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|		ИЛИ (Строки.РезервБУ И НЕ Строки.РезервНУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|";

#КонецОбласти

// Отпуск за счет резервов: отражение резервов только в НУ, в БУ на счета затрат
#Область ТекстЗапросаЕжегодныйОтпускРезервы
	
	ТекстЗапросаЕжегодныйОтпускРезервы = "
	// резервы в НУ
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	НЕОПРЕДЕЛЕНО КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	
	|	ВЫБОР КОГДА Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам)
	|	КОНЕЦ КАК СчетДт,
	
	|	Строки.ВидРезерва КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	Строки.Сумма КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	- Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	Строки.Сумма КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	- Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|ГДЕ
	|	Строки.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	ИЛИ (Строки.РезервНУ И НЕ Строки.РезервБУ)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// резервы в НУ по сдельным в БУ
	|ВЫБРАТЬ
	|	Строки.Регистратор КАК Ссылка,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ) КАК Период,
	|	Строки.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	0 КАК Сумма,
	|	0 КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	НЕОПРЕДЕЛЕНО КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам)
	|	КОНЕЦ КАК СчетДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков) КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	СУММА(Строки.ПостояннаяРазница + Строки.ВременнаяРазница) КАК СуммаНУДт,
	|	- СУММА(Строки.ПостояннаяРазница) КАК СуммаПРДт,
	|	- СУММА(Строки.ВременнаяРазница) КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВтСчета.СчетУчета КАК СчетКт,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ КАК СубконтоКт1,
	|
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ВидНачисленияОплатыТруда
	|	ИНАЧЕ
	|		Неопределено
	|	КОНЕЦ КАК СубконтоКт2,
	|
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	СУММА(Строки.ПостояннаяРазница + Строки.ВременнаяРазница) КАК СуммаНУКт,
	|	- СУММА(Строки.ПостояннаяРазница) КАК СуммаПРКт,
	|	- СУММА(Строки.ВременнаяРазница) КАК СуммаВРКт,
	|	""Отпуск за счет резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ОтражениеЗарплатыВФинансовомУчете КАК Строки
	|	ПО
	|		ДокументыКОтражению.Ссылка = Строки.Регистратор
	|		И НЕ Строки.Сторно
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ВтСчетаУчетаНалоговИВзносов КАК ВтСчета
	|	ПО
	|		Строки.ТипНалога = ВтСчета.ТипНалога
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = НАЧАЛОПЕРИОДА(КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ), День)
	|	
	|ГДЕ
	|	Строки.ВидОперацииПоЗарплате В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.Регистратор,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ),
	|	Строки.Организация,
	|	Строки.Подразделение,
	|	Строки.НаправлениеДеятельности,
	|	Строки.ВидРабот,
	|	Строки.ГруппаПродукции,
	|	Строки.ВидНачисленияОплатыТруда,
	|	ВтСчета.СчетУчета,
	|	Строки.ФизическоеЛицо,
	|	Строки.ВидПлатежаВГосБюджет,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в БУ по статьям
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы) КАК ВидСчетаДт,
	|	Строки.СтатьяРасходов КАК АналитикаУчетаДт,
	|	Строки.Подразделение КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	
	|	Строки.СтатьяРасходов КАК СубконтоДт1,
	|	Строки.АналитикаРасходов КАК СубконтоДт2,
	|	ВЫБОР КОГДА СтатьиСтроительства.Ссылка ЕСТЬ НЕ NULL ТОГДА
	|			ВЫБОР
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ 
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	КОНЕЦ КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиСтроительства
	|	ПО
	|		Строки.СтатьяРасходов = СтатьиСтроительства.Ссылка
	|		И СтатьиСтроительства.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаВнеоборотныеАктивы)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ 
	|		Справочник.ОбъектыСтроительства КАК ОбъектыСтроительства
	|	ПО 
	|		ОбъектыСтроительства.Ссылка = Строки.АналитикаРасходов
	|ГДЕ
	|	(Строки.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|		ИЛИ (Строки.РезервНУ И НЕ Строки.РезервБУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в БУ по прочим операциям (устаревшее)
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	(Строки.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|		ИЛИ (Строки.РезервНУ И НЕ Строки.РезервБУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы в БУ на пассивы
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеАктивыПассивы) КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|	
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|	
	|	Строки.СчетУчета КАК СчетДт,
	|	
	|	Строки.Субконто1 КАК СубконтоДт1,
	|	Строки.Субконто2 КАК СубконтоДт2,
	|	Строки.Субконто3 КАК СубконтоДт3,
	|	
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	Строки.Сумма КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.СчетКт КАК СчетКт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам И Строки.СчетКт = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		ТОГДА Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоКт1,
	|	Строки.СубконтоКт2 КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	Строки.Сумма КАК СуммаВРКт,
	|	""Отпуск за счет резервов"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		НачисленнаяЗарплатаИВзносы КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	(Строки.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|		ИЛИ (Строки.РезервНУ И НЕ Строки.РезервБУ))
	|	И Строки.ВидСчетаДт = ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|";
	
#КонецОбласти

#Область ТекстЗапросаНачисленоСдельно
	ТекстЗапросаНачисленоСдельно = "
	// прямые производственные
	|ВЫБРАТЬ
	|	Строки.Регистратор КАК Ссылка,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ) КАК Период,
	|	Строки.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.СуммаРегл) КАК Сумма,
	|	Сумма(Строки.СуммаРегл / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Производство) КАК ВидСчетаДт,
	|	Строки.ГруппаПродукции КАК АналитикаУчетаДт,
	|	Строки.Подразделение КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|	Строки.ВидРабот КАК СубконтоДт1,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.СдельнаяОплатаТруда) КАК СубконтоДт2,
	|	Строки.ГруппаПродукции КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	Сумма(Строки.СуммаРегл - Строки.ПостояннаяРазница - Строки.ВременнаяРазница) КАК СуммаНУДт,
	|	Сумма(Строки.ПостояннаяРазница) КАК СуммаПРДт,
	|	Сумма(Строки.ВременнаяРазница) КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВтСчета.СчетУчета КАК СчетКт,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ КАК СубконтоКт1,
	|
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ВидНачисленияОплатыТруда
	|	ИНАЧЕ
	|		Неопределено
	|	КОНЕЦ КАК СубконтоКт2,
	|
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.СуммаРегл) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	Сумма(Строки.СуммаРегл - Строки.ПостояннаяРазница - Строки.ВременнаяРазница) КАК СуммаНУКт,
	|	Сумма(Строки.ПостояннаяРазница) КАК СуммаПРКт,
	|	Сумма(Строки.ВременнаяРазница) КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление сдельной заработной платы""
	|		ИНАЧЕ ""Начисление взносов со сдельной заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ОтражениеЗарплатыВФинансовомУчете КАК Строки
	|	ПО
	|		ДокументыКОтражению.Ссылка = Строки.Регистратор
	|		И НЕ Строки.Сторно
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ВтСчетаУчетаНалоговИВзносов КАК ВтСчета
	|	ПО
	|		Строки.ТипНалога = ВтСчета.ТипНалога
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = НАЧАЛОПЕРИОДА(КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ), ДЕНЬ)
	|	
	|ГДЕ
	|	Строки.ВидРабот <> ЗНАЧЕНИЕ(Справочник.ВидыРаботСотрудников.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.Регистратор,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ),
	|	Строки.Организация,
	|	Строки.Подразделение,
	|	Строки.НаправлениеДеятельности,
	|	Строки.ВидРабот,
	|	Строки.ГруппаПродукции,
	|	Строки.ВидНачисленияОплатыТруда,
	|	ВтСчета.СчетУчета,
	|	Строки.ФизическоеЛицо,
	|	Строки.ВидПлатежаВГосБюджет,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// на расходы
	|ВЫБРАТЬ
	|	Строки.Регистратор КАК Ссылка,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ) КАК Период,
	|	Строки.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.СуммаРегл) КАК Сумма,
	|	Сумма(Строки.СуммаРегл / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	ВЫБОР 
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|	ИНАЧЕ
	|			ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
	|	КОНЕЦ КАК ВидСчетаДт,
	|
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			Строки.СтатьяРасходов
	|	ИНАЧЕ
	|			НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК АналитикаУчетаДт,
	|
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			Строки.Подразделение
	|	ИНАЧЕ
	|			НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетДт,
	|
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			Строки.СтатьяРасходов
	|	ИНАЧЕ
	|			НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СубконтоДт1,
	|
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			Строки.АналитикаРасходов
	|	ИНАЧЕ
	|			НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СубконтоДт2,
	|
	|	ВЫБОР
	|		КОГДА НЕ СтатьиСтроительства.Ссылка ЕСТЬ NULL ТОГДА
	|			ВЫБОР 
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперацииПоЗарплате = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ 
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	ИНАЧЕ
	|		НЕОПРЕДЕЛЕНО
	|	КОНЕЦ КАК СубконтоДт3,
	|
	|	Сумма(Строки.СуммаРегл) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВтСчета.СчетУчета КАК СчетКт,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ КАК СубконтоКт1,
	|
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ВидНачисленияОплатыТруда
	|	ИНАЧЕ
	|		Неопределено
	|	КОНЕЦ КАК СубконтоКт2,
	|
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление сдельной заработной платы""
	|		ИНАЧЕ ""Начисление взносов со сдельной заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ОтражениеЗарплатыВФинансовомУчете КАК Строки
	|	ПО
	|		ДокументыКОтражению.Ссылка = Строки.Регистратор
	|		И НЕ Строки.Сторно
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ВтСчетаУчетаНалоговИВзносов КАК ВтСчета
	|	ПО
	|		Строки.ТипНалога = ВтСчета.ТипНалога
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = НАЧАЛОПЕРИОДА(КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ), ДЕНЬ)
	|	
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиНаПрочиеАктивы
	|	ПО
	|		Строки.СтатьяРасходов = СтатьиНаПрочиеАктивы.Ссылка
	|		И СтатьиНаПрочиеАктивы.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаПрочиеАктивы)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиСтроительства
	|	ПО
	|		Строки.СтатьяРасходов = СтатьиСтроительства.Ссылка
	|		И СтатьиСтроительства.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаВнеоборотныеАктивы)
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ 
	|		Справочник.ОбъектыСтроительства КАК ОбъектыСтроительства
	|	ПО 
	|		ОбъектыСтроительства.Ссылка = Строки.АналитикаРасходов
	|ГДЕ
	|	Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.Регистратор,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ),
	|	Строки.Организация,
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
	|		ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
	|			ТОГДА Строки.СтатьяРасходов
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
	|			ТОГДА Строки.Подразделение
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
	|			ТОГДА Строки.СтатьяРасходов
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
	|			ТОГДА Строки.АналитикаРасходов
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА НЕ СтатьиСтроительства.Ссылка ЕСТЬ NULL ТОГДА
	|			ВЫБОР 
	|				КОГДА ОбъектыСтроительства.СпособСтроительства <> ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.ПустаяСсылка) 
	|					ТОГДА ОбъектыСтроительства.СпособСтроительства
	|				КОГДА Строки.ВидОперацииПоЗарплате = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоговорРаботыУслуги)
	|					ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Подрядный)
	|				ИНАЧЕ 
	|					ЗНАЧЕНИЕ(Перечисление.СпособыСтроительства.Хозспособ) 
	|			КОНЕЦ
	|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL ТОГДА
	|			ЗНАЧЕНИЕ(Перечисление.ТипыЗатратРегл.Прочее)
	|	ИНАЧЕ
	|		НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	ВтСчета.СчетУчета,
	|	ВЫБОР
	|		КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|			ТОГДА Строки.ВидНачисленияОплатыТруда
	|		ИНАЧЕ НЕОПРЕДЕЛЕНО
	|	КОНЕЦ,
	|	Строки.Подразделение,
	|	Строки.НаправлениеДеятельности,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// на прочие пассивы
	|ВЫБРАТЬ
	|	Строки.Регистратор КАК Ссылка,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ) КАК Период,
	|	Строки.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.СуммаРегл) КАК Сумма,
	|	Сумма(Строки.СуммаРегл / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеАктивыПассивы) КАК ВидСчетаДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.Подразделение КАК ПодразделениеДт,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельностиДт,
	|
	|	Строки.СчетУчета КАК СчетДт,
	|
	|	Строки.Субконто1 КАК СубконтоДт1,
	|	Строки.Субконто2 КАК СубконтоДт2,
	|	Строки.Субконто3 КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.Подразделение КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВтСчета.СчетУчета КАК СчетКт,
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Строки.ВидПлатежаВГосБюджет
	|	КОНЕЦ КАК СубконтоКт1,
	|
	|	ВЫБОР КОГДА ВтСчета.СчетУчета = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) ТОГДА
	|		Строки.ВидНачисленияОплатыТруда
	|	ИНАЧЕ
	|		Неопределено
	|	КОНЕЦ КАК СубконтоКт2,
	|
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.СуммаРегл) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ""Начисление сдельной заработной платы""
	|		ИНАЧЕ ""Начисление взносов со сдельной заработной платы""
	|	КОНЕЦ КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		РегистрНакопления.ОтражениеЗарплатыВФинансовомУчете КАК Строки
	|	ПО
	|		ДокументыКОтражению.Ссылка = Строки.Регистратор
	|		И НЕ Строки.Сторно
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		ВтСчетаУчетаНалоговИВзносов КАК ВтСчета
	|	ПО
	|		Строки.ТипНалога = ВтСчета.ТипНалога
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = НАЧАЛОПЕРИОДА(КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ), ДЕНЬ)
	|	
	|ГДЕ
	|	Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.Регистратор,
	|	КОНЕЦПЕРИОДА(Строки.Период, МЕСЯЦ),
	|	Строки.Организация,
	|	Строки.Подразделение,
	|	Строки.СчетУчета,
	|	ВтСчета.СчетУчета,
	|	Строки.НаправлениеДеятельности,
	|	Строки.Субконто1,
	|	Строки.Субконто2,
	|	Строки.Субконто3,
	|	Строки.ФизическоеЛицо,
	|	Строки.ВидНачисленияОплатыТруда,
	|	Строки.ТипНалога,
	|	Строки.ВидПлатежаВГосБюджет
	|";
#КонецОбласти

#Область ТекстЗапросаНДФЛ
	ТекстЗапросаНДФЛ = "
	// НДФЛ, НДФЛСПревышения
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.Сумма) КАК Сумма,
	|	Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА Операция.ПроводкиПоРаботникам 
	|		ТОГДА Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ВЫБОР Строки.ТипНалога
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.НДФЛСПревышения)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ_ДоходыСвышеПредельнойВеличины)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ)
	|	КОНЕЦ КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НДФЛ),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НДФЛСПревышения),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НДФЛСПревышенияПоСтавке18),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НДФЛСПревышенияПоСтавке20),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НДФЛСПревышенияПоСтавке22))
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	ВЫБОР
	|		КОГДА Операция.ПроводкиПоРаботникам
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов,
	|	Строки.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НФДЛДивидендыСотрудникам, НФДЛДивиденды
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.Сумма) КАК Сумма,
	|	Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА Операция.ПроводкиПоРаботникам 
	|		ТОГДА Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ) КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации В (
	|		Значение(Перечисление.ВидыОперацийПоЗарплате.НФДЛДивидендыСотрудникам),
	|		Значение(Перечисление.ВидыОперацийПоЗарплате.НФДЛДивиденды))
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	ВЫБОР
	|		КОГДА Операция.ПроводкиПоРаботникам
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛДоходыКонтрагентов, НДФЛРасчетыСБывшимиСотрудниками
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.Сумма) КАК Сумма,
	|	Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|	КОНЕЦ КАК СчетДт,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ) КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ (доходы контрагентов)"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации В (
	|		Значение(Перечисление.ВидыОперацийПоЗарплате.НДФЛДоходыКонтрагентов),
	|		Значение(Перечисление.ВидыОперацийПоЗарплате.НДФЛРасчетыСБывшимиСотрудниками))
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	ВЫБОР
	|		КОГДА Операция.ПроводкиПоРаботникам
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛПередачаЗадолженностиВНалоговыйОрган
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	-Сумма(Строки.Сумма) КАК Сумма,
	|	-Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА Операция.ПроводкиПоРаботникам 
	|		ТОГДА Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	0 КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ) КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	-Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ (передача задолженности в налоговый орган)"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации = Значение(Перечисление.ВидыОперацийПоЗарплате.НДФЛПередачаЗадолженностиВНалоговыйОрган)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	ВЫБОР
	|		КОГДА Операция.ПроводкиПоРаботникам
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛПрочиеРасчетыСПерсоналом
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.Сумма) КАК Сумма,
	|	Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|	КОНЕЦ КАК СчетДт,
	|	Строки.ФизическоеЛицо КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ) КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ (прочие расчеты с персоналом)"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации = Значение(Перечисление.ВидыОперацийПоЗарплате.НДФЛПрочиеРасчетыСПерсоналом)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	Строки.ФизическоеЛицо,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛДоначисленныйПоРезультатамПроверки
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Сумма(Строки.Сумма) КАК Сумма,
	|	Сумма(Строки.Сумма / КурсВалютыУпрУчета.Курс) КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА Операция.ПроводкиПоРаботникам 
	|		ТОГДА Строки.ФизическоеЛицо
	|	ИНАЧЕ
	|		Значение(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.НДФЛ) КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.НалогАкт) КАК СубконтоКт1,
	|	Строки.РегистрацияВНалоговомОргане КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Сумма(Строки.Сумма) КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""НДФЛ (доначисленный по результатам проверки)"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации = Значение(Перечисление.ВидыОперацийПоЗарплате.НДФЛДоначисленныйПоРезультатамПроверки)
	|
	|СГРУППИРОВАТЬ ПО
	|	Операция.Ссылка,
	|	Строки.РегистрацияВНалоговомОргане,
	|	Операция.Организация,
	|	ВЫБОР
	|		КОГДА Операция.ПроводкиПоРаботникам
	|			ТОГДА Строки.ФизическоеЛицо
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ,
	|	Строки.ПодразделениеПредприятия,
	|	Строки.СпособРасчетов
	|";
#КонецОбласти

#Область ТекстЗапросаУдержания
	ТекстЗапросаУдержания = "
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	Строки.НомерСтроки КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеАктивыПассивы) КАК ВидСчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаКт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	Строки.НастройкаСчетовУчета.СчетУчета КАК СчетКт,
	|	Строки.НастройкаСчетовУчета.Субконто1 КАК СубконтоКт1,
	|	Строки.НастройкаСчетовУчета.Субконто2 КАК СубконтоКт2,
	|	Строки.НастройкаСчетовУчета.Субконто3 КАК СубконтоКт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	Строки.ВидОперации КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации НЕ В (Значение(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок))
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Возврат излишне выплаченных суммы вследствие счетных ошибок
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	&ВалютаРеглУчета КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ВЫБОР Строки.СпособРасчетов
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетДт,
	|	ВЫБОР КОГДА НЕ Операция.ПроводкиПоРаботникам ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		Строки.ФизическоеЛицо
	|	КОНЕЦ КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Доходы) КАК ВидСчетаКт,
	|	Строки.СтатьяДоходов КАК АналитикаУчетаКт,
	|	Строки.ПодразделениеПредприятия КАК МестоУчетаКт,
	|
	|	&ВалютаРеглУчета КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	Строки.СтатьяДоходов КАК СубконтоКт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	Строки.Сумма  КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""Возврат излишне выплаченных суммы вследствие счетных ошибок"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|
	|ГДЕ
	|	Строки.ВидОперации В (Значение(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок))
	|";
	
#КонецОбласти
	
#Область ТекстЗапросаНачисленныеПроцентыПоЗаймам
	
	ТекстЗапросаНачисленныеПроцентыПоЗаймам = "
	// Начисленные проценты по займам
	|ВЫБРАТЬ
	|	Операция.Ссылка КАК Ссылка,
	|	ВЫБОР КОГДА Операция.Исправление
	|		ТОГДА Операция.Дата
	|		ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|	КОНЕЦ КАК Период,
	|	Операция.Организация КАК Организация,
	|	"""" КАК ИдентификаторСтроки,
	|
	|	Строки.Сумма КАК Сумма,
	|	Строки.Сумма / КурсВалютыУпрУчета.Курс КАК СуммаУУ,
	|
	|	НЕОПРЕДЕЛЕНО КАК ВидСчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаДт,
	|	НЕОПРЕДЕЛЕНО КАК МестоУчетаДт,
	|
	|	Строки.Сумма КАК ВалютаДт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеДт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиДт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПредоставленнымЗаймам) КАК СчетДт,
	|	Строки.ФизическоеЛицо КАК СубконтоДт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоДт3,
	|
	|	Строки.Сумма КАК ВалютнаяСуммаДт,
	|	0 КАК КоличествоДт,
	|	0 КАК СуммаНУДт,
	|	0 КАК СуммаПРДт,
	|	0 КАК СуммаВРДт,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Доходы) КАК ВидСчетаКт,
	|	Строки.СтатьяДоходов КАК АналитикаУчетаКт,
	|	Строки.ПодразделениеПредприятия КАК МестоУчетаКт,
	|
	|	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВалютаКт,
	|	Строки.ПодразделениеПредприятия КАК ПодразделениеКт,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельностиКт,
	|
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетКт,
	|	Строки.СтатьяДоходов КАК СубконтоКт1,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт2,
	|	НЕОПРЕДЕЛЕНО КАК СубконтоКт3,
	|
	|	0 КАК ВалютнаяСуммаКт,
	|	0 КАК КоличествоКт,
	|	0 КАК СуммаНУКт,
	|	0 КАК СуммаПРКт,
	|	0 КАК СуммаВРКт,
	|	""Начисленные проценты по займам"" КАК Содержание
	|ИЗ
	|	ДокументыКОтражению КАК ДокументыКОтражению
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете КАК Операция
	|	ПО
	|		ДокументыКОтражению.Ссылка = Операция.Ссылка
	|
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
	|		Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК Строки
	|	ПО
	|		Строки.Ссылка = Операция.Ссылка
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		КурсыВалют КАК КурсВалютыУпрУчета
	|	ПО
	|		КурсВалютыУпрУчета.Валюта = &ВалютаУпрУчета
	|		И КурсВалютыУпрУчета.Дата = 
	|			НАЧАЛОПЕРИОДА(ВЫБОР 
	|							КОГДА Операция.Исправление
	|								ТОГДА Операция.Дата
	|							ИНАЧЕ КОНЕЦПЕРИОДА(Операция.ПериодРегистрации, МЕСЯЦ) 
	|						КОНЕЦ, ДЕНЬ)
	|";
	
#КонецОбласти
	
	ТекстыОтражения = Новый Массив;
	ТекстыОтражения.Добавить(ТекстЗапросаНачисленоПостатьям);
	ТекстыОтражения.Добавить(ТекстЗапросаЕжегодныйОтпускОценочныеОбязательстваИРезервы);
	ТекстыОтражения.Добавить(ТекстЗапросаЕжегодныйОтпускРезервы);
	ТекстыОтражения.Добавить(ТекстЗапросаЕжегодныйОтпускОценочныеОбязательства);
	ТекстыОтражения.Добавить(ТекстЗапросаНачисленоСдельно);
	ТекстыОтражения.Добавить(ТекстЗапросаНДФЛ);
	ТекстыОтражения.Добавить(ТекстЗапросаУдержания);
	ТекстыОтражения.Добавить(ТекстЗапросаНачисленныеПроцентыПоЗаймам);
	
	Возврат СтрСоединить(ТекстыОтражения, ОбщегоНазначенияУТ.РазделительЗапросовВОбъединении());
	
КонецФункции

// Функция возвращает текст запроса дополнительных временных таблиц,
// необходимых для отражения в регламентированном учете.
//
// Возвращаемое значение:
//   Строка - текст построения временной таблицы для отражения в регл. учете.
//
Функция ТекстЗапросаВТОтраженияВРеглУчете() Экспорт
	
	ТекстыЗапроса = Новый СписокЗначений;
	ТекстЗапросаВтСчетаУчетаНалоговИВзносов(Неопределено, ТекстыЗапроса);
	ТекстЗапросаВтСписокСпособовОтражения(Неопределено, ТекстыЗапроса);
	ТекстЗапросаТаблицаНачисленнаяЗарплатаИВзносы(Неопределено, ТекстыЗапроса);
	
	ТекстЗапроса = 
		"ВЫБРАТЬ
		|	ВТНачисленнаяЗарплатаИВзносы.Ссылка,
		|	МАКСИМУМ(ВТНачисленнаяЗарплатаИВзносы.НомерСтроки) КАК НомерСтроки,
		|	ВТНачисленнаяЗарплатаИВзносы.Подразделение,
		|	ВТНачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
		|	ВТНачисленнаяЗарплатаИВзносы.ВидОперации,
		|	ВТНачисленнаяЗарплатаИВзносы.СпособРасчетов,
		|	ВТНачисленнаяЗарплатаИВзносы.СтатьяРасходов,
		|	ВТНачисленнаяЗарплатаИВзносы.АналитикаРасходов,
		|	ВТНачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
		|	ВТНачисленнаяЗарплатаИВзносы.СчетУчета,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто1,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто2,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто3,
		|	МАКСИМУМ(ВТНачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ) КАК ВидНачисленияОплатыТрудаДляНУ,
		|	СУММА(ВТНачисленнаяЗарплатаИВзносы.Сумма) КАК Сумма,
		|	ВТНачисленнаяЗарплатаИВзносы.ФизическоеЛицо КАК ФизическоеЛицо,
		|	ВТНачисленнаяЗарплатаИВзносы.ВидРезерва КАК ВидРезерва,
		|	ВТНачисленнаяЗарплатаИВзносы.РезервБУ КАК РезервБУ,
		|	ВТНачисленнаяЗарплатаИВзносы.РезервНУ КАК РезервНУ,
		|	ВТНачисленнаяЗарплатаИВзносы.СчетКт КАК СчетКт,
		|	ВЫБОР
		|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
		|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
		|		ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
		|	КОНЕЦ КАК ВидСчетаДт,
		|	СтатьиНаПрочиеАктивы.ВариантРаспределенияРасходовРегл КАК ВариантРаспределенияРасходовРегл,
		|	ВЫБОР
		|		КОГДА ВТНачисленнаяЗарплатаИВзносы.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
		|			ТОГДА ВТНачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ
		|		ИНАЧЕ ВТНачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет
		|	КОНЕЦ КАК СубконтоКт2,
		|	ВТНачисленнаяЗарплатаИВзносы.ТипНалога КАК ТипНалога
		|ПОМЕСТИТЬ НачисленнаяЗарплатаИВзносы
		|ИЗ
		|	ВТНачисленнаяЗарплатаИВзносы КАК ВТНачисленнаяЗарплатаИВзносы
		|	
		|	ЛЕВОЕ СОЕДИНЕНИЕ 
		|		ПланВидовХарактеристик.СтатьиРасходов КАК СтатьиНаПрочиеАктивы
		|	ПО 
		|		ВТНачисленнаяЗарплатаИВзносы.СтатьяРасходов = СтатьиНаПрочиеАктивы.Ссылка
		|		И (СтатьиНаПрочиеАктивы.ВариантРаспределенияРасходовРегл = ЗНАЧЕНИЕ(Перечисление.ВариантыРаспределенияРасходов.НаПрочиеАктивы))
		|
		|ГДЕ
		|	ВТНачисленнаяЗарплатаИВзносы.Сумма <> 0
		|
		|СГРУППИРОВАТЬ ПО
		|	ВТНачисленнаяЗарплатаИВзносы.Ссылка,
		|	ВТНачисленнаяЗарплатаИВзносы.Подразделение,
		|	ВТНачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
		|	ВТНачисленнаяЗарплатаИВзносы.ВидОперации,
		|	ВТНачисленнаяЗарплатаИВзносы.СпособРасчетов,
		|	ВТНачисленнаяЗарплатаИВзносы.СтатьяРасходов,
		|	ВТНачисленнаяЗарплатаИВзносы.АналитикаРасходов,
		|	ВТНачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
		|	ВТНачисленнаяЗарплатаИВзносы.СчетУчета,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто1,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто2,
		|	ВТНачисленнаяЗарплатаИВзносы.Субконто3,
		|	ВТНачисленнаяЗарплатаИВзносы.СчетКт,
		|	ВЫБОР
		|		КОГДА СтатьиНаПрочиеАктивы.Ссылка ЕСТЬ NULL 
		|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.Расходы)
		|		ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.ВидыСчетовРеглУчета.ПрочиеОперации)
		|	КОНЕЦ,
		|	СтатьиНаПрочиеАктивы.ВариантРаспределенияРасходовРегл,
		|	ВТНачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
		|	ВТНачисленнаяЗарплатаИВзносы.ВидРезерва,
		|	ВТНачисленнаяЗарплатаИВзносы.РезервБУ,
		|	ВТНачисленнаяЗарплатаИВзносы.РезервНУ,
		|	ВЫБОР
		|		КОГДА ВТНачисленнаяЗарплатаИВзносы.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
		|			ТОГДА ВТНачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ
		|		ИНАЧЕ ВТНачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет
		|	КОНЕЦ,
		|	ВТНачисленнаяЗарплатаИВзносы.ТипНалога
		|;";
	ТекстыЗапроса.Добавить(ТекстЗапроса, "НачисленнаяЗарплатаИВзносы");
	
	ТекстЗапроса = СтрСоединить(ТекстыЗапроса.ВыгрузитьЗначения(), ОбщегоНазначения.РазделительПакетаЗапросов());
	
	Возврат ТекстЗапроса;
	
КонецФункции

// Функция возвращает статью активов пассивов по умолчанию для заполнения в табличной части Удержания.
// Вызывается из формы документа, а также используется правилами загрузки данных из ЗУП25.
//
// Параметры:
//   ФизическоеЛицо - СправочникСсылка.ФизическиеЛица - физическое лицо, работник,
//   ПодразделениеПредприятия - СправочникСсылка.СтруктураПредприятия - управленческое подразделение,
//   ВидОперации - ПеречислениеСсылка.ВидыОперацийПоЗарплате - вид операции,
//   Контрагент - СправочникСсылка.Контрагенты - контрагент, соответствующий физическому лицу,
//   ТекущийДокумент - ДокументСсылка.ОтражениеЗарплатыВФинансовомУчете - текущий документ,
//   ДатаАктуальности - Дата - дата, до которой обрабатываются документы.
//
// Возвращаемое значение:
//   Структура - структура с полями СтатьяАктивовПассивов, АналитикаАктивовПассивов, СчетУчета, Субконто1, Субконто2,
//               Субконто3, ПредставлениеОтраженияВРеглУчете.
//
Функция СтатьяАктивовПассивовПоУмолчанию(ФизическоеЛицо, ПодразделениеПредприятия, ВидОперации, Контрагент, ТекущийДокумент, ДатаАктуальности) Экспорт
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	&ФизическоеЛицо КАК ФизическоеЛицо,
	|	&ПодразделениеПредприятия КАК ПодразделениеПредприятия,
	|	&ВидОперации КАК ВидОперации,
	|	&Контрагент КАК Контрагент
	|ПОМЕСТИТЬ ВТНезаполненнаяАналитика";
	
	МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	Запрос.УстановитьПараметр("ФизическоеЛицо",           ФизическоеЛицо);
	Запрос.УстановитьПараметр("ПодразделениеПредприятия", ПодразделениеПредприятия);
	Запрос.УстановитьПараметр("ВидОперации",              ВидОперации);
	Запрос.УстановитьПараметр("Контрагент",               Контрагент);
	Запрос.Выполнить();
	
	Документы.ОтражениеЗарплатыВФинансовомУчете.СоздатьВТАналитикаДругихДокументов(МенеджерВременныхТаблиц, ТекущийДокумент, ДатаАктуальности, "УдержаннаяЗарплата");
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	АналитикаДругихДокументов.ФизическоеЛицо КАК ФизическоеЛицо,
	|	АналитикаДругихДокументов.ВидОперации КАК ВидОперации,
	|	АналитикаДругихДокументов.СтатьяАктивовПассивов КАК СтатьяАктивовПассивов,
	|	АналитикаДругихДокументов.АналитикаАктивовПассивов КАК АналитикаАктивовПассивов,
	|	АналитикаДругихДокументов.СчетУчета КАК СчетУчета,
	|	АналитикаДругихДокументов.Субконто1 КАК Субконто1,
	|	АналитикаДругихДокументов.Субконто2 КАК Субконто2,
	|	АналитикаДругихДокументов.Субконто3 КАК Субконто3
	|ИЗ
	|	ЗаполненнаяСтатьяПассивов КАК АналитикаДругихДокументов";
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	РезультатЗапроса = Запрос.Выполнить();
	
	СтатьяАналитикаРасходов = Новый Структура("СтатьяАктивовПассивов, АналитикаАктивовПассивов, СчетУчета, Субконто1, Субконто2, Субконто3");
	
	Выборка = РезультатЗапроса.Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(СтатьяАналитикаРасходов, Выборка);
	КонецЕсли;
	
	Возврат СтатьяАналитикаРасходов;
	
КонецФункции

// Функция возвращает статью доходов по умолчанию для заполнения в табличной части начисленных процентов по займам.
// Вызывается из формы документа, а также используется правилами загрузки данных из ЗУП25.
//
// Параметры:
//   ФизическоеЛицо - СправочникСсылка.ФизическиеЛица - физическое лицо, работник,
//   ПодразделениеПредприятия - СправочникСсылка.СтруктураПредприятия - управленческое подразделение,
//   ТекущийДокумент - ДокументСсылка.ОтражениеЗарплатыВФинансовомУчете - текущий документ,
//   ДатаАктуальности - Дата - дата, до которой обрабатываются документы.
//
// Возвращаемое значение:
//   Структура - структура с полями СтатьяДоходов, АналитикаДоходов.
//
Функция СтатьяДоходовПоУмолчанию(ФизическоеЛицо, ПодразделениеПредприятия, ТекущийДокумент, ДатаАктуальности) Экспорт
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	&ФизическоеЛицо КАК ФизическоеЛицо,
	|	&ПодразделениеПредприятия КАК ПодразделениеПредприятия
	|ПОМЕСТИТЬ ВТНезаполненнаяАналитикаДоходов";
	
	МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	Запрос.УстановитьПараметр("ФизическоеЛицо", ФизическоеЛицо);
	Запрос.УстановитьПараметр("ПодразделениеПредприятия", ПодразделениеПредприятия);
	Запрос.Выполнить();
	
	Документы.ОтражениеЗарплатыВФинансовомУчете.СоздатьВТАналитикаДругихДокументов(МенеджерВременныхТаблиц, ТекущийДокумент, ДатаАктуальности, "НачисленныеПроцентыПоЗаймам");
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	ЗаполненнаяСтатьяДоходов.ФизическоеЛицо КАК ФизическоеЛицо,
	|	ЗаполненнаяСтатьяДоходов.СтатьяДоходов КАК СтатьяДоходов,
	|	ЗаполненнаяСтатьяДоходов.АналитикаДоходов КАК АналитикаДоходов
	|ИЗ
	|	ВТЗаполненнаяСтатьяДоходов КАК ЗаполненнаяСтатьяДоходов";
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	РезультатЗапроса = Запрос.Выполнить();
	
	СтатьяАналитикаДоходов = Новый Структура("СтатьяДоходов, АналитикаДоходов");
	
	Выборка = РезультатЗапроса.Выбрать();
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(СтатьяАналитикаДоходов, Выборка);
	КонецЕсли;
	
	Возврат СтатьяАналитикаДоходов;
	
КонецФункции

// Возвращает параметры настройки счетов учета в документе.
// 
// Возвращаемое значение:
// 	Массив - Массив параметров настройки счетов учета (См. НастройкаСчетовУчетаСервер.ПараметрыНастройкиСчетаУчетаОперации).
//
Функция ПараметрыНастройкиСчетовУчета() Экспорт
	
	МассивПараметров = Новый Массив();
	
	#Область НастройкаСчетовОтраженияУдержаннойЗарплаты
	ПараметрыНастройки = НастройкаСчетовУчетаСервер.ПараметрыНастройки();
	ПараметрыНастройки.ПутьКДанным = "Объект.УдержаннаяЗарплата";
	ПараметрыНастройки.Представление = "ПредставлениеОтраженияВРеглУчете";
	
	ПараметрыНастройки.СтатьяАктивовПассивов = "СтатьяАктивовПассивов";
	
	ПараметрыНастройки.Организация = "Объект.Организация";
	
	ПараметрыНастройки.ЭлементыФормы.Добавить("УдержаннаяЗарплатаСчетРеглУчетаАктивовПассивов");
	МассивПараметров.Добавить(ПараметрыНастройки);
	#КонецОбласти
	
	Возврат МассивПараметров;
	
КонецФункции

// Возвращает параметры выбора статей в документе.
// 
// Возвращаемое значение:
// 	Массив - Массив параметров настройки счетов учета (См. ДоходыИРасходыСервер.ПараметрыВыбораСтатьиИАналитики)
//
Функция ПараметрыВыбораСтатейИАналитик() Экспорт
	
	МассивПаметровВыбора = Новый Массив;
	
	#Область УдержаннаяЗарплатаСтатьяАктивовПассивов
	ПараметрыВыбора = ДоходыИРасходыСервер.ПараметрыВыбораСтатьиИАналитики();
	ПараметрыВыбора.ПутьКДанным = "Объект.УдержаннаяЗарплата";
	ПараметрыВыбора.Статья = "СтатьяАктивовПассивов";
	ПараметрыВыбора.ТипСтатьи = "ТипСтатьи";
	
	ПараметрыВыбора.ВыборСтатьиАктивовПассивов = Истина;
	ПараметрыВыбора.АналитикаАктивовПассивов = "АналитикаАктивовПассивов";
	
	ПараметрыВыбора.ЭлементыФормы.Статья.Добавить("УдержаннаяЗарплатаСтатьяАктивовПассивов");
	
	ПараметрыВыбора.ЭлементыФормы.АналитикаАктивовПассивов.Добавить("УдержаннаяЗарплатаАналитикаАктивовПассивов");
	
	МассивПаметровВыбора.Добавить(ПараметрыВыбора);
	#КонецОбласти
	
	#Область УдержаннаяЗарплатаСтатьяДоходов
	ПараметрыВыбора = ДоходыИРасходыСервер.ПараметрыВыбораСтатьиИАналитики();
	ПараметрыВыбора.ПутьКДанным = "Объект.УдержаннаяЗарплата";
	ПараметрыВыбора.Статья = "СтатьяДоходов";
	
	ПараметрыВыбора.ВыборСтатьиДоходов = Истина;
	ПараметрыВыбора.АналитикаДоходов = "АналитикаДоходов";
	
	ПараметрыВыбора.ЭлементыФормы.Статья.Добавить("УдержаннаяЗарплатаСтатьяДоходов");
	
	ПараметрыВыбора.ЭлементыФормы.АналитикаДоходов.Добавить("УдержаннаяЗарплатаАналитикаДоходов");
	
	МассивПаметровВыбора.Добавить(ПараметрыВыбора);
	#КонецОбласти
	
	#Область НачисленныеПроцентыПоЗаймамСтатьяДоходов
	ПараметрыВыбора = ДоходыИРасходыСервер.ПараметрыВыбораСтатьиИАналитики();
	ПараметрыВыбора.ПутьКДанным = "Объект.НачисленныеПроцентыПоЗаймам";
	ПараметрыВыбора.Статья = "СтатьяДоходов";
	
	ПараметрыВыбора.ВыборСтатьиДоходов = Истина;
	ПараметрыВыбора.АналитикаДоходов = "АналитикаДоходов";
	
	ПараметрыВыбора.ЭлементыФормы.Статья.Добавить("НачисленныеПроцентыПоЗаймамСтатьяДоходов");
	
	ПараметрыВыбора.ЭлементыФормы.АналитикаДоходов.Добавить("НачисленныеПроцентыПоЗаймамАналитикаДоходов");
	
	МассивПаметровВыбора.Добавить(ПараметрыВыбора);
	#КонецОбласти
	
	Возврат МассивПаметровВыбора;
	
КонецФункции

#Область ДляВызоваИзДругихПодсистем

// СтандартныеПодсистемы.УправлениеДоступом

// См. УправлениеДоступомПереопределяемый.ПриЗаполненииСписковСОграничениемДоступа.
Процедура ПриЗаполненииОграниченияДоступа(Ограничение) Экспорт

	Ограничение.Текст =
	"РазрешитьЧтениеИзменение
	|ГДЕ
	|	ДляВсехСтрок( ЗначениеРазрешено(ФизическиеЛица.ФизическоеЛицо, NULL КАК ИСТИНА)
	|	) И ЗначениеРазрешено(Организация)";

КонецПроцедуры

// Конец СтандартныеПодсистемы.УправлениеДоступом

#КонецОбласти

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

// Возвращает описание состава документа
//
// Возвращаемое значение:
//  Структура - см. ЗарплатаКадрыСоставДокументов.НовоеОписаниеСоставаОбъекта.
Функция ОписаниеСоставаОбъекта() Экспорт
	
	МетаданныеДокумента = Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете;
	Возврат ЗарплатаКадрыСоставДокументов.ОписаниеСоставаОбъектаПоМетаданнымФизическиеЛицаВТабличныхЧастях(МетаданныеДокумента);
	
КонецФункции

// Функция возвращает необходимость использования способа отражения для вида операции
//
// Параметры:
//   ВидОперации - ПеречислениеСсылка.ВидыОперацийПоЗарплате - вид операции по зарплате.
//
// Возвращаемое значение:
//   Булево - Признак использования способа отражения для вида операции.
//
Функция ТребуетсяСпособОтражения(ВидОперации) Экспорт
	
	Если ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы
		Или ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ПособиеНаПогребение
		Или ВидОперации = Перечисления.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФСС
		Или ВидОперации = Перечисления.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФССНС Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Возврат Истина;
	
КонецФункции

// Определяет необходимость заполнения физического лица при сводном отражении документа
//
// Параметры:
//   СпособРасчетов - ПеречислениеСсылка.СпособыРасчетовСФизическимиЛицами - способ расчетов с физлицом,
//   ВидОперации - ПеречислениеСсылка.ВидыОперацийПоЗарплате - вид операции по зарплате,
//   НуженЧек - Булево - является основанием оформления кассового чека.
//
// Возвращаемое значение:
//   Булево - признак обязательности заполенния физического лица.
//
Функция ТребуетсяФизическоеЛицоПриСводномОтражении(СпособРасчетов, ВидОперации, НуженЧек = Ложь) Экспорт
	
	Если НуженЧек Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если ВидОперации = Перечисления.ВидыОперацийПоЗарплате.АлиментыПрочиеИсполнительныеЛистыКонтрагенты
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ВознаграждениеПлатежногоАгентаКонтрагенты
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.УдержаниеПоПрочимОперациямСРаботниками
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ВозмещениеУщерба
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.НачисленоПроцентовПоЗайму
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ПогашениеЗаймов
		ИЛИ ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ПроцентыПоЗайму Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(СпособРасчетов)
		И СпособРасчетов <> Перечисления.СпособыРасчетовСФизическимиЛицами.ОплатаТруда Тогда
		Возврат Истина;
	КонецЕсли;
	
	Возврат Ложь;
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область Проведение

Процедура ЗаполнитьПараметрыИнициализации(Запрос, ДокументСсылка)
	
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
	Запрос.Текст =
	"ВЫБРАТЬ
	|	Реквизиты.Ссылка               КАК Ссылка,
	|	Реквизиты.Дата                 КАК Дата,
	|	Реквизиты.Номер                КАК Номер,
	|	Реквизиты.ПериодРегистрации    КАК ПериодРегистрации,
	|	Реквизиты.Организация          КАК Организация,
	|	Реквизиты.Сводно               КАК Сводно,
	|	Реквизиты.ПроводкиПоРаботникам КАК ПроводкиПоРаботникам,
	|	Реквизиты.Исправление          КАК Исправление,
	|	Реквизиты.СторнируемыйДокумент КАК СторнируемыйДокумент,
	|	Реквизиты.ИсправляемыйДокумент КАК ИсправляемыйДокумент
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете КАК Реквизиты
	|ГДЕ
	|	Реквизиты.Ссылка = &Ссылка";
	
	Реквизиты = Запрос.Выполнить().Выбрать();
	Реквизиты.Следующий();
	
	ВалютаРегл = ЗначениеНастроекПовтИсп.ВалютаРегламентированногоУчетаОрганизации(Реквизиты.Организация);
	Коэффициенты = РаботаСКурсамивалютУТ.ПолучитьКоэффициентыПересчетаВалюты(
		ВалютаРегл, ВалютаРегл, КонецМесяца(Реквизиты.ПериодРегистрации), Реквизиты.Организация);
	
	Запрос.УстановитьПараметр("Ссылка",                                 Реквизиты.Ссылка);
	Запрос.УстановитьПараметр("Период",                                 ?(Реквизиты.Исправление, Реквизиты.Дата, КонецМесяца(Реквизиты.ПериодРегистрации)));
	Запрос.УстановитьПараметр("Дата",                                   Реквизиты.Дата);
	Запрос.УстановитьПараметр("Номер",                                  Реквизиты.Номер);
	Запрос.УстановитьПараметр("ПериодРегистрации",                      Реквизиты.ПериодРегистрации);
	Запрос.УстановитьПараметр("Организация",                            Реквизиты.Организация);
	Запрос.УстановитьПараметр("ДатаНачала",                             НачалоМесяца(Реквизиты.ПериодРегистрации));
	Запрос.УстановитьПараметр("ДатаОкончания",                          КонецМесяца(Реквизиты.ПериодРегистрации));
	Запрос.УстановитьПараметр("КоэффициентПересчетаВВалютуУпр",         Коэффициенты.КоэффициентПересчетаВВалютуУПР);
	Запрос.УстановитьПараметр("Сводно",                                 Реквизиты.Сводно);
	Запрос.УстановитьПараметр("ПроводкиПоРаботникам",                   Реквизиты.ПроводкиПоРаботникам);
	Запрос.УстановитьПараметр("ВалютаРегл",                             ВалютаРегл);
	Запрос.УстановитьПараметр("ИспользоватьУчетПрочихАктивовПассивов",  ПолучитьФункциональнуюОпцию("ИспользоватьУчетПрочихАктивовПассивов"));
	Запрос.УстановитьПараметр("ИдентификаторМетаданных",                ОбщегоНазначения.ИдентификаторОбъектаМетаданных(ПустаяСсылка().Метаданные().ПолноеИмя()));
	Запрос.УстановитьПараметр("Исправление",                            Реквизиты.Исправление);
	Запрос.УстановитьПараметр("СторнируемыйДокумент",                   Реквизиты.СторнируемыйДокумент);
	Запрос.УстановитьПараметр("ИсправляемыйДокумент",                   Реквизиты.ИсправляемыйДокумент);
	
	РасчетСебестоимостиПрикладныеАлгоритмы.ЗаполнитьПараметрыИнициализации(Запрос, Реквизиты);
	
КонецПроцедуры

#Область УстановкаВременныхТаблицИПараметров

Процедура ТекстЗапросаВтСчетаУчетаНалоговИВзносов(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтСчетаУчетаНалоговИВзносов";
	
	ТекстЗапроса =
	"ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) КАК ТипНалога,					ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда) КАК СчетУчета	// (Кт 70)
	|ПОМЕСТИТЬ ВтСчетаУчетаНалоговИВзносов
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФСС),							ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС)											// (Кт 69.01)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРСтраховаяЧасть),			ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_страх)										// (Кт 69.02.1)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРНакопительнаяЧасть),		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_нак)										// (Кт 69.02.2)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФФОМС),						ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФФОМС)											// (Кт 69.03.1)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ТФОМС),						ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ТФОМС)											// (Кт 69.03.2)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДополнительныйТарифЛЭ),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп)										// (Кт 69.02.3)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДополнительныйТарифШахтеры),			ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_шахтеры)					// (Кт 69.02.4)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ВредныеУсловияТруда)		// (Кт 69.02.5)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах),		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ТяжелыеУсловияТруда)		// (Кт 69.02.6)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРПоСуммарномуТарифу),		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС)										// (Кт 69.02.7)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДоПредельнойВеличины),		ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС)										// (Кт 69.02.7)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРСПревышения),				ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС)										// (Кт 69.02.7)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.СтраховыеВзносыЕдиныйТариф),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.СтраховыеВзносыЕдиныйТариф)					// (Кт 69.09)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОПСИностранныхРаботников),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС)										// (Кт 69.02.7)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОМСИностранныхРаботников),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФФОМС)											// (Кт 69.03.1)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОССИностранныхРаботников),	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС)											// (Кт 69.01)
	|ОБЪЕДИНИТЬ ВСЕ ВЫБРАТЬ ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФССНС),						ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС_НСиПЗ)										// (Кт 69.11)
	|ИНДЕКСИРОВАТЬ ПО ТипНалога";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
КонецПроцедуры

Функция ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса)
	
	ТекстЗапросаВтТаблицаДокументовКОтражению(Запрос, ТекстыЗапроса);
	
	ТекстЗапросаВтСписокСпособовОтражения(Запрос, ТекстыЗапроса);
	
	ТекстЗапросаТаблицаНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	
	Возврат "";
	
КонецФункции

Функция ТекстЗапросаВтТаблицаДокументовКОтражению(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтТаблицаДокументовКОтражению";
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	Документ.Ссылка КАК Ссылка
	|ПОМЕСТИТЬ ДокументыКОтражению
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете КАК Документ
	|ГДЕ
	|	Документ.Ссылка = &Ссылка";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Процедура ТекстЗапросаВтСписокСпособовОтражения(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтСписокСпособовОтражения";
	
	ТекстЗапроса =
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	НачисленнаяЗарплата.СпособОтраженияЗарплатыВБухучете КАК СпособОтражения
	|ПОМЕСТИТЬ ВтСписокСпособовОтражения
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленнаяЗарплатаИВзносы КАК НачисленнаяЗарплата
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументыКОтражению КАК ДокументыКОтражению
	|		ПО НачисленнаяЗарплата.Ссылка = ДокументыКОтражению.Ссылка";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
КонецПроцедуры

Процедура ТекстЗапросаТаблицаНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса)
	
#Область ВтТаблицаДанныхСпособовОтражения
	
	ИмяРегистра = "ВтТаблицаДанныхСпособовОтражения";
	
	ТекстЗапросаВтТаблицаДанныхСпособовОтражения = Справочники.СпособыОтраженияЗарплатыВБухУчете.ТекстЗапросаДанныхСпособов("ВтТаблицаДанныхСпособовОтражения");
	
	ТекстыЗапроса.Добавить(ТекстЗапросаВтТаблицаДанныхСпособовОтражения, ИмяРегистра);
	
#КонецОбласти
	
#Область ВТТаблицаДокумента
	
	ИмяРегистра = "ВТТаблицаДокумента";
	ТекстЗапросаВТТаблицаДокумента =
	"ВЫБРАТЬ
	|	ЗарплатаСводно.Ссылка КАК Ссылка,
	|	ЗарплатаСводно.Ссылка.Организация КАК Организация,
	|	ЗарплатаСводно.НомерСтроки КАК НомерСтроки,
	|	ЗарплатаСводно.ПодразделениеПредприятия КАК Подразделение,
	|	ЗарплатаСводно.ВидОперации КАК ВидОперации,
	|	ЗарплатаСводно.ОблагаетсяЕНВД КАК ОблагаетсяЕНВД,
	|	ЗарплатаСводно.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ,
	|	ВЫБОР
	|		КОГДА ЗарплатаСводно.РезервБУ И ЗарплатаСводно.РезервНУ
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СпособыОтраженияЗарплатыВБухучете.ПустаяСсылка)
	|		ИНАЧЕ ЗарплатаСводно.СпособОтраженияЗарплатыВБухучете
	|	КОНЕЦ КАК СпособОтраженияЗарплатыВБухучете,
	|	ЗарплатаСводно.СпособРасчетов КАК СпособРасчетов,
	|	ВЫБОР
	|		КОГДА ЗарплатаСводно.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НатуральныйДоход)
	|			ТОГДА 0
	|		ИНАЧЕ ЗарплатаСводно.Сумма
	|	КОНЕЦ КАК Сумма,
	|	ЗарплатаСводно.ПФРСтраховая КАК ПФРСтраховая,
	|	ЗарплатаСводно.ПФРНакопительная КАК ПФРНакопительная,
	|	ЗарплатаСводно.ПФРПоСуммарномуТарифу КАК ПФРПоСуммарномуТарифу,
	|	ЗарплатаСводно.ПФРДоПредельнойВеличины КАК ПФРДоПредельнойВеличины,
	|	ЗарплатаСводно.ПФРСПревышения КАК ПФРСПревышения,
	|	ЗарплатаСводно.ПФРНаДоплатуЛетчикам КАК ПФРНаДоплатуЛетчикам,
	|	ЗарплатаСводно.ПФРНаДоплатуШахтерам КАК ПФРНаДоплатуШахтерам,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах КАК ПФРЗаЗанятыхНаПодземныхИВредныхРаботах,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах КАК ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахБезСпецОценки КАК ПФРЗаЗанятыхНаПодземныхИВредныхРаботахБезСпецОценки,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахСпецОценка КАК ПФРЗаЗанятыхНаПодземныхИВредныхРаботахСпецОценка,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахБезСпецОценки КАК ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахБезСпецОценки,
	|	ЗарплатаСводно.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахСпецОценка КАК ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахСпецОценка,
	|	ЗарплатаСводно.ОПСпоМеждународнымДоговорам КАК ОПСпоМеждународнымДоговорам,
	|	ЗарплатаСводно.ОПСпоМеждународнымДоговорамСПревышения КАК ОПСпоМеждународнымДоговорамСПревышения,
	|	ЗарплатаСводно.ОМСпоМеждународнымДоговорам КАК ОМСпоМеждународнымДоговорам,
	|	ЗарплатаСводно.ОМСпоМеждународнымДоговорамСПревышения КАК ОМСпоМеждународнымДоговорамСПревышения,
	|	ЗарплатаСводно.ОССпоМеждународнымДоговорам КАК ОССпоМеждународнымДоговорам,
	|	ЗарплатаСводно.ОССпоМеждународнымДоговорамСПревышения КАК ОССпоМеждународнымДоговорамСПревышения,
	|	ЗарплатаСводно.ФСС КАК ФСС,
	|	ЗарплатаСводно.ФССНесчастныеСлучаи КАК ФССНесчастныеСлучаи,
	|	ЗарплатаСводно.ФФОМС КАК ФФОМС,
	|	ЗарплатаСводно.ТФОМС КАК ТФОМС,
	|	ЗарплатаСводно.ВзносыПоЕдиномуТарифу КАК ВзносыПоЕдиномуТарифу,
	|	ЗарплатаСводно.ВидНачисленияОплатыТрудаДляНУ КАК ВидНачисленияОплатыТрудаДляНУ,
	|	ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка) КАК ФизическоеЛицо,
	|	ЗарплатаСводно.ВзносыВсего,
	|	ВЫБОР ЗарплатаСводно.Резерв
	|		КОГДА ЗНАЧЕНИЕ(Справочник.Резервы.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков)
	|		ИНАЧЕ ЗарплатаСводно.Резерв
	|	КОНЕЦ КАК ВидРезерва,
	|	ЗарплатаСводно.РезервБУ КАК РезервБУ,
	|	ЗарплатаСводно.РезервНУ КАК РезервНУ,
	|	ЗарплатаСводно.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ПОМЕСТИТЬ ВТТаблицаДокумента
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленнаяЗарплатаИВзносы КАК ЗарплатаСводно
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументыКОтражению КАК ДокументыКОтражению
	|		ПО ЗарплатаСводно.Ссылка = ДокументыКОтражению.Ссылка
	|ГДЕ
	|	ЗарплатаСводно.Ссылка.Сводно
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗарплатаДетально.Ссылка,
	|	ЗарплатаДетально.Ссылка.Организация КАК Организация,
	|	ЗарплатаДетально.НомерСтроки,
	|	ЗарплатаДетально.ПодразделениеПредприятия,
	|	ЗарплатаДетально.ВидОперации,
	|	ЗарплатаДетально.ОблагаетсяЕНВД КАК ОблагаетсяЕНВД,
	|	ЗарплатаДетально.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ,
	|	ВЫБОР
	|		КОГДА ЗарплатаДетально.РезервБУ И ЗарплатаДетально.РезервНУ
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СпособыОтраженияЗарплатыВБухучете.ПустаяСсылка)
	|		ИНАЧЕ ЗарплатаДетально.СпособОтраженияЗарплатыВБухучете
	|	КОНЕЦ,
	|	ЗарплатаДетально.СпособРасчетов,
	|	СУММА(ВЫБОР
	|		КОГДА ЗарплатаДетально.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НатуральныйДоход)
	|			ТОГДА 0
	|		ИНАЧЕ ЗарплатаДетально.Сумма
	|	КОНЕЦ),
	|	СУММА(ЗарплатаДетально.ПФРСтраховая),
	|	СУММА(ЗарплатаДетально.ПФРНакопительная),
	|	СУММА(ЗарплатаДетально.ПФРПоСуммарномуТарифу),
	|	СУММА(ЗарплатаДетально.ПФРДоПредельнойВеличины),
	|	СУММА(ЗарплатаДетально.ПФРСПревышения),
	|	СУММА(ЗарплатаДетально.ПФРНаДоплатуЛетчикам),
	|	СУММА(ЗарплатаДетально.ПФРНаДоплатуШахтерам),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахБезСпецОценки),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахСпецОценка),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахБезСпецОценки),
	|	СУММА(ЗарплатаДетально.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахСпецОценка),
	|	СУММА(ЗарплатаДетально.ОПСпоМеждународнымДоговорам),
	|	СУММА(ЗарплатаДетально.ОПСпоМеждународнымДоговорамСПревышения),
	|	СУММА(ЗарплатаДетально.ОМСпоМеждународнымДоговорам),
	|	СУММА(ЗарплатаДетально.ОМСпоМеждународнымДоговорамСПревышения),
	|	СУММА(ЗарплатаДетально.ОССпоМеждународнымДоговорам),
	|	СУММА(ЗарплатаДетально.ОССпоМеждународнымДоговорамСПревышения),
	|	СУММА(ЗарплатаДетально.ФСС),
	|	СУММА(ЗарплатаДетально.ФССНесчастныеСлучаи),
	|	СУММА(ЗарплатаДетально.ФФОМС),
	|	СУММА(ЗарплатаДетально.ТФОМС),
	|	СУММА(ЗарплатаДетально.ВзносыПоЕдиномуТарифу),
	|	ЗарплатаДетально.ВидНачисленияОплатыТрудаДляНУ,
	|	ЗарплатаДетально.ФизическоеЛицо,
	|	СУММА(ЗарплатаДетально.ВзносыВсего),
	|	ВЫБОР ЗарплатаДетально.Резерв
	|		КОГДА ЗНАЧЕНИЕ(Справочник.Резервы.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков)
	|		ИНАЧЕ ЗарплатаДетально.Резерв
	|	КОНЕЦ,
	|	ЗарплатаДетально.РезервБУ,
	|	ЗарплатаДетально.РезервНУ,
	|	ЗарплатаДетально.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленнаяЗарплатаИВзносыПоФизлицам КАК ЗарплатаДетально
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДокументыКОтражению КАК ДокументыКОтражению
	|		ПО ЗарплатаДетально.Ссылка = ДокументыКОтражению.Ссылка
	|ГДЕ
	|	НЕ ЗарплатаДетально.Ссылка.Сводно
	|
	|СГРУППИРОВАТЬ ПО
	|
	|	ЗарплатаДетально.Ссылка,
	|	ЗарплатаДетально.Ссылка.Организация,
	|	ЗарплатаДетально.НомерСтроки,
	|	ЗарплатаДетально.ПодразделениеПредприятия,
	|	ЗарплатаДетально.ВидОперации,
	|	ЗарплатаДетально.ОблагаетсяЕНВД,
	|	ЗарплатаДетально.НеОблагаетсяНДФЛ,
	|	ЗарплатаДетально.СпособОтраженияЗарплатыВБухучете,
	|	ЗарплатаДетально.СпособРасчетов,
	|	ЗарплатаДетально.ВидНачисленияОплатыТрудаДляНУ,
	|	ЗарплатаДетально.ФизическоеЛицо,
	|	ЗарплатаДетально.Резерв,
	|	ЗарплатаДетально.РезервБУ,
	|	ЗарплатаДетально.РезервНУ,
	|	ЗарплатаДетально.ИдентификаторСтроки ";
	
	ТекстыЗапроса.Добавить(ТекстЗапросаВТТаблицаДокумента, ИмяРегистра);
	
#КонецОбласти
	
#Область ТаблицаДокумента
	
	ИмяРегистра = "ТаблицаДокумента";
	ТекстЗапросаТаблицаДокумента =
	// сумма оплаты труда
	"ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка КАК Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки КАК НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение КАК Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации КАК ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов КАК СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва КАК ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ КАК РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ КАК РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ) КАК ОплатаСдельныхРабот,
	|	СтатьиРасходов.СтатьяРасходов КАК СтатьяРасходов,
	|	СтатьиРасходов.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходов
	|	КОНЕЦ КАК АналитикаРасходов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивов
	|	КОНЕЦ КАК АналитикаАктивовПассивов,
	|	СтатьиРасходов.НастройкаСчетовУчета КАК НастройкаСчетовУчета,
	|	СтатьиРасходов.СчетУчета КАК СчетУчета,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1 = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1
	|	КОНЕЦ КАК Субконто1,
	|	СтатьиРасходов.Субконто2 КАК Субконто2,
	|	СтатьиРасходов.Субконто3 КАК Субконто3,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ КАК ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.Сумма КАК Сумма,
	|	ВЫБОР
	|		КОГДА НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВыплатыБывшимСотрудникам)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|		ИНАЧЕ НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|	КОНЕЦ КАК ФизическоеЛицо,
	|	ВЫБОР
	|		КОГДА НачисленнаяЗарплатаИВзносы.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|		КОГДА НачисленнаяЗарплатаИВзносы.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА НачисленнаяЗарплатаИВзносы.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.РасчетыСКонтрагентами)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА НачисленнаяЗарплатаИВзносы.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.Дивиденды)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоВыплатеДоходов)
	|		КОГДА НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВыплатыБывшимСотрудникам)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ДоходыКонтрагентов)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		КОГДА НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПрочиеРасчетыСПерсоналом)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыПоПрочимОперациям)
	|		КОГДА НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПособиеНаПогребение)
	|			ТОГДА ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПрочиеРасчетыСРазнымиДебиторамиИКредиторами)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПерсоналомПоОплатеТруда)
	|	КОНЕЦ КАК СчетКт,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) КАК ТипНалога,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.ПустаяСсылка) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ПОМЕСТИТЬ ТаблицаДокумента
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ВзносыПоЕдиномуТарифу
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВзносыПоЕдиномуТарифу)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВзносыПоЕдиномуТарифу)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ВзносыПоЕдиномуТарифу,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.СтраховыеВзносыЕдиныйТариф),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.СтраховыеВзносыЕдиныйТариф),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРСтраховаяЧасть
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРСтраховаяЧасть)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРСтраховаяЧасть)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРСтраховая,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_страх),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРСтраховаяЧасть),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРНакопительнаяЧасть
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРНакопительнаяЧасть)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРНакопительнаяЧасть)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРНакопительная,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_нак),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРНакопительнаяЧасть),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРПоСуммарномуТарифу
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРПоСуммарномуТарифу)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРПоСуммарномуТарифу)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРПоСуммарномуТарифу,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРПоСуммарномуТарифу),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРДоПредельнойВеличины
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДоПредельнойВеличины)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДоПредельнойВеличины)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРДоПредельнойВеличины,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДоПредельнойВеличины),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРСПревышения
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРСПревышения,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРСПревышения),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРДополнительныйТарифЛЭ
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДополнительныйТарифЛЭ)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДополнительныйТарифЛЭ)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРНаДоплатуЛетчикам,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДополнительныйТарифЛЭ),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРДополнительныйТарифШахтеры
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДополнительныйТарифШахтеры)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРДополнительныйТарифШахтеры)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРНаДоплатуШахтерам,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_шахтеры),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРДополнительныйТарифШахтеры),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРЗаЗанятыхНаПодземныхИВредныхРаботах со спец. оценкой
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах + НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахСпецОценка,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ВредныеУсловияТруда),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах со спец. оценкой
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах + НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахСпецОценка,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ТяжелыеУсловияТруда),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРЗаЗанятыхНаПодземныхИВредныхРаботах без спец. оценки
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаПодземныхИВредныхРаботахБезСпецОценки,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ВредныеУсловияТруда),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаПодземныхИВредныхРаботах),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.ВзносыБезСпецоценки) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах без спец. оценки
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботахБезСпецОценки,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_доп_ТяжелыеУсловияТруда),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПФРЗаЗанятыхНаТяжелыхИПрочихРаботах),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.ВзносыБезСпецоценки) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОПС иностранцев, с базы до предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОПСпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОПСпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОПСпоМеждународнымДоговорам,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОПСИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОПС иностранцев, с базы сверх предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОПСпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОПСпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОПСпоМеждународнымДоговорамСПревышения,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПФР_ОПС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОПСИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОМС иностранцев, с базы до предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОМСпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОМСпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОМСпоМеждународнымДоговорам,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОМСИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОМС иностранцев, с базы сверх предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОМСпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОМСпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОМСпоМеждународнымДоговорамСПревышения,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОМСИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОСС иностранцев, с базы до предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОССпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОССпоМеждународнымДоговорам)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОССпоМеждународнымДоговорам,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОССИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ОСС иностранцев, с базы сверх предельной величины, с 1 января 2023 года
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОССпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ОССпоМеждународнымДоговорамСПревышения)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ОССпоМеждународнымДоговорамСПревышения,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ОССИностранныхРаботников),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ФСС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФСС)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФСС)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФСС,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФСС),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ФССНС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ)
	|		И СтатьиРасходов.РежимУчетаВзносовНаТравматизм <> 1,
	|	СтатьиРасходов.СтатьяРасходовТравматизм,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовТравматизм = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовТравматизм = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовТравматизм = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФССНС)
	|		КОГДА СтатьиРасходов.АналитикаРасходовТравматизм = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовТравматизм
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовТравматизм = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовТравматизм = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовТравматизм = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФССНС)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовТравматизм = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовТравматизм
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаТравматизм,
	|	СтатьиРасходов.СчетУчетаТравматизм,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Травматизм = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Травматизм
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Травматизм,
	|	СтатьиРасходов.Субконто3Травматизм,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФССНесчастныеСлучаи,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС_НСиПЗ),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФССНС),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ФФОМС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФФОМС)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ФФОМС)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФФОМС,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ТФОМС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.НомерСтроки,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	ЛОЖЬ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	ЕСТЬNULL(СтатьиРасходов.ОплатаСдельныхРабот, ЛОЖЬ),
	|	СтатьиРасходов.СтатьяРасходовВзносов,
	|	СтатьиРасходов.НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ТФОМС)
	|		КОГДА СтатьиРасходов.АналитикаРасходовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаРасходовВзносов
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Подразделение
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ТФОМС)
	|		КОГДА СтатьиРасходов.АналитикаАктивовПассивовВзносов = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.Организация
	|		ИНАЧЕ СтатьиРасходов.АналитикаАктивовПассивовВзносов
	|	КОНЕЦ,
	|	СтатьиРасходов.НастройкаСчетовУчетаВзносов,
	|	СтатьиРасходов.СчетУчетаВзносов,
	|	ВЫБОР
	|		КОГДА СтатьиРасходов.Субконто1Взносов = ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|			ТОГДА НачисленнаяЗарплатаИВзносы.ФизическоеЛицо
	|		ИНАЧЕ СтатьиРасходов.Субконто1Взносов
	|	КОНЕЦ,
	|	СтатьиРасходов.Субконто2Взносов,
	|	СтатьиРасходов.Субконто3Взносов,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ТФОМС,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ТФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ТФОМС),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог) КАК ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ВТТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВтТаблицаДанныхСпособовОтражения КАК СтатьиРасходов
	|		ПО НачисленнаяЗарплатаИВзносы.СпособОтраженияЗарплатыВБухучете = СтатьиРасходов.СпособОтражения
	|			И (НачисленнаяЗарплатаИВзносы.ОблагаетсяЕНВД = СтатьиРасходов.ОблагаетсяЕНВД)
	|";
	
	ТекстыЗапроса.Добавить(ТекстЗапросаТаблицаДокумента, ИмяРегистра);
	
#КонецОбласти
	
#Область ВТНачисленнаяЗарплатаИВзносы
	
	ИмяРегистра = "ВТНачисленнаяЗарплатаИВзносы";
	ТекстЗапросаВТНачисленнаяЗарплатаИВзносы =
	"ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	МИНИМУМ(НачисленнаяЗарплатаИВзносы.НомерСтроки),
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.СчетУчета,
	|	НачисленнаяЗарплатаИВзносы.Субконто1,
	|	НачисленнаяЗарплатаИВзносы.Субконто2,
	|	НачисленнаяЗарплатаИВзносы.Субконто3,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) КАК Сумма,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл КАК ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ПОМЕСТИТЬ ВТНачисленнаяЗарплатаИВзносы
	|ИЗ
	|	ТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|
	|ГДЕ
	|	НачисленнаяЗарплатаИВзносы.ВидОперации НЕ В(
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПособиеНаПогребение),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФСС),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФССНС),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы))
	|	И НЕ (НачисленнаяЗарплатаИВзносы.РезервБУ И НачисленнаяЗарплатаИВзносы.РезервНУ)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.СчетУчета,
	|	НачисленнаяЗарплатаИВзносы.Субконто1,
	|	НачисленнаяЗарплатаИВзносы.Субконто2,
	|	НачисленнаяЗарплатаИВзносы.Субконто3,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки
	|
	|ИМЕЮЩИЕ
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// оплата за счет обязательств и резервов
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	МИНИМУМ(НачисленнаяЗарплатаИВзносы.НомерСтроки),
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПоВознаграждениям),
	|	ВЫБОР НачисленнаяЗарплатаИВзносы.ВидОперации
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков)
	|		ИНАЧЕ НачисленнаяЗарплатаИВзносы.ВидРезерва
	|	КОНЕЦ,
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма),
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|
	|ГДЕ
	|	(НачисленнаяЗарплатаИВзносы.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы))
	|		ИЛИ (НачисленнаяЗарплатаИВзносы.РезервБУ И НачисленнаяЗарплатаИВзносы.РезервНУ))
	|	И НачисленнаяЗарплатаИВзносы.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки
	|
	|ИМЕЮЩИЕ
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// взносы за счет обязательств и резервов
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	МИНИМУМ(НачисленнаяЗарплатаИВзносы.НомерСтроки),
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ОценочныеОбязательстваПостраховымВзносам),
	|	ВЫБОР НачисленнаяЗарплатаИВзносы.ВидОперации
	|		КОГДА ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.Резервы.РезервЕжегодныхОтпусков)
	|		ИНАЧЕ НачисленнаяЗарплатаИВзносы.ВидРезерва
	|	КОНЕЦ,
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма),
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|
	|ГДЕ
	|	(НачисленнаяЗарплатаИВзносы.ВидОперации В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы))
	|		ИЛИ (НачисленнаяЗарплатаИВзносы.РезервБУ И НачисленнаяЗарплатаИВзносы.РезервНУ))
	|	И НачисленнаяЗарплатаИВзносы.ТипНалога <> ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.НаправлениеДеятельности,
	|	НачисленнаяЗарплатаИВзносы.АналитикаРасходов,
	|	НачисленнаяЗарплатаИВзносы.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов,
	|	НачисленнаяЗарплатаИВзносы.СтатьяРасходов.ВариантРаспределенияРасходовРегл,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки
	|
	|ИМЕЮЩИЕ
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы по страхованию ФСС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	МИНИМУМ(НачисленнаяЗарплатаИВзносы.НомерСтроки),
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги),
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФСС),
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог),
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма),
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|
	|ГДЕ
	|	НачисленнаяЗарплатаИВзносы.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПособиеНаПогребение),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФСС))
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки
	|
	|ИМЕЮЩИЕ
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расходы по страхованию ФСС НС
	|ВЫБРАТЬ
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	МИНИМУМ(НачисленнаяЗарплатаИВзносы.НомерСтроки),
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги),
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФССНС),
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ФСС_НСиПЗ),
	|	ЗНАЧЕНИЕ(Перечисление.ВидыПлатежейВГосБюджет.Налог),
	|	НЕОПРЕДЕЛЕНО,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма),
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НЕОПРЕДЕЛЕНО,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки КАК ИдентификаторСтроки
	|ИЗ
	|	ТаблицаДокумента КАК НачисленнаяЗарплатаИВзносы
	|
	|ГДЕ
	|	НачисленнаяЗарплатаИВзносы.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.РасходыПоСтрахованиюФССНС)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплатаИВзносы.Ссылка,
	|	НачисленнаяЗарплатаИВзносы.Подразделение,
	|	НачисленнаяЗарплатаИВзносы.ВидОперации,
	|	НачисленнаяЗарплатаИВзносы.СпособРасчетов,
	|	НачисленнаяЗарплатаИВзносы.НеОблагаетсяНДФЛ,
	|	НачисленнаяЗарплатаИВзносы.ВидРезерва,
	|	НачисленнаяЗарплатаИВзносы.РезервБУ,
	|	НачисленнаяЗарплатаИВзносы.РезервНУ,
	|	НачисленнаяЗарплатаИВзносы.ОплатаСдельныхРабот,
	|	НачисленнаяЗарплатаИВзносы.НастройкаСчетовУчета,
	|	НачисленнаяЗарплатаИВзносы.ВидНачисленияОплатыТрудаДляНУ,
	|	НачисленнаяЗарплатаИВзносы.ФизическоеЛицо,
	|	НачисленнаяЗарплатаИВзносы.СчетКт,
	|	НачисленнаяЗарплатаИВзносы.ТипНалога,
	|	НачисленнаяЗарплатаИВзносы.ВидПлатежаВГосБюджет,
	|	НачисленнаяЗарплатаИВзносы.ИдентификаторСтроки
	|
	|ИМЕЮЩИЕ
	|	СУММА(НачисленнаяЗарплатаИВзносы.Сумма) <> 0";
	
	ТекстыЗапроса.Добавить(ТекстЗапросаВТНачисленнаяЗарплатаИВзносы, ИмяРегистра);
	
#КонецОбласти
	
КонецПроцедуры

Функция ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтТаблицаВыработкаСотрудников";
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	ВыработкаСотрудников.Период,
	|	ВыработкаСотрудников.Организация,
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	
	|	ВыработкаСотрудников.ПартияПроизводства,
	|	ВыработкаСотрудников.ЗаказНаПроизводство,
	|	ВыработкаСотрудников.КодСтрокиПродукция,
	|	ВыработкаСотрудников.ВидРабот,
	|	ВыработкаСотрудников.ГруппаПродукции,
	|	ВыработкаСотрудников.Этап,
	
	|	ВыработкаСотрудников.ТипНалога,
	|	ВыработкаСотрудников.ВидПлатежаВГосБюджет,
	|	ВыработкаСотрудников.ВидНачисленияОплатыТруда,
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.ВидФондаВзносов,
	|	ВыработкаСотрудников.СпособРасчетов,
	|	ВыработкаСотрудников.НеОблагаетсяНДФЛ,
	
	|	ВыработкаСотрудников.СтатьяКалькуляции,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов,
	|	ВыработкаСотрудников.СчетУчета,
	|	ВыработкаСотрудников.Субконто1,
	|	ВыработкаСотрудников.Субконто2,
	|	ВыработкаСотрудников.Субконто3,
	|	ВыработкаСотрудников.Сотрудник,
	
	|	ВыработкаСотрудников.Сумма,
	|	ВыработкаСотрудников.СуммаРегл,
	|	ВыработкаСотрудников.ВременнаяРазница,
	|	ВыработкаСотрудников.ПостояннаяРазница,
	|
	|	ВыработкаСотрудников.ИдентификаторСтроки
	|
	|ПОМЕСТИТЬ ВтТаблицаВыработкаСотрудников
	|ИЗ
	|	&ТаблицаВыработкаСотрудников КАК ВыработкаСотрудников";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	Возврат ТекстЗапроса;
	
КонецФункции

Процедура УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос)
	
	Если Запрос.Параметры.Свойство("ТаблицаВыработкаСотрудников") Тогда
		Возврат;
	КонецЕсли;
	
	Запрос.УстановитьПараметр("ТаблицаВыработкаСотрудников", 
		ОтражениеЗарплатыВФинансовомУчетеУП.РаспределитьНачисленияПоЭтапамПроизводства(Запрос.Параметры));
	
КонецПроцедуры

#КонецОбласти

Функция ТекстЗапросаТаблицаТрудозатратыНезавершенногоПроизводства(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ТрудозатратыНезавершенногоПроизводства";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = РасчетСебестоимостиЛокализация.ТекстЗапросаНастроекНДД("", "ОтражениеЗарплатыВФинансовомУчете_ТекстЗапросаТаблицаТрудозатратыНезавершенногоПроизводства")
		+ ОбщегоНазначения.РазделительПакетаЗапросов();
	РасчетСебестоимостиЛокализация.УстановитьПараметрыЗапросаПоНастройкамНДД(Запрос);
	
	ТекстЗапроса = ТекстЗапроса + "
	|ВЫБРАТЬ
	|	&Период                                  КАК Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)   КАК ВидДвижения,
	|	&Организация                             КАК Организация,
	|	ВыработкаСотрудников.Подразделение       КАК Подразделение,
	|	ВыработкаСотрудников.ПартияПроизводства  КАК ПартияПроизводства,
	|	ВыработкаСотрудников.ЗаказНаПроизводство КАК ЗаказНаПроизводство,
	|	ВыработкаСотрудников.КодСтрокиПродукция  КАК КодСтрокиПродукция,
	|	ВыработкаСотрудников.Этап                КАК Этап,
	|	ВыработкаСотрудников.СтатьяКалькуляции   КАК СтатьяКалькуляции,
	|	ВыработкаСотрудников.ВидРабот            КАК ВидРабот,
	|	ВыработкаСотрудников.ГруппаПродукции     КАК ГруппаПродукции,
	|	ВыработкаСотрудников.ВидФондаВзносов     КАК ВидФондаВзносов,
	|	СУММА(ВыработкаСотрудников.Сумма)        КАК Стоимость,
	|	СУММА(ВыработкаСотрудников.СуммаРегл)    КАК СтоимостьРегл,
	|	СУММА(ВыработкаСотрудников.ВременнаяРазница) КАК ВременнаяРазница,
	|	СУММА(ВыработкаСотрудников.ПостояннаяРазница) КАК ПостояннаяРазница,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(УчетнаяПолитикаПоНДД.ПлательщикНДД, ЛОЖЬ)
	|			И &Период > &ДатаНачалаУчетаПоНДД
	|			ТОГДА СУММА(ВыработкаСотрудников.СуммаРегл - ВыработкаСотрудников.ПостояннаяРазница - ВыработкаСотрудников.ВременнаяРазница)
	|		ИНАЧЕ 0
	|	КОНЕЦ КАК СтоимостьНДД,
	|	
	|	ВыработкаСотрудников.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ВидФондаВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыФондовВзносов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|	
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|
	|	ЛЕВОЕ СОЕДИНЕНИЕ УчетнаяПолитикаПоНДД КАК УчетнаяПолитикаПоНДД
	|	ПО УчетнаяПолитикаПоНДД.Организация = &Организация
	|
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов = НЕОПРЕДЕЛЕНО
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.ПартияПроизводства,
	|	ВыработкаСотрудников.ЗаказНаПроизводство,
	|	ВыработкаСотрудников.КодСтрокиПродукция,
	|	ВыработкаСотрудников.Этап,
	|	ВыработкаСотрудников.СтатьяКалькуляции,
	|	ВыработкаСотрудников.ВидРабот,
	|	ВыработкаСотрудников.ГруппаПродукции,
	|	ВыработкаСотрудников.ВидФондаВзносов,
	|	ВыработкаСотрудников.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ВидФондаВзносов = ЗНАЧЕНИЕ(Перечисление.ВидыФондовВзносов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ,
	|	УчетнаяПолитикаПоНДД.ПлательщикНДД
	|";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаОтражениеЗарплатыВФинансовомУчете(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ОтражениеЗарплатыВФинансовомУчете";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВыработкаСотрудников.Подразделение КАК Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	|	ВыработкаСотрудников.ВидНачисленияОплатыТруда,
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.ВидРабот,
	|	ВЫБОР
	|		КОГДА НЕ &Сводно
	|				И &ПроводкиПоРаботникам
	|			ТОГДА ВыработкаСотрудников.Сотрудник
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ КАК ФизическоеЛицо,
	|	ВыработкаСотрудников.ГруппаПродукции,
	|	ВыработкаСотрудников.ТипНалога,
	|	ВыработкаСотрудников.ВидПлатежаВГосБюджет,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов,
	|	ВыработкаСотрудников.СчетУчета,
	|	ВыработкаСотрудников.Субконто1,
	|	ВыработкаСотрудников.Субконто2,
	|	ВыработкаСотрудников.Субконто3,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СуммаРегл,
	|	СУММА(ВыработкаСотрудников.ПостояннаяРазница) КАК ПостояннаяРазница,
	|	СУММА(ВыработкаСотрудников.ВременнаяРазница) КАК ВременнаяРазница
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	|	ВыработкаСотрудников.ВидНачисленияОплатыТруда,
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.ВидРабот,
	|	ВЫБОР
	|		КОГДА НЕ &Сводно
	|				И &ПроводкиПоРаботникам
	|			ТОГДА ВыработкаСотрудников.Сотрудник
	|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка)
	|	КОНЕЦ,
	|	ВыработкаСотрудников.ГруппаПродукции,
	|	ВыработкаСотрудников.ТипНалога,
	|	ВыработкаСотрудников.ВидПлатежаВГосБюджет,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов,
	|	ВыработкаСотрудников.СчетУчета,
	|	ВыработкаСотрудников.Субконто1,
	|	ВыработкаСотрудников.Субконто2,
	|	ВыработкаСотрудников.Субконто3";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаВтИсходныеПрочиеРасходы(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтИсходныеПрочиеРасходы";
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтНачисленнаяЗарплатаИВзносы", ТекстыЗапроса) Тогда
		ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаСНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаБезНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаБезНДСУпр,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СуммаСНДСРегл,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СуммаБезНДСРегл,
	|	0 КАК ПостояннаяРазница,
	|	0 КАК ВременнаяРазница,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|
	|ПОМЕСТИТЬ ВтИсходныеПрочиеРасходы
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|ГДЕ
	|	ВТРасходыПоСтатьям.ВидОперации НЕ В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	И НЕ ВТРасходыПоСтатьям.РезервБУ И НЕ ВТРасходыПоСтатьям.РезервНУ
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка по прочим работам
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВыработкаСотрудников.Подразделение КАК Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов КАК СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СуммаСНДС,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СуммаБезНДС,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СуммаБезНДСУпр,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СуммаСНДСРегл,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СуммаБезНДСРегл,
	|	СУММА(ВыработкаСотрудников.ПостояннаяРазница) КАК ПостояннаяРазница,
	|	СУММА(ВыработкаСотрудников.ВременнаяРазница) КАК ВременнаяРазница,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	
	|	ВыработкаСотрудников.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВыработкаСотрудников.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ЕжегодныйОтпускОценочныеОбязательства
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|	0 КАК СуммаСНДС,
	|	0 КАК СуммаБезНДС,
	|	0 КАК СуммаБезНДСУпр,
	|	0 КАК СуммаСНДСРегл,
	|	0 КАК СуммаБезНДСРегл,
	// значение ПР задается здесь т.к. сумма по БУ равна нулю
	|	ВЫБОР КОГДА НЕ Реквизиты.ПринятиеКналоговомуУчету 
	|		ТОГДА СУММА(ВТРасходыПоСтатьям.Сумма)
	|		ИНАЧЕ 0 
	|	КОНЕЦ КАК ПостояннаяРазница,
	|	- СУММА(ВТРасходыПоСтатьям.Сумма) КАК ВременнаяРазница,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|	 
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|	ЛЕВОЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.СтатьиРасходов КАК Реквизиты
	|	ПО Реквизиты.Ссылка = ВТРасходыПоСтатьям.СтатьяРасходов
	|ГДЕ
	|	(ВТРасходыПоСтатьям.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства))
	|		ИЛИ (ВТРасходыПоСтатьям.РезервБУ И НЕ ВТРасходыПоСтатьям.РезервНУ))
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	Реквизиты.ПринятиеКналоговомуУчету,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ЕжегодныйОтпускРезервы
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаСНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаБезНДС,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаБезНДСУпр,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СуммаСНДСРегл,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СуммаБезНДСРегл,
	|	0 КАК ПостояннаяРазница,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК ВременнаяРазница,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|	 
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|ГДЕ
	|	(ВТРасходыПоСтатьям.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы)
	|		ИЛИ (НЕ ВТРасходыПоСтатьям.РезервБУ И ВТРасходыПоСтатьям.РезервНУ))
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаВтПрочиеРасходы(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтПрочиеРасходы";
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтИсходныеПрочиеРасходы", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтИсходныеПрочиеРасходы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = РегистрыНакопления.ПрочиеРасходы.ТекстЗапросаТаблицаВтПрочиеРасходы();
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаПрочиеРасходы(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ПрочиеРасходы";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПрочиеРасходы", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПрочиеРасходы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = РегистрыНакопления.ПрочиеРасходы.ТекстЗапросаТаблицаПрочиеРасходы();
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаВтИсходныеПартииПрочихРасходов(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтИсходныеПартииПрочихРасходов";
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтНачисленнаяЗарплатаИВзносы", ТекстыЗапроса) Тогда
		ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	&Ссылка КАК ДокументПоступленияРасходов,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаАктивовПассивов,
	|	ЗНАЧЕНИЕ(Справочник.КлючиАналитикиУчетаПартий.ПустаяСсылка)	КАК АналитикаУчетаПартий,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Стоимость,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СтоимостьБезНДС,
	|	0 КАК НДСУпр,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СтоимостьРегл,
	|	0 КАК ВременнаяРазница,
	|	0 КАК ПостояннаяРазница,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|
	|ПОМЕСТИТЬ ВтИсходныеПартииПрочихРасходов
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|ГДЕ
	|	ВТРасходыПоСтатьям.ВидОперации НЕ В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|											ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы))
	|	И НЕ ВТРасходыПоСтатьям.РезервБУ И НЕ ВТРасходыПоСтатьям.РезервНУ
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка по прочим работам
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВыработкаСотрудников.Подразделение КАК Подразделение,
	|	&Ссылка КАК ДокументПоступленияРасходов,
	|	ВыработкаСотрудников.СтатьяРасходов КАК СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаАктивовПассивов,
	|	ЗНАЧЕНИЕ(Справочник.КлючиАналитикиУчетаПартий.ПустаяСсылка)	КАК АналитикаУчетаПартий,
	|	ВыработкаСотрудников.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|
	|	СУММА(ВыработкаСотрудников.Сумма) КАК Стоимость,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СтоимостьБезНДС,
	|	0 КАК НДСУпр,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СтоимостьРегл,
	|	0 КАК ВременнаяРазница,
	|	0 КАК ПостояннаяРазница,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	
	|	ВыработкаСотрудников.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	 ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВыработкаСотрудников.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.ИдентификаторСтроки,
	|	 ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ЕжегодныйОтпускОценочныеОбязательства
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	&Ссылка КАК ДокументПоступленияРасходов,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаАктивовПассивов,
	|	ЗНАЧЕНИЕ(Справочник.КлючиАналитикиУчетаПартий.ПустаяСсылка)	КАК АналитикаУчетаПартий,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|
	|	0 КАК Стоимость,
	|	0 КАК СтоимостьБезНДС,
	|	0 КАК НДСУпр,
	|	0 КАК СтоимостьРегл,
	|	- СУММА(ВТРасходыПоСтатьям.Сумма) КАК ВременнаяРазница,
	|	0 КАК ПостояннаяРазница,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|ГДЕ
	|	(ВТРасходыПоСтатьям.РезервБУ
	|		ИЛИ ВТРасходыПоСтатьям.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства)))
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// ЕжегодныйОтпускРезервы
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ВТРасходыПоСтатьям.Подразделение КАК Подразделение,
	|	&Ссылка КАК ДокументПоступленияРасходов,
	|	ВТРасходыПоСтатьям.СтатьяРасходов КАК СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаАктивовПассивов,
	|	ЗНАЧЕНИЕ(Справочник.КлючиАналитикиУчетаПартий.ПустаяСсылка)	КАК АналитикаУчетаПартий,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаУчетаНоменклатуры,
	|	НЕОПРЕДЕЛЕНО КАК ВидДеятельностиНДС,
	|
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Стоимость,
	|	СУММА(ВЫРАЗИТЬ(ВТРасходыПоСтатьям.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СтоимостьБезНДС,
	|	0 КАК НДСУпр,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК СтоимостьРегл,
	|	СУММА(ВТРасходыПоСтатьям.Сумма) КАК ВременнаяРазница,
	|	0 КАК ПостояннаяРазница,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК ВТРасходыПоСтатьям
	|ГДЕ
	|	(ВТРасходыПоСтатьям.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы)
	|		ИЛИ ВТРасходыПоСтатьям.РезервНУ)
	|	И ВТРасходыПоСтатьям.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВТРасходыПоСтатьям.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТРасходыПоСтатьям.Подразделение,
	|	ВТРасходыПоСтатьям.НаправлениеДеятельности,
	|	ВТРасходыПоСтатьям.СтатьяРасходов,
	|	ВТРасходыПоСтатьям.АналитикаРасходов,
	|	ВТРасходыПоСтатьям.ИдентификаторСтроки,
	|	ВЫБОР КОГДА ВТРасходыПоСтатьям.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаВтПартииПрочихРасходов(Запрос, ТекстыЗапроса)
	
	ИмяРегистра = "ВтПартииПрочихРасходов";
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтИсходныеПартииПрочихРасходов", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтИсходныеПартииПрочихРасходов(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = РегистрыНакопления.ПартииПрочихРасходов.ТекстЗапросаТаблицаВтПартииПрочихРасходов();
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаПартииПрочихРасходов(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ПартииПрочихРасходов";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПартииПрочихРасходов", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПартииПрочихРасходов(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = РегистрыНакопления.ПартииПрочихРасходов.ТекстЗапросаТаблицаПартииПрочихРасходов();
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаДвиженияДоходыРасходыПрочиеАктивыПассивы(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ДвиженияДоходыРасходыПрочиеАктивыПассивы";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтНачисленнаяЗарплатаИВзносы", ТекстыЗапроса) Тогда
		ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса =
	// начисленная зарплата на расходы
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ                                             КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаРасходов,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		НачисленнаяЗарплата.ТипНалога
	|	КОНЕЦ                                             КАК АналитикаАктивовПассивов,
	|	НачисленнаяЗарплата.Подразделение                 КАК КорПодразделение,
	|	НачисленнаяЗарплата.НаправлениеДеятельности       КАК КорНаправлениеДеятельности,
	|	НачисленнаяЗарплата.СтатьяРасходов                КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаДоходов,
	|	НачисленнаяЗарплата.АналитикаРасходов             КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(НачисленнаяЗарплата.Сумма) КАК СуммаРегл,
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|	
	|	НачисленнаяЗарплата.ВидОперации КАК ВидОперацииПоЗарплате,
	|	НачисленнаяЗарплата.СпособРасчетов КАК СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК НачисленнаяЗарплата
	|ГДЕ
	|	НачисленнаяЗарплата.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ НачисленнаяЗарплата.РезервБУ
	|	И НачисленнаяЗарплата.СтатьяРасходов ССЫЛКА ПланВидовХарактеристик.СтатьиРасходов
	|	И НачисленнаяЗарплата.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплата.Подразделение,
	|	НачисленнаяЗарплата.ТипНалога,
	|	НачисленнаяЗарплата.СтатьяРасходов,
	|	НачисленнаяЗарплата.АналитикаРасходов,
	|	НачисленнаяЗарплата.НаправлениеДеятельности,
	|	НачисленнаяЗарплата.ВидОперации,
	|	НачисленнаяЗарплата.СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеВознагражденияЗаСчетРезервов) КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ                                             КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаРасходов,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		НачисленнаяЗарплата.ТипНалога
	|	КОНЕЦ                                             КАК АналитикаАктивовПассивов,
	|	НачисленнаяЗарплата.Подразделение                 КАК КорПодразделение,
	|	НачисленнаяЗарплата.НаправлениеДеятельности       КАК КорНаправлениеДеятельности,
	|	НачисленнаяЗарплата.СтатьяРасходов                КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаДоходов,
	|	НачисленнаяЗарплата.АналитикаРасходов             КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(НачисленнаяЗарплата.Сумма) КАК СуммаРегл,
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|	
	|	НачисленнаяЗарплата.ВидОперации КАК ВидОперацииПоЗарплате,
	|	НачисленнаяЗарплата.СпособРасчетов КАК СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК НачисленнаяЗарплата
	|ГДЕ
	|	(НачисленнаяЗарплата.ВидОперации В (
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|			ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|		ИЛИ (НачисленнаяЗарплата.РезервБУ И НЕ НачисленнаяЗарплата.РезервНУ))
	|	И НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И НачисленнаяЗарплата.СтатьяРасходов ССЫЛКА ПланВидовХарактеристик.СтатьиРасходов
	|	И НачисленнаяЗарплата.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплата.Подразделение,
	|	НачисленнаяЗарплата.ТипНалога,
	|	НачисленнаяЗарплата.СтатьяРасходов,
	|	НачисленнаяЗарплата.АналитикаРасходов,
	|	НачисленнаяЗарплата.НаправлениеДеятельности,
	|	НачисленнаяЗарплата.ВидОперации,
	|	НачисленнаяЗарплата.СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка на расходы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)    КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ                                               КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                        КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК АналитикаРасходов,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		ВыработкаСотрудников.ТипНалога
	|	КОНЕЦ                                               КАК АналитикаАктивовПассивов,

	|	ВыработкаСотрудников.Подразделение                  КАК КорПодразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности        КАК КорНаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов                 КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорАналитикаДоходов,
	|	ВыработкаСотрудников.АналитикаРасходов              КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВыработкаСотрудников.Сумма) КАК Сумма,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СуммаУпр,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|	
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате КАК ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СпособРасчетов КАК СпособРасчетов,
	|	ВыработкаСотрудников.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиРасходов
	|	И ВыработкаСотрудников.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.ТипНалога,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаРасходов,
	|	ВыработкаСотрудников.НаправлениеДеятельности,
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СпособРасчетов,
	|	ВыработкаСотрудников.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// начисленная зарплата на прочие активы и пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ                                                  КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                           КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                           КАК АналитикаРасходов,
	|	ВЫБОР КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		НачисленнаяЗарплата.ТипНалога
	|	КОНЕЦ                                                  КАК АналитикаАктивовПассивов,

	|	НачисленнаяЗарплата.Подразделение                      КАК КорПодразделение,
	|	НачисленнаяЗарплата.НаправлениеДеятельности            КАК КорНаправлениеДеятельности,
	|	НачисленнаяЗарплата.СтатьяРасходов                     КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                           КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                           КАК КорАналитикаРасходов,
	|	НачисленнаяЗарплата.АналитикаАктивовПассивов           КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(НачисленнаяЗарплата.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	НачисленнаяЗарплата.ВидОперации КАК ВидОперацииПоЗарплате,
	|	НачисленнаяЗарплата.СпособРасчетов КАК СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК НачисленнаяЗарплата
	|ГДЕ
	|	НЕ НачисленнаяЗарплата.РезервБУ
	|	И НачисленнаяЗарплата.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НачисленнаяЗарплата.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И НачисленнаяЗарплата.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплата.ТипНалога,
	|	НачисленнаяЗарплата.Подразделение,
	|	НачисленнаяЗарплата.НаправлениеДеятельности,
	|	НачисленнаяЗарплата.СтатьяРасходов,
	|	НачисленнаяЗарплата.АналитикаАктивовПассивов,
	|	НачисленнаяЗарплата.ВидОперации,
	|	НачисленнаяЗарплата.СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка на прочие активы и пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,
	|
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ                                                       КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                                КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                                КАК АналитикаРасходов,
	|	ВЫБОР КОГДА ВыработкаСотрудников.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		НЕОПРЕДЕЛЕНО
	|	ИНАЧЕ
	|		ВыработкаСотрудников.ТипНалога
	|	КОНЕЦ                                                       КАК АналитикаАктивовПассивов,

	|	ВыработкаСотрудников.Подразделение                          КАК КорПодразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)   КАК КорНаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов                         КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                                КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                                КАК КорАналитикаРасходов,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов               КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВыработкаСотрудников.Сумма) КАК Сумма,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК СуммаУпр,
	|	СУММА(ВыработкаСотрудников.СуммаРегл) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате КАК ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СпособРасчетов КАК СпособРасчетов,
	|	ВыработкаСотрудников.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И ВыработкаСотрудников.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.ТипНалога,
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов,
	|	ВыработкаСотрудников.ВидОперацииПоЗарплате,
	|	ВыработкаСотрудников.СпособРасчетов,
	|	ВыработкаСотрудников.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Взносы, выплачиваемые за счет резервов, двигаются с пустой аналитики на заполненную.
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачислениеВознагражденияЗаСчетРезервов) КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,
	
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)        КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)     КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоВознаграждениям)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоСтраховымВзносам)
	|	КОНЕЦ КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                                  КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                                  КАК АналитикаРасходов,
	|	НачисленнаяЗарплата.ВидРезерва                                КАК АналитикаАктивовПассивов,
	
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)        КАК КорПодразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)     КАК КорНаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА НачисленнаяЗарплата.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                                  КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                                  КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                                  КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(НачисленнаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(НачисленнаяЗарплата.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	НачисленнаяЗарплата.ВидОперации КАК ВидОперацииПоЗарплате,
	|	НачисленнаяЗарплата.СпособРасчетов КАК СпособРасчетов,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ КАК НеОблагаетсяНДФЛ
	|	
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК НачисленнаяЗарплата
	|ГДЕ
	|	НачисленнаяЗарплата.РезервБУ ИЛИ НачисленнаяЗарплата.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленнаяЗарплата.ТипНалога,
	|	НачисленнаяЗарплата.ВидОперации,
	|	НачисленнаяЗарплата.СпособРасчетов,
	|	НачисленнаяЗарплата.ВидРезерва,
	|	НачисленнаяЗарплата.НеОблагаетсяНДФЛ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// удержанная зарплата на прочие активы и пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.УдержаниеИзЗарплатыСотрудника) КАК ХозяйственнаяОперация,
	|	
	|	&Организация КАК Организация,
	
	|	УдержаннаяЗарплата.ПодразделениеПредприятия    КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	УдержаннаяЗарплата.СтатьяАктивовПассивов       КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                   КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                   КАК АналитикаРасходов,
	|	УдержаннаяЗарплата.АналитикаАктивовПассивов    КАК АналитикаАктивовПассивов,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)    КАК КорПодразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК КорНаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                   КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                   КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                   КАК КорАналитикаАктивовПассивов,
	
	|	СУММА(ВЫРАЗИТЬ(УдержаннаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(УдержаннаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(УдержаннаяЗарплата.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	УдержаннаяЗарплата.ВидОперации КАК ВидОперацииПоЗарплате,
	|	УдержаннаяЗарплата.СпособРасчетов КАК СпособРасчетов,
	|	ЛОЖЬ
	|	
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК УдержаннаяЗарплата
	|ГДЕ
	|	УдержаннаяЗарплата.Ссылка = &Ссылка
	|	И УдержаннаяЗарплата.ВидОперации НЕ В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм),
	|										   ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок))
	|	И &ИспользоватьУчетПрочихАктивовПассивов
	|
	|СГРУППИРОВАТЬ ПО
	|	УдержаннаяЗарплата.ПодразделениеПредприятия,
	|	УдержаннаяЗарплата.СтатьяАктивовПассивов,
	|	УдержаннаяЗарплата.АналитикаАктивовПассивов,
	|	УдержаннаяЗарплата.ВидОперации,
	|	УдержаннаяЗарплата.СпособРасчетов
	|
	// проценты по займам сотрудникам.
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачисленияПоЗаймамВыданным) КАК ХозяйственнаяОперация,
	|
	|	&Организация КАК Организация,
	
	|	ПроцентыПоЗаймам.ПодразделениеПредприятия           КАК Подразделение,
	|	НЕОПРЕДЕЛЕНО                                        КАК НаправлениеДеятельности,
	|	ПроцентыПоЗаймам.СтатьяДоходов                      КАК Статья,
	|	ПроцентыПоЗаймам.АналитикаДоходов                   КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК АналитикаАктивовПассивов,
	
	|	ПроцентыПоЗаймам.ПодразделениеПредприятия           КАК КорПодразделение,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорНаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ЗаймыВыданные) КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                        КАК КорАналитикаАктивовПассивов,
	
	|	СУММА(ВЫРАЗИТЬ(ПроцентыПоЗаймам.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(ПроцентыПоЗаймам.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(ПроцентыПоЗаймам.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.НачисленоПроцентовПоЗайму) КАК ВидОперацииПоЗарплате,
	|	ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПустаяСсылка) КАК СпособРасчетов,
	|	ЛОЖЬ
	|
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК ПроцентыПоЗаймам
	|ГДЕ
	|	ПроцентыПоЗаймам.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	ПроцентыПоЗаймам.ПодразделениеПредприятия,
	|	ПроцентыПоЗаймам.СтатьяДоходов,
	|	ПроцентыПоЗаймам.АналитикаДоходов
	|
	// возврат излишне выплаченных суммы вследствие счетных ошибок на доходы
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.УдержаниеИзЗарплатыСотрудника) КАК ХозяйственнаяОперация,
	|
	|	&Организация КАК Организация,
	
	|	УдержаннаяЗарплата.ПодразделениеПредприятия   КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	УдержаннаяЗарплата.СтатьяДоходов              КАК Статья,
	|	УдержаннаяЗарплата.АналитикаДоходов           КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                  КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                  КАК АналитикаАктивовПассивов,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)    КАК КорПодразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК КорНаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                  КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                  КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                  КАК КорАналитикаАктивовПассивов,
	
	|	СУММА(ВЫРАЗИТЬ(УдержаннаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(УдержаннаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(УдержаннаяЗарплата.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок) КАК ВидОперацииПоЗарплате,
	|	ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ПустаяСсылка) КАК СпособРасчетов,
	|	ЛОЖЬ
	|
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК УдержаннаяЗарплата
	|ГДЕ
	|	УдержаннаяЗарплата.Ссылка = &Ссылка
	|	И УдержаннаяЗарплата.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок)
	|
	|СГРУППИРОВАТЬ ПО
	|	УдержаннаяЗарплата.ПодразделениеПредприятия,
	|	УдержаннаяЗарплата.СтатьяДоходов,
	|	УдержаннаяЗарплата.АналитикаДоходов
	|
	// НДФЛ корреспондирует со статьей активов\пассивов оплата труда
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОтражениеНалоговВзносовСЗаработнойПлаты) КАК ХозяйственнаяОперация,
	|	&Организация КАК Организация,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)    КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги) КАК Статья,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК АналитикаРасходов,
	|	НачисленныйНДФЛ.ТипНалога                         КАК АналитикаАктивовПассивов,

	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)    КАК КорПодразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК КорНаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК КорСтатья,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО                                      КАК КорАналитикаАктивовПассивов,

	|	СУММА(ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма,
	|	СУММА(ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК СуммаУпр,
	|	СУММА(НачисленныйНДФЛ.Сумма) КАК СуммаРегл,
	|	
	|	НЕОПРЕДЕЛЕНО КАК Валюта,
	|	НЕОПРЕДЕЛЕНО КАК СуммаВВалюте,
	|
	|	НачисленныйНДФЛ.ВидОперации КАК ВидОперацииПоЗарплате,
	|	НачисленныйНДФЛ.СпособРасчетов КАК СпособРасчетов,
	|	ЛОЖЬ
	|
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК НачисленныйНДФЛ
	|ГДЕ
	|	НачисленныйНДФЛ.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	НачисленныйНДФЛ.ВидОперации,
	|	НачисленныйНДФЛ.СпособРасчетов,
	|	НачисленныйНДФЛ.ТипНалога";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаДвиженияДенежныеСредстваДоходыРасходы(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ДвиженияДенежныеСредстваДоходыРасходы";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	Значение(Перечисление.ХозяйственныеОперации.УдержаниеНеизрасходованныхПодотчетныхСумм) КАК ХозяйственнаяОперация,
	|	&Организация КАК Организация,
	|	УдержаннаяЗарплата.ПодразделениеПредприятия КАК Подразделение,
	|
	|	УдержаннаяЗарплата.ФизическоеЛицо КАК ДенежныеСредства,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыДенежныхСредств.ДенежныеСредстваУПодотчетногоЛица) КАК ТипДенежныхСредств,
	|	НЕОПРЕДЕЛЕНО КАК СтатьяДвиженияДенежныхСредств,
	|	&ВалютаРегл КАК Валюта,
	|
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК СтатьяДоходовРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаДоходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаРасходов,
	|	НЕОПРЕДЕЛЕНО КАК АналитикаАктивовПассивов,
	|
	|	УдержаннаяЗарплата.Сумма КАК Сумма,
	|	УдержаннаяЗарплата.Сумма КАК СуммаРегл,
	|	УдержаннаяЗарплата.Сумма КАК СуммаВВалюте,
	|
	|	НЕОПРЕДЕЛЕНО КАК ИсточникГФУДенежныхСредств,
	|	НЕОПРЕДЕЛЕНО КАК ИсточникГФУДоходовРасходов
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК УдержаннаяЗарплата
	|	
	|ГДЕ
	|	УдержаннаяЗарплата.Ссылка = &Ссылка
	|	И УдержаннаяЗарплата.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм)
	|";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаПрочиеАктивыПассивы(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ПрочиеАктивыПассивы";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтНачисленнаяЗарплатаИВзносы", ТекстыЗапроса) Тогда
		ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПрочиеРасходы", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПрочиеРасходы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПартииПрочихРасходов", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПартииПрочихРасходов(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса =
	// постатейная зарплата к выплате на пассивы
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
	|	&Организация КАК Организация,
	|	ВЫБОР
	|		КОГДА Строки.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Строки.Подразделение
	|	КОНЕЦ КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|
	|СГРУППИРОВАТЬ ПО
	|	ВЫБОР КОГДА Строки.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Строки.Подразделение
	|	КОНЕЦ
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// взносы с постатейной зарплаты к перечислению на пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги),
	|	Строки.ТипНалога,
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.ТипНалога <> ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.ТипНалога
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// сдельная зарплата к выплате на пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
	|	&Организация КАК Организация,
	|	ВЫБОР
	|		КОГДА Строки.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Строки.Подразделение
	|	КОНЕЦ КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	СУММА(Строки.Сумма) КАК Сумма
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК Строки
	|ГДЕ
	|	Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВЫБОР КОГДА Строки.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Строки.Подразделение
	|	КОНЕЦ
	|
	|ИМЕЮЩИЕ
	|	СУММА(Строки.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// взносы со сдельной зарплаты к перечислению на пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги),
	|	Строки.ТипНалога,
	|	СУММА(Строки.Сумма) КАК Сумма
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК Строки
	|ГДЕ
	|	Строки.ТипНалога <> ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.ТипНалога
	|
	|ИМЕЮЩИЕ
	|	СУММА(Строки.Сумма) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// зарплата и взносы на активы / пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход) КАК ВидДвижения,
	|	&Организация КАК Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	Строки.СтатьяРасходов КАК Статья,
	|	ВЫБОР
	|		КОГДА Строки.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Перечисление.СтатьиБезАналитики.ПустаяСсылка)
	|			ТОГДА НЕОПРЕДЕЛЕНО
	|		ИНАЧЕ Строки.АналитикаАктивовПассивов
	|	КОНЕЦ КАК Аналитика,
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.СтатьяРасходов,
	|	Строки.АналитикаАктивовПассивов,
	|	Строки.Подразделение,
	|	Строки.НаправлениеДеятельности
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка на активы / пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	&Организация,
	|	ВыработкаСотрудников.Подразделение КАК Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВыработкаСотрудников.СтатьяРасходов КАК Статья,
	|	ВЫБОР
	|		КОГДА ВыработкаСотрудников.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Перечисление.СтатьиБезАналитики.ПустаяСсылка)
	|			ТОГДА НЕОПРЕДЕЛЕНО
	|		ИНАЧЕ ВыработкаСотрудников.АналитикаАктивовПассивов
	|	КОНЕЦ КАК Аналитика,
	|	СУММА(ВыработкаСотрудников.Сумма) КАК Сумма
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК ВыработкаСотрудников
	|ГДЕ
	|	ВыработкаСотрудников.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И ВыработкаСотрудников.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|СГРУППИРОВАТЬ ПО
	|	ВыработкаСотрудников.СтатьяРасходов,
	|	ВыработкаСотрудников.АналитикаАктивовПассивов,
	|	ВыработкаСотрудников.Подразделение,
	|	ВыработкаСотрудников.НаправлениеДеятельности
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(ВыработкаСотрудников.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Зарплату и взносы за счет резерва перекладываем между статьями, с пустой аналитики на заполненную
	// приход по пустой аналитике.
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоВознаграждениям)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоСтраховымВзносам)
	|	КОНЕЦ КАК Статья,
	|	Строки.ВидРезерва КАК Аналитика,
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И (Строки.РезервБУ ИЛИ Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства)))
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.ВидРезерва,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоВознаграждениям)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоСтраховымВзносам)
	|	КОНЕЦ
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расход с заполненной аналитикой
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ КАК Статья,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА НЕОПРЕДЕЛЕНО
	|		ИНАЧЕ Строки.ТипНалога
	|	КОНЕЦ КАК Аналитика,
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) КАК Сумма
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И (Строки.РезервБУ ИЛИ Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства)))
	|
	|СГРУППИРОВАТЬ ПО
	|	Строки.ТипНалога
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// уменьшаем сумму по оплате труда на величину удержаний
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	&Организация,
	|	ВЫБОР
	|		КОГДА Удержания.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Удержания.ПодразделениеПредприятия
	|	КОНЕЦ КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда),
	|	НЕОПРЕДЕЛЕНО,
	|	СУММА(ВЫРАЗИТЬ(Удержания.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)))
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержания
	|ГДЕ
	|	Удержания.Ссылка = &Ссылка
	|	И &ИспользоватьУчетПрочихАктивовПассивов
	|
	|СГРУППИРОВАТЬ ПО
	|	ВЫБОР КОГДА Удержания.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ Удержания.ПодразделениеПредприятия
	|	КОНЕЦ,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(Удержания.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// уменьшаем сумму по оплате труда на величину НДФЛ
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	&Организация,
	|	ВЫБОР
	|		КОГДА НачисленныйНДФЛ.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ НачисленныйНДФЛ.ПодразделениеПредприятия
	|	КОНЕЦ КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда),
	|	НЕОПРЕДЕЛЕНО,
	|	СУММА(ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)))
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК НачисленныйНДФЛ
	|ГДЕ
	|	НачисленныйНДФЛ.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	ВЫБОР КОГДА НачисленныйНДФЛ.СпособРасчетов = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетовСФизическимиЛицами.ОплатаТруда)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка)
	|		ИНАЧЕ НачисленныйНДФЛ.ПодразделениеПредприятия
	|	КОНЕЦ,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)
	|
	|ИМЕЮЩИЕ
	|	СУММА(ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2))) <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// удержания
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	&Организация,
	|	Удержания.ПодразделениеПредприятия КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	Удержания.СтатьяАктивовПассивов,
	|	ВЫБОР
	|		КОГДА Удержания.АналитикаАктивовПассивов = ЗНАЧЕНИЕ(Перечисление.СтатьиБезАналитики.ПустаяСсылка)
	|			ТОГДА НЕОПРЕДЕЛЕНО
	|		ИНАЧЕ Удержания.АналитикаАктивовПассивов
	|	КОНЕЦ КАК Аналитика,
	|	СУММА(ВЫРАЗИТЬ(Удержания.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)))
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержания
	|ГДЕ
	|	Удержания.Ссылка = &Ссылка
	|	И Удержания.ВидОперации НЕ В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм),
	|								   ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок))
	|	И &ИспользоватьУчетПрочихАктивовПассивов
	|
	|СГРУППИРОВАТЬ ПО
	|	Удержания.СтатьяАктивовПассивов,
	|	Удержания.АналитикаАктивовПассивов,
	|	Удержания.ПодразделениеПредприятия,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛ
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги),
	|	НДФЛ.ТипНалога,
	|	СУММА(ВЫРАЗИТЬ(НДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)))
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК НДФЛ
	|ГДЕ
	|	НДФЛ.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	НДФЛ.ТипНалога
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Начисленные проценты по займам
	|ВЫБРАТЬ
	|	&Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	&Организация,
	|	Проценты.ПодразделениеПредприятия КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ЗаймыВыданные),
	|	НЕОПРЕДЕЛЕНО,
	|	СУММА(ВЫРАЗИТЬ(Проценты.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)))
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК Проценты
	|ГДЕ
	|	Проценты.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	Проценты.ПодразделениеПредприятия
	|";
	ТекстЗапроса = ТекстЗапроса + "ОБЪЕДИНИТЬ ВСЕ"
		+ РегистрыНакопления.ПрочиеАктивыПассивы.ТекстЗапросаТаблицаПрочиеАктивыПассивы();
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаДвиженияПоПрочимАктивамПассивам(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ДвиженияПоПрочимАктивамПассивам";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	УстановитьПараметрЗапросаТаблицаВыработкаСотрудников(Запрос);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтТаблицаВыработкаСотрудников", ТекстыЗапроса) Тогда
		ТекстЗапросаВтВыработкаСотрудников(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтНачисленнаяЗарплатаИВзносы", ТекстыЗапроса) Тогда
		ТекстЗапросаВтНачисленнаяЗарплатаИВзносы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса =
	// постатейная зарплата к выплате на пассивы
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Строки.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|	И Строки.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// взносы с постатейной зарплаты к перечислению на пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги) КАК Статья,
	|	Строки.ТипНалога КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Строки.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|	
	// при начислении взносов за счет прочих активов и пассвов, взносы на травматизм должны иметь уникальный ID финзаписи
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФССНС)
	|			И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|			И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|			ТОГДА ПОДСТРОКА(Строки.ИдентификаторСтроки, 29, 8) + ПОДСТРОКА(Строки.ИдентификаторСтроки, 9, 20) + ПОДСТРОКА(Строки.ИдентификаторСтроки, 1, 8)
	|		ИНАЧЕ Строки.ИдентификаторСтроки
	|	КОНЕЦ КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.ТипНалога <> ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|	И Строки.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// сдельная зарплата к выплате на пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Строки.СуммаРегл КАК СуммаРегл,
	|	Строки.Сумма КАК СуммаУпр,
	|	Строки.Сумма КАК СуммаСНДС,
	|	Строки.Сумма КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК Строки
	|ГДЕ
	|	Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И (Строки.Сумма <> 0 ИЛИ Строки.СуммаРегл <> 0)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// взносы со сдельной зарплаты к перечислению на пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги) КАК Статья,
	|	Строки.ТипНалога КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Строки.СуммаРегл КАК СуммаРегл,
	|	Строки.Сумма КАК СуммаУпр,
	|	Строки.Сумма КАК СуммаСНДС,
	|	Строки.Сумма КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК Строки
	|ГДЕ
	|	Строки.ТипНалога <> ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|	И (Строки.Сумма <> 0 ИЛИ Строки.СуммаРегл <> 0)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// зарплата и взносы на активы / пассивы
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	Строки.СтатьяРасходов КАК Статья,
	|	Строки.АналитикаАктивовПассивов КАК Аналитика,
	|	Строки.НастройкаСчетовУчета КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	Строки.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|	
	// при начислении взносов за счет прочих активов и пассвов, взносы на травматизм должны иметь уникальный ID финзаписи
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ФССНС)
	|			ТОГДА ПОДСТРОКА(Строки.ИдентификаторСтроки, 29, 8) + ПОДСТРОКА(Строки.ИдентификаторСтроки, 9, 20) + ПОДСТРОКА(Строки.ИдентификаторСтроки, 1, 8)
	|		ИНАЧЕ Строки.ИдентификаторСтроки
	|	КОНЕЦ КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|	И НЕ Строки.ОплатаСдельныхРабот
	|	И Строки.ВидОперации НЕ В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства))
	|	И НЕ Строки.РезервБУ
	|	И Строки.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// выработка на активы / пассивы
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	Строки.СтатьяРасходов КАК Статья,
	|	Строки.АналитикаАктивовПассивов КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	Строки.СуммаРегл КАК СуммаРегл,
	|	Строки.Сумма КАК СуммаУпр,
	|	Строки.Сумма КАК СуммаСНДС,
	|	Строки.Сумма КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВтТаблицаВыработкаСотрудников КАК Строки
	|ГДЕ
	|	Строки.СтатьяРасходов Ссылка ПланВидовХарактеристик.СтатьиАктивовПассивов
	|	И Строки.СтатьяРасходов <> ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|	И (Строки.Сумма <> 0 ИЛИ Строки.СуммаРегл <> 0)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Зарплату и взносы за счет резерва перекладываем между статьями, с пустой аналитики на заполненную
	// приход по пустой аналитике.
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоВознаграждениям)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.РезервыПоСтраховымВзносам)
	|	КОНЕЦ КАК Статья,
	|	Строки.ВидРезерва КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	Строки.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И (Строки.РезервБУ ИЛИ Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства)))
	|	И Строки.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// расход с заполненной аналитикой
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Строки.Подразделение КАК Подразделение,
	|	Строки.НаправлениеДеятельности КАК НаправлениеДеятельности,
	|	ВЫБОР
	|		КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка)
	|			ТОГДА ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда)
	|		ИНАЧЕ ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги)
	|	КОНЕЦ КАК Статья,
	|	Строки.ТипНалога КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Строки.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Строки.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|	
	|	Строки.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР КОГДА Строки.ТипНалога = ЗНАЧЕНИЕ(Перечисление.ТипыНалогов.ПустаяСсылка) ТОГДА
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеЗаработнойПлаты)
	|	ИНАЧЕ
	|		ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНалоговВзносовСЗаработнойПлаты)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	ВТНачисленнаяЗарплатаИВзносы КАК Строки
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И (Строки.РезервБУ ИЛИ Строки.ВидОперации В (
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства),
	|		ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства)))
	|	И Строки.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// уменьшаем сумму по оплате труда на величину удержаний
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	Удержанния.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|
	|	Удержанния.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ВЫБОР
	|		КОГДА Удержанния.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм)
	|			ТОГДА ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.УдержаниеНеизрасходованныхПодотчетныхСумм)
	|		ИНАЧЕ
	|			ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.УдержаниеИзЗарплатыСотрудника)
	|	КОНЕЦ КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержанния
	|ГДЕ
	|	Удержанния.Ссылка = &Ссылка
	|	И &ИспользоватьУчетПрочихАктивовПассивов
	|	И Удержанния.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// уменьшаем сумму по оплате труда на величину НДФЛ
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ОплатаТруда) КАК Статья,
	|	НЕОПРЕДЕЛЕНО КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	НачисленныйНДФЛ.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(НачисленныйНДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|
	|	НачисленныйНДФЛ.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНДФЛ) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК НачисленныйНДФЛ
	|ГДЕ
	|	НачисленныйНДФЛ.Ссылка = &Ссылка
	|	И НачисленныйНДФЛ.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// удержания
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Удержанния.ПодразделениеПредприятия КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	Удержанния.СтатьяАктивовПассивов КАК Статья,
	|	Удержанния.АналитикаАктивовПассивов КАК Аналитика,
	|	Удержанния.НастройкаСчетовУчета КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	Удержанния.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Удержанния.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|
	|	Удержанния.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.УдержаниеИзЗарплатыСотрудника) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержанния
	|ГДЕ
	|	Удержанния.Ссылка = &Ссылка
	|	И Удержанния.ВидОперации НЕ В (ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм),
	|								   ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок))
	|	И &ИспользоватьУчетПрочихАктивовПассивов
	|	И Удержанния.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// НДФЛ
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.Налоги) КАК Статья,
	|	НДФЛ.ТипНалога КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Кредит) КАК ДебетКредит,
	|
	|	НДФЛ.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(НДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(НДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(НДФЛ.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|
	|	НДФЛ.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.ОтражениеНДФЛ) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныйНДФЛ КАК НДФЛ
	|ГДЕ
	|	НДФЛ.Ссылка = &Ссылка
	|	И НДФЛ.Сумма <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	// Начисленные проценты по займам
	|ВЫБРАТЬ
	|	&Период,
	|	&Организация,
	|	Проценты.ПодразделениеПредприятия КАК Подразделение,
	|	ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.ПустаяСсылка) КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ЗаймыВыданные) КАК Статья,
	|	Проценты.ФизическоеЛицо КАК Аналитика,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиСчетовУчетаПрочихОпераций.ПустаяСсылка) КАК НастройкаСчетовУчета,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыДвиженийПрочихАктивовПассивов.Дебет) КАК ДебетКредит,
	|
	|	Проценты.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(Проценты.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	ВЫРАЗИТЬ(Проценты.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаСНДС,
	|	ВЫРАЗИТЬ(Проценты.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаБезНДС,
	|
	|	Проценты.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.НачисленияПоЗаймамВыданным) КАК НастройкаХозяйственнойОперации
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК Проценты
	|ГДЕ
	|	Проценты.Ссылка = &Ссылка
	|	И Проценты.Сумма <> 0
	|";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	Возврат ТекстЗапроса;
	
КонецФункции

Процедура ОтразитьПрочуюВыручку(Запрос, ТекстыЗапроса, Регистры)
	
	ТекстПрочаяВыручка =
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК Партнер,
	|	НЕОПРЕДЕЛЕНО КАК Контрагент,
	|	НЕОПРЕДЕЛЕНО КАК Договор,
	|	ТаблицаДоходы.ПодразделениеПредприятия КАК Подразделение,
	|	ТаблицаДоходы.ФизическоеЛицо КАК ФизическоеЛицо,
	|	НЕОПРЕДЕЛЕНО КАК НаправлениеДеятельности,
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачисленияПоЗаймамВыданным) КАК ХозяйственнаяОперация,
	|	ТаблицаДоходы.СтатьяДоходов КАК СтатьяДоходов,
	|	ТаблицаДоходы.АналитикаДоходов КАК АналитикаДоходов,
	|	0 КАК Количество,
	|	ТаблицаДоходы.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ВыручкаБезНДСУпр,
	|	ТаблицаДоходы.Сумма КАК ВыручкаБезНДСРегл,
	|	0 КАК НДСУпр,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК СтавкаНДС,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНеОблагаетсяНДС) КАК НалогообложениеНДС,
	|	&ВалютаРегл КАК ВалютаВзаиморасчетов,
	|	НЕОПРЕДЕЛЕНО КАК ОбъектРасчетов,
	|	ТаблицаДоходы.Сумма КАК СуммаВзаиморасчетов,
	|	ТаблицаДоходы.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.НачисленияПоЗаймамВыданным) КАК НастройкаХозяйственнойОперации
	|	
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК ТаблицаДоходы
	|ГДЕ
	|	ТаблицаДоходы.Ссылка = &Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК Партнер,
	|	НЕОПРЕДЕЛЕНО КАК Контрагент,
	|	НЕОПРЕДЕЛЕНО КАК Договор,
	|	ТаблицаДоходы.ПодразделениеПредприятия КАК Подразделение,
	|	ТаблицаДоходы.ФизическоеЛицо КАК ФизическоеЛицо,
	|	НЕОПРЕДЕЛЕНО КАК НаправлениеДеятельности,
	|	НЕОПРЕДЕЛЕНО КАК ХозяйственнаяОперация,
	|	ТаблицаДоходы.СтатьяДоходов КАК СтатьяДоходов,
	|	ТаблицаДоходы.АналитикаДоходов КАК АналитикаДоходов,
	|	0 КАК Количество,
	|	ТаблицаДоходы.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ВыручкаБезНДСУпр,
	|	ТаблицаДоходы.Сумма КАК ВыручкаБезНДСРегл,
	|	0 КАК НДСУпр,
	|	0 КАК НДСРегл,
	|	НЕОПРЕДЕЛЕНО КАК СтавкаНДС,
	|	ЗНАЧЕНИЕ(Перечисление.ТипыНалогообложенияНДС.ПродажаНеОблагаетсяНДС) КАК НалогообложениеНДС,
	|	&ВалютаРегл КАК ВалютаВзаиморасчетов,
	|	ТаблицаДоходы.Сумма КАК СуммаВзаиморасчетов,
	|	НЕОПРЕДЕЛЕНО КАК ОбъектРасчетов,
	|	ТаблицаДоходы.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.УдержаниеИзЗарплатыСотрудника) КАК НастройкаХозяйственнойОперации
	|	
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК ТаблицаДоходы
	|ГДЕ
	|	ТаблицаДоходы.Ссылка = &Ссылка
	|	И ТаблицаДоходы.ВидОперации = Значение(Перечисление.ВидыОперацийПоЗарплате.ВозвратИзлишнеВыплаченныхСуммВследствиеСчетныхОшибок)
	|
	|";
	
	ДоходыИРасходыСервер.ОтразитьПрочуюВыручку(Запрос, ТекстыЗапроса, Регистры, ТекстПрочаяВыручка);
	
КонецПроцедуры


Функция ТекстЗапросаТаблицаРеестрДокументов(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "РеестрДокументов";
	
	Если Не ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	&Ссылка КАК Ссылка,
	|	&Дата КАК ДатаДокументаИБ,
	|	&Номер КАК НомерДокументаИБ,
	|	&ИдентификаторМетаданных КАК ТипСсылки,
	|	&Организация КАК Организация,
	|	НЕОПРЕДЕЛЕНО КАК Контрагент,
	|	НЕОПРЕДЕЛЕНО КАК Подразделение,
	|	ДанныеДокумента.Ответственный КАК Ответственный,
	|	ДанныеДокумента.Комментарий КАК Комментарий,
	|	НЕОПРЕДЕЛЕНО КАК Сумма,
	|	ДанныеДокумента.Проведен КАК Проведен,
	|	ДанныеДокумента.ПометкаУдаления КАК ПометкаУдаления,
	|	ЛОЖЬ КАК ДополнительнаяЗапись,
	|	НЕОПРЕДЕЛЕНО КАК РазделительЗаписи,
	|	"""" КАК Дополнительно,
	|	&Дата КАК ДатаПервичногоДокумента,
	|	&Номер КАК НомерПервичногоДокумента,
	|	&Исправление КАК СторноИсправление,
	|	&СторнируемыйДокумент КАК СторнируемыйДокумент,
	|	&ИсправляемыйДокумент КАК ИсправляемыйДокумент,
	|	&Дата КАК ДатаОтраженияВУчете
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете КАК ДанныеДокумента
	|ГДЕ
	|	ДанныеДокумента.Ссылка = &Ссылка";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	Возврат ТекстЗапроса;
	
КонецФункции

Функция АдаптированныйТекстЗапросаДвиженийПоРегистру(ИмяРегистра) Экспорт

	Запрос = Новый Запрос;
	ТекстыЗапроса = Новый СписокЗначений;
	
	ПолноеИмяДокумента           = ПустаяСсылка().Метаданные().ПолноеИмя();
	СинонимТаблицыДокумента      = "";
	ВЗапросеЕстьИсточник         = Истина;
	
	ЗначенияПараметров = Новый Структура;
	ЗначенияПараметров.Вставить("ИдентификаторМетаданных",
		ОбщегоНазначения.ИдентификаторОбъектаМетаданных(ПолноеИмяДокумента));
	
	Если ИмяРегистра = "РеестрДокументов" Тогда
		
		ТекстЗапроса = ТекстЗапросаТаблицаРеестрДокументов(Запрос, ТекстыЗапроса, ИмяРегистра);
		СинонимТаблицыДокумента = "ДанныеДокумента";
		
	Иначе
		ТекстИсключения = НСтр("ru = 'В документе %ПолноеИмяДокумента% не реализована адаптация текста запроса формирования движений по регистру %ИмяРегистра%.';
								|en = 'In document %ПолноеИмяДокумента%, adaptation of request for generating records of register %ИмяРегистра% is not implemented.'");
		ТекстИсключения = СтрЗаменить(ТекстИсключения, "%ПолноеИмяДокумента%", ПолноеИмяДокумента);
		ТекстИсключения = СтрЗаменить(ТекстИсключения, "%ИмяРегистра%", ИмяРегистра);
		
		ВызватьИсключение ТекстИсключения;
	КонецЕсли;
	
	Если ИмяРегистра = "РеестрДокументов" Тогда
		
		ТекстЗапроса = ОбновлениеИнформационнойБазыУТ.АдаптироватьЗапросПроведенияПоНезависимомуРегистру(
			ТекстЗапроса,
			ПолноеИмяДокумента,
			СинонимТаблицыДокумента,
			ВЗапросеЕстьИсточник,
			,);
		
	КонецЕсли;
	
	Результат = ОбновлениеИнформационнойБазыУТ.РезультатАдаптацииЗапроса();
	Результат.ЗначенияПараметров = ЗначенияПараметров;
	Результат.ТекстЗапроса = ТекстЗапроса;
	
	Возврат Результат;
	
КонецФункции


Функция ТекстЗапросаТаблицаДенежныеСредстваУПодотчетныхЛиц(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ДенежныеСредстваУПодотчетныхЛиц";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	&Период КАК Период,
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
	|	&Организация КАК Организация,
	|	УдержаннаяЗарплата.ФизическоеЛицо КАК ПодотчетноеЛицо,
	|	УдержаннаяЗарплата.ПодразделениеПредприятия КАК Подразделение,
	|	&ВалютаРегл КАК Валюта,
	|
	|	УдержаннаяЗарплата.ЦельВыдачи КАК ЦельВыдачи,
	|	
	|	УдержаннаяЗарплата.Сумма КАК Сумма,
	|	УдержаннаяЗарплата.Сумма КАК СуммаРегл,
	|	ВЫРАЗИТЬ(УдержаннаяЗарплата.Сумма * &КоэффициентПересчетаВВалютуУпр КАК ЧИСЛО(31,2)) КАК СуммаУпр,
	|	УдержаннаяЗарплата.Сумма КАК КОтчету,
	|	
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.УдержаниеНеизрасходованныхПодотчетныхСумм) КАК ХозяйственнаяОперация,
	|	
	|	УдержаннаяЗарплата.ИдентификаторСтроки КАК ИдентификаторФинЗаписи,
	|	ЗНАЧЕНИЕ(Справочник.НастройкиХозяйственныхОпераций.УдержаниеНеизрасходованныхПодотчетныхСумм) КАК НастройкаХозяйственнойОперации
	|	
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК УдержаннаяЗарплата
	|	
	|ГДЕ
	|	УдержаннаяЗарплата.Ссылка = &Ссылка
	|	И УдержаннаяЗарплата.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.УдержаниеНеизрасходованныхПодотчетныхСумм)";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ОтражениеДокументовВРеглУчете";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	МассивТекстовЗапроса = Новый Массив;
	
	ТекстЗапроса =
	"ВЫБРАТЬ
	|	&Дата						 КАК Период,
	|	&Организация 				 КАК Организация,
	|	НАЧАЛОПЕРИОДА(&Период, ДЕНЬ) КАК ДатаОтражения";
	МассивТекстовЗапроса.Добавить(ТекстЗапроса);
	
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПрочиеРасходы", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПрочиеРасходы(Запрос, ТекстыЗапроса);
	КонецЕсли;
	Если Не ПроведениеДокументов.ЕстьТаблицаЗапроса("ВтПартииПрочихРасходов", ТекстыЗапроса) Тогда
		ТекстЗапросаТаблицаВтПартииПрочихРасходов(Запрос, ТекстыЗапроса);
	КонецЕсли;
	ТекстЗапроса = ДоходыИРасходыСервер.ДополнитьТекстЗапросаТаблицаОтражениеДокументовВРеглУчете(, "Дата");
	МассивТекстовЗапроса.Добавить(ТекстЗапроса);
	
	ТекстЗапроса = СтрСоединить(МассивТекстовЗапроса, ОбщегоНазначенияУТ.РазделительЗапросовВОбъединении(Истина));
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаПорядокОтраженияПрочихОпераций(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ПорядокОтраженияПрочихОпераций";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса =
	"ВЫБРАТЬ ПЕРВЫЕ 1
	|	&Дата	КАК Дата,
	|	&Организация КАК Организация,
	|	&Ссылка КАК Документ,
	|	"""" КАК ИдентификаторСтроки
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленнаяЗарплатаИВзносы КАК Строки
	|	ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.СпособыОтраженияЗарплатыВБухУчете КАК СпособыОтражения
	|		ПО СпособыОтражения.Ссылка = Строки.СпособОтраженияЗарплатыВБухучете
	|ГДЕ
	|	Строки.Ссылка = &Ссылка
	|	И СпособыОтражения.ЕстьПрочиеОперации";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	Возврат ТекстЗапроса;
	
КонецФункции

Функция ТекстЗапросаТаблицаКУДиР(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "КнигаУчетаДоходовИРасходов";
	
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ПрименяетсяПСН = УчетнаяПолитика.ПрименяетсяПСН(Запрос.Параметры.Организация, Запрос.Параметры.Период);
	Запрос.УстановитьПараметр("ИспользуетсяПСН", ПрименяетсяПСН);
	
	Если НЕ ПроведениеДокументов.ЕстьТаблицаЗапроса("ТаблицаДействующихПатентов", ТекстыЗапроса) Тогда
		УчетУСНПСНСервер.ТекстЗапросаТаблицаДействующихПатентовПодразделениям(Запрос, ТекстыЗапроса);
	КонецЕсли;
	
	ТекстЗапроса = "
	|ВЫБРАТЬ
	|	&Период КАК Период,
	|	&Ссылка КАК Регистратор,
	|	&Организация КАК Организация,
	|	&Ссылка КАК ДокументВозникновенияДоходовРасходов,
	|	СУММА(УдержанныеПроцентыПоЗаймам.Сумма) КАК Графа4,
	|	СУММА(ВЫБОР
	|			КОГДА СтатьиДоходов.ВидДеятельностиДляНалоговогоУчетаЗатрат =
	|					ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ОсновнаяСистемаНалогообложения)
	|				ТОГДА УдержанныеПроцентыПоЗаймам.Сумма
	|			ИНАЧЕ 0
	|		КОНЕЦ) КАК Графа5,
	|	СУММА(0) КАК Графа6,
	|	СУММА(0) КАК Графа7,
	|	СУММА(0) КАК НДС,
	|	СУММА(ВЫБОР
	|			КОГДА НЕ &ИспользуетсяПСН И СтатьиДоходов.ВидДеятельностиДляНалоговогоУчетаЗатрат =
	|					ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ОсобыйПорядокНалогообложения)
	|				ТОГДА УдержанныеПроцентыПоЗаймам.Сумма
	|			ИНАЧЕ 0
	|		КОНЕЦ) КАК ДоходЕНВД,
	|	СУММА(ВЫБОР
	|			КОГДА &ИспользуетсяПСН И СтатьиДоходов.ВидДеятельностиДляНалоговогоУчетаЗатрат =
	|					ЗНАЧЕНИЕ(Перечисление.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ОсобыйПорядокНалогообложения)
	|				ТОГДА УдержанныеПроцентыПоЗаймам.Сумма
	|			ИНАЧЕ 0
	|		КОНЕЦ) КАК ДоходПатент,
	|	ЕСТЬNULL(ТаблицаДействующихПатентов.Патент, ЗНАЧЕНИЕ(Справочник.Патенты.ПустаяСсылка)) КАК Патент,
	|	&Номер КАК Номер,
	|	&Дата КАК Дата,
	|	ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.НачисленияПоЗаймамВыданным) КАК ХозяйственнаяОперация,
	|	ПроцентыПоЗаймам.СтатьяДоходов КАК Статья
	|	
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.НачисленныеПроцентыПоЗаймам КАК ПроцентыПоЗаймам
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК УдержанныеПроцентыПоЗаймам
	|		ПО ПроцентыПоЗаймам.Ссылка = УдержанныеПроцентыПоЗаймам.Ссылка
	|			И ПроцентыПоЗаймам.ФизическоеЛицо = УдержанныеПроцентыПоЗаймам.ФизическоеЛицо
	|			И ПроцентыПоЗаймам.ПодразделениеПредприятия = УдержанныеПроцентыПоЗаймам.ПодразделениеПредприятия
	|			И УдержанныеПроцентыПоЗаймам.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыОперацийПоЗарплате.ПроцентыПоЗайму)
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.СтатьиДоходов КАК СтатьиДоходов
	|		ПО ПроцентыПоЗаймам.СтатьяДоходов = СтатьиДоходов.Ссылка
	|		ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаДействующихПатентов КАК ТаблицаДействующихПатентов
	|		ПО ПроцентыПоЗаймам.ПодразделениеПредприятия = ТаблицаДействующихПатентов.Подразделение
	|			И &ИспользуетсяПСН
	|ГДЕ
	|	ПроцентыПоЗаймам.Ссылка = &Ссылка
	|
	|СГРУППИРОВАТЬ ПО
	|	ПроцентыПоЗаймам.СтатьяДоходов,
	|	ЕСТЬNULL(ТаблицаДействующихПатентов.Патент, ЗНАЧЕНИЕ(Справочник.Патенты.ПустаяСсылка))";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	Возврат ТекстЗапроса;
	
КонецФункции

#Область СлужебныеПроцедурыИФункцииПроведения

Функция ДополнительныеИсточникиДанныхДляДвижений(ИмяРегистра) Экспорт
	
	ИсточникиДанных = Новый Соответствие;
	
	Возврат ИсточникиДанных; 
	
КонецФункции

#КонецОбласти

Функция ТекстЗапросаТаблицаОценочныеОбязательстваПоСотрудникам(Запрос, ТекстыЗапроса, Регистры)
	
	ИмяРегистра = "ОценочныеОбязательстваПоСотрудникам";
	Если НЕ ПроведениеДокументов.ТребуетсяТаблицаДляДвижений(ИмяРегистра, Регистры) Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	ВыплатаЗаСчетРезервов.Ссылка,
	|	ВыплатаЗаСчетРезервов.Сотрудник,
	|	ВыплатаЗаСчетРезервов.ВидОперации,
	|	ВыплатаЗаСчетРезервов.Сумма,
	|	ВыплатаЗаСчетРезервов.СтраховыеВзносы,
	|	ВыплатаЗаСчетРезервов.ФССНесчастныеСлучаи,
	|	ВыплатаЗаСчетРезервов.СтатьяФинансирования,
	|	ВыплатаЗаСчетРезервов.Резерв КАК Резерв,
	|	ВыплатаЗаСчетРезервов.РезервБУ КАК РезервБУ,
	|	ВыплатаЗаСчетРезервов.РезервНУ КАК РезервНУ
	|
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.ВыплатаЗаСчетРезервов КАК ВыплатаЗаСчетРезервов
	|ГДЕ
	|	ВыплатаЗаСчетРезервов.Ссылка = &Ссылка";
	
	ТекстыЗапроса.Добавить(ТекстЗапроса, ИмяРегистра);
	
	// Используется для получения настроек резервов отпусков при отражении движений в регистр
	ТекстЗапросаРеквизитов = 
	"ВЫБРАТЬ
	|	&Организация,
	|	&ПериодРегистрации";
	
	ТекстыЗапроса.Добавить(ТекстЗапросаРеквизитов, "ПараметрыРезервовОтпусков");
	
	Возврат ТекстЗапроса;
	
КонецФункции

#КонецОбласти

#Область Отчеты

// Определяет список команд отчетов.
//
// Параметры:
//   КомандыОтчетов - См. ВариантыОтчетовПереопределяемый.ПередДобавлениемКомандОтчетов.КомандыОтчетов
//   Параметры - См. ВариантыОтчетовПереопределяемый.ПередДобавлениемКомандОтчетов.Параметры
//
Процедура ДобавитьКомандыОтчетов(КомандыОтчетов, Параметры) Экспорт
	
КонецПроцедуры

#КонецОбласти

// Заполняет список команд печати.
//
// Параметры:
//   КомандыПечати - см. УправлениеПечатью.СоздатьКоллекциюКомандПечати
//
Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
	
	
	
КонецПроцедуры

Процедура ЗаполнитьПодразделениеПредприятияНачисленоСдельно(НачисленнаяЗарплатаИВзносы, СтруктураПараметров)
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	ТрудозатратыНЗП.Подразделение КАК ПодразделениеПредприятия,
	|	ТрудозатратыНЗП.Сотрудник КАК ФизическоеЛицо,
	|	СУММА(ТрудозатратыНЗП.НормативнаяСтоимость) КАК НормативнаяСтоимость
	|ПОМЕСТИТЬ ВТБазаРаспределения
	|ИЗ
	|	РегистрНакопления.ТрудозатратыНезавершенногоПроизводства КАК ТрудозатратыНЗП
	|ГДЕ
	|	ТрудозатратыНЗП.Регистратор ССЫЛКА Документ.ВыработкаСотрудников
	|	И ТрудозатратыНЗП.Сотрудник В(&СписокФизическихЛиц)
	|	И ТрудозатратыНЗП.Организация = &Организация
	|	И ТрудозатратыНЗП.Период МЕЖДУ &НачалоПериода И &КонецПериода
	|
	|СГРУППИРОВАТЬ ПО
	|	ТрудозатратыНЗП.Подразделение,
	|	ТрудозатратыНЗП.Сотрудник
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Выработка.Подразделение,
	|	ТЧСотрудники.Работник,
	|	СУММА(ТЧСотрудники.Сумма)
	|ИЗ
	|	Документ.ВыработкаСотрудников.Работники КАК ТЧСотрудники
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ВыработкаСотрудников КАК Выработка
	|		ПО ТЧСотрудники.Ссылка = Выработка.Ссылка
	|ГДЕ
	|	ТЧСотрудники.Работник В(&СписокФизическихЛиц)
	|	И Выработка.Проведен
	|	И Выработка.Организация = &Организация
	|	И Выработка.Дата МЕЖДУ &НачалоПериода И &КонецПериода
	|	И Выработка.ВидНаряда В (ЗНАЧЕНИЕ(Перечисление.ВидыБригадныхНарядов.Ремонт), ЗНАЧЕНИЕ(Перечисление.ВидыБригадныхНарядов.ПрочиеРаботы)) 
	|	И Выработка.Автораспределение
	|
	|СГРУППИРОВАТЬ ПО
	|	ТЧСотрудники.Работник,
	|	Выработка.Подразделение
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	Выработка.Подразделение,
	|	ТЧСотрудники.Работник,
	|	СУММА(ТЧСотрудники.Сумма)
	|ИЗ
	|	Документ.ВыработкаСотрудников.ВидыРабот КАК ТЧСотрудники
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ВыработкаСотрудников КАК Выработка
	|		ПО ТЧСотрудники.Ссылка = Выработка.Ссылка
	|ГДЕ
	|	ТЧСотрудники.Работник В(&СписокФизическихЛиц)
	|	И Выработка.Проведен
	|	И Выработка.Организация = &Организация
	|	И Выработка.Дата МЕЖДУ &НачалоПериода И &КонецПериода
	|	И Выработка.ВидНаряда В (ЗНАЧЕНИЕ(Перечисление.ВидыБригадныхНарядов.Ремонт), ЗНАЧЕНИЕ(Перечисление.ВидыБригадныхНарядов.ПрочиеРаботы))
	|	И НЕ Выработка.Автораспределение
	|
	|СГРУППИРОВАТЬ ПО
	|	ТЧСотрудники.Работник,
	|	Выработка.Подразделение
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТБазаРаспределения.ПодразделениеПредприятия,
	|	СУММА(ВТБазаРаспределения.НормативнаяСтоимость) КАК Коэффициент,
	|	ВТБазаРаспределения.ФизическоеЛицо КАК ФизическоеЛицо
	|ИЗ
	|	ВТБазаРаспределения КАК ВТБазаРаспределения
	|
	|СГРУППИРОВАТЬ ПО
	|	ВТБазаРаспределения.ПодразделениеПредприятия,
	|	ВТБазаРаспределения.ФизическоеЛицо
	|ИТОГИ ПО
	|	ФизическоеЛицо
	|;");
	
	СписокФизическихЛиц = НачисленнаяЗарплатаИВзносы.ВыгрузитьКолонку("ФизическоеЛицо");
	СписокСпособов = НачисленнаяЗарплатаИВзносы.ВыгрузитьКолонку("СпособОтраженияЗарплатыВБухучете");
	ОплатаСдельныхРабот = ОбщегоНазначения.ЗначениеРеквизитаОбъектов(СписокСпособов, "ОплатаСдельныхРабот");
	
	Запрос.УстановитьПараметр("СписокФизическихЛиц",    СписокФизическихЛиц);
	Запрос.УстановитьПараметр("НачалоПериода",          НачалоМесяца(СтруктураПараметров.ПериодРегистрации));
	Запрос.УстановитьПараметр("КонецПериода",           КонецМесяца(СтруктураПараметров.ПериодРегистрации));
	Запрос.УстановитьПараметр("Организация",            СтруктураПараметров.Организация);
	
	УстановитьПривилегированныйРежим(Истина);
	МассивРезультатов = Запрос.ВыполнитьПакет();
	
	ПодразделенияСдельщиков = МассивРезультатов[1].Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	МассивКолонок = ОбщегоНазначенияКлиентСервер.ЗначениеВМассиве("Сумма");
	ОбщегоНазначенияКлиентСервер.ДополнитьМассив(МассивКолонок, КолонкиВзносов());
	Колонки = СтрСоединить(МассивКолонок, ",");
	
	ТаблицаДополнения = НачисленнаяЗарплатаИВзносы.СкопироватьКолонки();
	
	МассивУдаляемыхСтрок = Новый Массив;
	
	Для Каждого Строка Из НачисленнаяЗарплатаИВзносы Цикл
		
		Если ЗначениеЗаполнено(Строка.СпособОтраженияЗарплатыВБухучете) Тогда
			НачисленоСдельно = ОплатаСдельныхРабот[Строка.СпособОтраженияЗарплатыВБухучете];
		Иначе
			НачисленоСдельно = Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.НачисленоСдельноДоход;
		КонецЕсли;
		
		Если Не НачисленоСдельно Тогда
			Продолжить;
		КонецЕсли;
		
		ПодразделенияСдельщиков.Сбросить();
		ПодразделенияСдельщиков.НайтиСледующий(Строка.ФизическоеЛицо, "ФизическоеЛицо");
		Выборка = ПодразделенияСдельщиков.Выбрать();
		
		Если Выборка.Количество() = 0 Тогда
			Продолжить;
		ИначеЕсли Выборка.Количество() = 1 Тогда
			
			Выборка.Следующий();
			Строка.ПодразделениеПредприятия = Выборка.ПодразделениеПредприятия;
			
			Продолжить;
		КонецЕсли;
		
		МассивКоэффициентов = Новый Массив;
		МассивПодразделений = Новый Массив;
		
		Пока Выборка.Следующий() Цикл
			МассивКоэффициентов.Добавить(Выборка.Коэффициент);
			МассивПодразделений.Добавить(Выборка.ПодразделениеПредприятия);
		КонецЦикла;
		
		МассивыРаспределений = Новый Структура();
		
		Для Каждого Колонка Из МассивКолонок Цикл
			
			Если Строка[Колонка] = 0 Тогда
				РезультатРаспределения = Новый Массив;
				Для Каждого Коэффициент Из МассивКоэффициентов Цикл
					РезультатРаспределения.Добавить(0);
				КонецЦикла;
			Иначе
				РезультатРаспределения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Строка[Колонка], МассивКоэффициентов);
			КонецЕсли;
			
			МассивыРаспределений.Вставить(Колонка, РезультатРаспределения);
			
		КонецЦикла;
		
		Индекс = 0;
		
		Для Каждого Коэффициент Из МассивКоэффициентов Цикл
			
			НоваяСтрока = ТаблицаДополнения.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка, , Колонки);
			
			Для Каждого Колонка Из МассивКолонок Цикл
				НоваяСтрока[Колонка] = МассивыРаспределений[Колонка][Индекс];
			КонецЦикла;
			
			НоваяСтрока.ПодразделениеПредприятия = МассивПодразделений[Индекс];
			
			Индекс = Индекс + 1;
			
		КонецЦикла;
		
		МассивУдаляемыхСтрок.Добавить(Строка);
		
	КонецЦикла;
	
	Для Каждого Строка Из МассивУдаляемыхСтрок Цикл
		НачисленнаяЗарплатаИВзносы.Удалить(Строка);
	КонецЦикла;
	
	ОбщегоНазначенияКлиентСервер.ДополнитьТаблицу(ТаблицаДополнения, НачисленнаяЗарплатаИВзносы);
	
КонецПроцедуры

Процедура ЗаполнитьСтатьиАналитикуРасходовПоУмолчанию(Объект, СтрокаТаблицы)
	
	// Получаем последние используемые значения по совпадающим сочетаниям заполненных полей.
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	Удержания.ФизическоеЛицо КАК ФизическоеЛицо,
	|	Удержания.ВидОперации КАК ВидОперации,
	|	Удержания.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
	|	Удержания.Контрагент КАК Контрагент,
	|	Удержания.СтатьяАктивовПассивов КАК СтатьяАктивовПассивов
	|ПОМЕСТИТЬ ВТУдержаннаяЗарплата
	|ИЗ
	|	&УдержаннаяЗарплата КАК Удержания
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	НачисленныеПроценты.ФизическоеЛицо КАК ФизическоеЛицо,
	|	НачисленныеПроценты.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
	|	НачисленныеПроценты.СтатьяДоходов КАК СтатьяДоходов
	|ПОМЕСТИТЬ ВТНачисленныеПроценты
	|ИЗ
	|	&НачисленныеПроцентыПоЗаймам КАК НачисленныеПроценты
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Удержания.ФизическоеЛицо КАК ФизическоеЛицо,
	|	Удержания.ВидОперации КАК ВидОперации,
	|	Удержания.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
	|	Удержания.Контрагент КАК Контрагент
	|ПОМЕСТИТЬ ВТНезаполненнаяАналитика
	|ИЗ
	|	ВТУдержаннаяЗарплата КАК Удержания
	|ГДЕ
	|	Удержания.СтатьяАктивовПассивов = ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиАктивовПассивов.ПустаяСсылка)
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	Удержания.ВидОперации
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	НачисленныеПроценты.ФизическоеЛицо КАК ФизическоеЛицо,
	|	НачисленныеПроценты.ПодразделениеПредприятия КАК ПодразделениеПредприятия
	|ПОМЕСТИТЬ ВТНезаполненнаяАналитикаДоходов
	|ИЗ
	|	ВТНачисленныеПроценты КАК НачисленныеПроценты
	|ГДЕ
	|	НачисленныеПроценты.СтатьяДоходов = ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиДоходов.ПустаяСсылка)
	|
	|ИНДЕКСИРОВАТЬ ПО
	|	НачисленныеПроценты.ФизическоеЛицо,
	|	НачисленныеПроценты.ПодразделениеПредприятия";
	
	МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	
	Запрос = Новый Запрос(ТекстЗапроса);
	Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
	Запрос.УстановитьПараметр("УдержаннаяЗарплата",          Объект.УдержаннаяЗарплата.Выгрузить());
	Запрос.УстановитьПараметр("НачисленныеПроцентыПоЗаймам", Объект.НачисленныеПроцентыПоЗаймам.Выгрузить());
	Запрос.Выполнить();
	
	Документы.ОтражениеЗарплатыВФинансовомУчете.СоздатьВТАналитикаДругихДокументов(МенеджерВременныхТаблиц, Объект.Ссылка, Объект.Дата);
	
	Если Найти(СтрокаТаблицы, "УдержаннаяЗарплата") Тогда
		ТекстЗапроса = 
		"ВЫБРАТЬ
		|	АналитикаДругихДокументов.ФизическоеЛицо КАК ФизическоеЛицо,
		|	АналитикаДругихДокументов.ВидОперации КАК ВидОперации,
		|	АналитикаДругихДокументов.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
		|	АналитикаДругихДокументов.СтатьяАктивовПассивов КАК СтатьяАктивовПассивов,
		|	АналитикаДругихДокументов.АналитикаАктивовПассивов КАК АналитикаАктивовПассивов,
		|	АналитикаДругихДокументов.СчетУчета КАК СчетУчета,
		|	АналитикаДругихДокументов.Субконто1 КАК Субконто1,
		|	АналитикаДругихДокументов.Субконто2 КАК Субконто2,
		|	АналитикаДругихДокументов.Субконто3 КАК Субконто3,
		|	3 КАК ТипСтатьи
		|ИЗ
		|	ЗаполненнаяСтатьяПассивов КАК АналитикаДругихДокументов";
		
		Запрос = Новый Запрос(ТекстЗапроса);
		Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
		РезультатЗапроса = Запрос.Выполнить();
		
		СписокСтатей = РезультатЗапроса.Выгрузить().ВыгрузитьКолонку("СтатьяАктивовПассивов");
		НастройкиСчетовПоУмолчанию = НастройкаСчетовУчетаСлужебныйВызовСервера.ДанныеНастроекСчетовУчетаПоУмолчанию(СписокСтатей);
		
		ОтборСтрок = Новый Структура("ФизическоеЛицо, ВидОперации, ПодразделениеПредприятия");
		
		Выборка = РезультатЗапроса.Выбрать();
		Пока Выборка.Следующий() Цикл
			ЗаполнитьЗначенияСвойств(ОтборСтрок, Выборка);
			
			НайденныеСтроки = Объект.УдержаннаяЗарплата.НайтиСтроки(ОтборСтрок);
			
			Для Каждого НайденнаяСтрока Из НайденныеСтроки Цикл
				
				НастройкаСчетовУчета = НастройкаСчетовУчетаКлиентСервер.СоставНастройкиСчетовУчета();
				
				ИсключаемыеПоля = "";
				
				//++ Локализация
				Если ПолучитьФункциональнуюОпцию("ИспользоватьРеглУчет") Тогда
					ЗаполнитьЗначенияСвойств(НастройкаСчетовУчета, Выборка, НастройкаСчетовУчетаКлиентСервер.РеквизитыНастройкиСчетаУчета());
				КонецЕсли;
				
				Если ЗначениеЗаполнено(НастройкаСчетовУчета.СчетУчета) Тогда
					Если ТипЗнч(Выборка.Субконто1) = Тип("СправочникСсылка.Контрагенты") И ЗначениеЗаполнено(НайденнаяСтрока.Контрагент) Тогда
						НастройкаСчетовУчета.Субконто1 = НайденнаяСтрока.Контрагент;
					КонецЕсли;
					
					Если ТипЗнч(Выборка.Субконто1) = Тип("СправочникСсылка.СтруктураПредприятия") И ЗначениеЗаполнено(НайденнаяСтрока.ПодразделениеПредприятия) Тогда
						НастройкаСчетовУчета.Субконто1 = НайденнаяСтрока.ПодразделениеПредприятия;
						Если ЗначениеЗаполнено(ИсключаемыеПоля) Тогда
							ИсключаемыеПоля = ИсключаемыеПоля + ",ПодразделениеПредприятия";
						Иначе
							ИсключаемыеПоля = "ПодразделениеПредприятия";
						КонецЕсли;
					КонецЕсли;
					
					Если ТипЗнч(Выборка.Субконто1) = Тип("СправочникСсылка.СтатьиДвиженияДенежныхСредств") И ЗначениеЗаполнено(НайденнаяСтрока.ЦельВыдачи) Тогда
						НастройкаСчетовУчета.Субконто1 = НайденнаяСтрока.ЦельВыдачи;
						Если ЗначениеЗаполнено(ИсключаемыеПоля) Тогда
							ИсключаемыеПоля = ИсключаемыеПоля + ",ЦельВыдачи";
						Иначе
							ИсключаемыеПоля = "ЦельВыдачи";
						КонецЕсли;
					КонецЕсли;
					
					Если ТипЗнч(Выборка.Субконто1) = Тип("СправочникСсылка.ФизическиеЛица") И ЗначениеЗаполнено(НайденнаяСтрока.ФизическоеЛицо) Тогда
						НастройкаСчетовУчета.Субконто1 = НайденнаяСтрока.ФизическоеЛицо;
						Если ЗначениеЗаполнено(ИсключаемыеПоля) Тогда
							ИсключаемыеПоля = ИсключаемыеПоля + ",ФизическоеЛицо";
						Иначе
							ИсключаемыеПоля = "ФизическоеЛицо";
						КонецЕсли;
					КонецЕсли;
				КонецЕсли;
				//-- Локализация
				
				ЗаполнитьЗначенияСвойств(НайденнаяСтрока, Выборка,,ИсключаемыеПоля);
				
				НастройкаСчетовПоУмолчанию = НастройкиСчетовПоУмолчанию[НайденнаяСтрока.СтатьяАктивовПассивов];
				
				Если НастройкаСчетовПоУмолчанию <> Неопределено Тогда
					//++ Локализация
					Если ПолучитьФункциональнуюОпцию("ИспользоватьРеглУчет")
					И НЕ ЗначениеЗаполнено(НастройкаСчетовУчета.СчетУчета) Тогда
						ЗаполнитьЗначенияСвойств(НастройкаСчетовУчета, НастройкаСчетовПоУмолчанию.ДанныеНастройки,
							НастройкаСчетовУчетаКлиентСервер.РеквизитыНастройкиСчетаУчета());
					КонецЕсли;
					//-- Локализация
					
					//++ НЕ УТКА
					Если ПолучитьФункциональнуюОпцию("ИспользоватьМеждународныйФинансовыйУчет") Тогда
						НастройкаСчетовУчета.НастройкиМеждународногоУчета = ОбщегоНазначения.СкопироватьРекурсивно(
							НастройкаСчетовПоУмолчанию.ДанныеНастройки.НастройкиМеждународногоУчета);
					КонецЕсли;
					//-- НЕ УТКА
				КонецЕсли;
				
				НастройкаСчетовЗаполнена = Ложь;
				//++ Локализация
				НастройкаСчетовЗаполнена = НастройкаСчетовЗаполнена ИЛИ ЗначениеЗаполнено(НастройкаСчетовУчета.СчетУчета);
				//-- Локализация

				//++ НЕ УТКА
				НастройкаСчетовЗаполнена = НастройкаСчетовЗаполнена ИЛИ НастройкаСчетовУчета.НастройкиМеждународногоУчета.Количество() > 0;
				//-- НЕ УТКА
				
				Если НастройкаСчетовЗаполнена Тогда
					НайденнаяСтрока.НастройкаСчетовУчета = НастройкаСчетовУчетаСервер.НоваяНастройкаСчетовУчета(НастройкаСчетовУчета);
				КонецЕсли;
				
			КонецЦикла;
			
		КонецЦикла;
	КонецЕсли;
	
	Если Найти(СтрокаТаблицы, "НачисленныеПроцентыПоЗаймам") Тогда
		ТекстЗапроса = 
		"ВЫБРАТЬ
		|	АналитикаДругихДокументов.ФизическоеЛицо КАК ФизическоеЛицо,
		|	АналитикаДругихДокументов.ПодразделениеПредприятия КАК ПодразделениеПредприятия,
		|	АналитикаДругихДокументов.СтатьяДоходов КАК СтатьяДоходов,
		|	АналитикаДругихДокументов.АналитикаДоходов КАК АналитикаДоходов
		|ИЗ
		|	ВТЗаполненнаяСтатьяДоходов КАК АналитикаДругихДокументов";
		
		Запрос = Новый Запрос(ТекстЗапроса);
		Запрос.МенеджерВременныхТаблиц = МенеджерВременныхТаблиц;
		РезультатЗапроса = Запрос.Выполнить();
		
		ОтборСтрок = Новый Структура("ФизическоеЛицо, ПодразделениеПредприятия");
		
		Выборка = РезультатЗапроса.Выбрать();
		Пока Выборка.Следующий() Цикл
			ЗаполнитьЗначенияСвойств(ОтборСтрок, Выборка);
			
			НайденныеСтроки = Объект.НачисленныеПроцентыПоЗаймам.НайтиСтроки(ОтборСтрок);
			Для Каждого НайденнаяСтрока Из НайденныеСтроки Цикл
				НайденнаяСтрока.СтатьяДоходов    = Выборка.СтатьяДоходов;
				НайденнаяСтрока.АналитикаДоходов = Выборка.АналитикаДоходов;
			КонецЦикла;
			
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры

Процедура ВыделитьОтпускаЗаСчетОценочныхОбязательств(НачисленнаяЗарплатаИВзносы, СтруктураПараметров)
	
	Если Не ОбщегоНазначения.ПодсистемаСуществует("ЗарплатаКадрыПриложения.ОценочныеОбязательстваЗарплатаКадры") Тогда
		Возврат;
	КонецЕсли;
	
	НастройкиРезервовОтпусков = РезервОтпусков.НастройкиРезервовОтпусков(СтруктураПараметров.Организация, СтруктураПараметров.ПериодРегистрации);
	Если Не НастройкиРезервовОтпусков.ФормироватьРезервБУ Тогда
		Возврат;
	КонецЕсли;
	
	Если НастройкиРезервовОтпусков.ФормироватьРезервНУ Тогда
		ВидОперацииРезервы = Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательстваИРезервы;
	Иначе
		ВидОперацииРезервы = Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускОценочныеОбязательства;
	КонецЕсли;
	
	Отбор = Новый Структура("ВидОперации", Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпуск);
	СтрокиОтпусков = НачисленнаяЗарплатаИВзносы.НайтиСтроки(Отбор);
	
	Отбор = Новый Структура("ВидОперации", Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпуска);
	СтрокиКомпенсаций = НачисленнаяЗарплатаИВзносы.НайтиСтроки(Отбор);
	
	ОбщегоНазначенияКлиентСервер.ДополнитьМассив(СтрокиОтпусков, СтрокиКомпенсаций);
	
	Если СтрокиОтпусков.Количество() = 0 Тогда
		Возврат;
	КонецЕсли;
	
	КолонкиВзносов = КолонкиВзносов(Ложь);
	КолонкиСуммирования = СтрСоединить(КолонкиВзносов, ",");
	
	ТаблицаОтпускаЗаСчетРезерва = ОтпускаЗаСчетРезерва(СтруктураПараметров.Организация, СтруктураПараметров.ПериодРегистрации);
	ТаблицаОтпускаЗаСчетРезерва.Индексы.Добавить("Сотрудник");
	
	Отбор = Новый Структура("Сотрудник");
	
	Для Каждого Строка Из СтрокиОтпусков Цикл
		
		Отбор.Сотрудник = Строка.Сотрудник;
		
		ОтпускСотрудникаЗаСчетРезерва = ТаблицаОтпускаЗаСчетРезерва.НайтиСтроки(Отбор);
		Если ОтпускСотрудникаЗаСчетРезерва.Количество() = 0 Тогда
			Продолжить;
		КонецЕсли;
		
		СтрокаВыплаты = ОтпускСотрудникаЗаСчетРезерва[0];
		Если СтрокаВыплаты.СуммаВыбыло < 0 Или СтрокаВыплаты.ВзносыВыбыло < 0 Или СтрокаВыплаты.ВзносыФССНСВыбыло < 0 Тогда
			Продолжить;
		КонецЕсли;
		
		ВзносыПоСтроке = СтруктураВзносовПоСтроке(Строка, КолонкиВзносов);
		
		Если Строка.Сумма <= СтрокаВыплаты.СуммаВыбыло И ВзносыПоСтроке.Взносы <= СтрокаВыплаты.ВзносыВыбыло И ВзносыПоСтроке.ВзносыФССНС <= СтрокаВыплаты.ВзносыФССНСВыбыло Тогда
			
			Если Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпуска Тогда
				Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства;
			Иначе
				Строка.ВидОперации = ВидОперацииРезервы;
			КонецЕсли;
			
			СтрокаВыплаты.СуммаВыбыло = СтрокаВыплаты.СуммаВыбыло - Строка.Сумма;
			СтрокаВыплаты.ВзносыВыбыло = СтрокаВыплаты.ВзносыВыбыло - ВзносыПоСтроке.Взносы;
			СтрокаВыплаты.ВзносыФССНСВыбыло = СтрокаВыплаты.ВзносыФССНСВыбыло - ВзносыПоСтроке.ВзносыФССНС;
			
		ИначеЕсли Строка.Сумма > СтрокаВыплаты.СуммаВыбыло Или ВзносыПоСтроке.Взносы > СтрокаВыплаты.ВзносыВыбыло Или ВзносыПоСтроке.ВзносыФССНС > СтрокаВыплаты.ВзносыФССНСВыбыло Тогда
			
			НоваяСтрока = НачисленнаяЗарплатаИВзносы.Вставить(НачисленнаяЗарплатаИВзносы.Индекс(Строка) + 1);
			
			ЗаполнитьЗначенияСвойств(НоваяСтрока, Строка,, "Сумма, " + КолонкиСуммирования);
			
			Если Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпуска Тогда
				НоваяСтрока.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпускаОценочныеОбязательства;
			Иначе
				НоваяСтрока.ВидОперации = ВидОперацииРезервы;
			КонецЕсли;
			
			СуммаРезерв = Мин(Строка.Сумма, СтрокаВыплаты.СуммаВыбыло);
			НоваяСтрока.Сумма = СуммаРезерв;
			Строка.Сумма = Строка.Сумма - НоваяСтрока.Сумма;
			
			ФССНСРезерв = Мин(Строка.ФССНесчастныеСлучаи, СтрокаВыплаты.ВзносыФССНСВыбыло);
			НоваяСтрока.ФССНесчастныеСлучаи = ФССНСРезерв;
			Строка.ФССНесчастныеСлучаи = Строка.ФССНесчастныеСлучаи - НоваяСтрока.ФССНесчастныеСлучаи;
			
			ВзносыРезерв  = Мин(ВзносыПоСтроке.Взносы, СтрокаВыплаты.ВзносыВыбыло);
			Распределение = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(ВзносыРезерв, ВзносыПоСтроке.МассивВзносов);
			
			Если Распределение <> Неопределено Тогда
				Индекс = 0;
				Для Каждого Колонка Из КолонкиВзносов Цикл
					НоваяСтрока[Колонка] = Распределение[Индекс];
					Строка[Колонка] = Строка[Колонка] - НоваяСтрока[Колонка];
					Индекс = Индекс + 1;
				КонецЦикла;
			КонецЕсли;
			
			СтрокаВыплаты.СуммаВыбыло = СтрокаВыплаты.СуммаВыбыло - СуммаРезерв;
			СтрокаВыплаты.ВзносыВыбыло = СтрокаВыплаты.ВзносыВыбыло - ВзносыРезерв;
			СтрокаВыплаты.ВзносыФССНСВыбыло = СтрокаВыплаты.ВзносыФССНСВыбыло - ФССНСРезерв;
			
			Если НастройкиРезервовОтпусков.ФормироватьРезервНУ И Строка.ВидОперации <> Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпуска Тогда
				Строка.ВидОперации = Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускРезервы;
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

Функция ОтпускаЗаСчетРезерва(Организация, ПериодРегистрации)
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	Выплаты.Сотрудник КАК Сотрудник,
		|	СУММА(Выплаты.СуммаРезерваРасход) КАК СуммаВыбыло,
		|	СУММА(Выплаты.СуммаРезерваСтраховыхВзносовРасход) КАК ВзносыВыбыло,
		|	СУММА(Выплаты.СуммаРезерваФССНесчастныеСлучаиРасход) КАК ВзносыФССНСВыбыло
		|ИЗ
		|	РегистрНакопления.ОценочныеОбязательстваПоСотрудникам.Обороты(&НачалоПериода, &КонецПериода, , Организация = &Организация) КАК Выплаты
		|
		|СГРУППИРОВАТЬ ПО
		|	Выплаты.Сотрудник";
	
	Запрос.УстановитьПараметр("НачалоПериода", НачалоМесяца(ПериодРегистрации));
	Запрос.УстановитьПараметр("КонецПериода", КонецМесяца(ПериодРегистрации));
	Запрос.УстановитьПараметр("Организация", Организация);
	
	Возврат Запрос.Выполнить().Выгрузить();
	
КонецФункции

Функция СтруктураВзносовПоСтроке(Строка, КолонкиВзносов)
	
	Взносы = 0;
	МассивВзносов = Новый Массив;
	
	Для Каждого Колонка Из КолонкиВзносов Цикл
		МассивВзносов.Добавить(Строка[Колонка]);
		Взносы = Взносы + Строка[Колонка];
	КонецЦикла;
	
	Возврат Новый Структура("Взносы, ВзносыФССНС, МассивВзносов", Взносы, Строка.ФССНесчастныеСлучаи, МассивВзносов);
	
КонецФункции

#Область ОбновлениеИнформационнойБазы

// см. ОбновлениеИнформационнойБазыБСП.ПриДобавленииОбработчиковОбновления
Процедура ПриДобавленииОбработчиковОбновления(Обработчики) Экспорт

	Обработчик = Обработчики.Добавить();
	Обработчик.Процедура = "Документы.ОтражениеЗарплатыВФинансовомУчете.ОбработатьДанныеДляПереходаНаНовуюВерсию";
	Обработчик.Версия = "2.5.16.27";
	Обработчик.РежимВыполнения = "Отложенно";
	Обработчик.Идентификатор = Новый УникальныйИдентификатор("e76a807a-6a06-459b-8f81-25a9713577b4");
	Обработчик.Многопоточный = Истина;
	Обработчик.ПроцедураЗаполненияДанныхОбновления = "Документы.ОтражениеЗарплатыВФинансовомУчете.ЗарегистрироватьДанныеКОбработкеДляПереходаНаНовуюВерсию";
	Обработчик.ПроцедураПроверки = "ОбновлениеИнформационнойБазы.ДанныеОбновленыНаНовуюВерсиюПрограммы";
	Обработчик.Комментарий = НСтр("ru = 'Заполнение вида резерва в табличной части ""Выплата за счет резервов"" документа ""Отражение зарплаты в финансовом учете"".';
									|en = 'Fill the reserve kind in the ""Payment from payroll funds"" table of the ""Recording of salary in financial accounting"" document.'");
	
	Читаемые = Новый Массив;
	Читаемые.Добавить(Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете.ПолноеИмя());
	Обработчик.ЧитаемыеОбъекты = СтрСоединить(Читаемые, ",");
	
	Изменяемые = Новый Массив;
	Изменяемые.Добавить(Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете.ПолноеИмя());
	Обработчик.ИзменяемыеОбъекты = СтрСоединить(Изменяемые, ",");
	
	Блокируемые = Новый Массив;
	Блокируемые.Добавить(Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете.ПолноеИмя());
	Обработчик.БлокируемыеОбъекты = СтрСоединить(Блокируемые, ",");
	
КонецПроцедуры

// Параметры:
// 	Параметры - см. ОбновлениеИнформационнойБазы.ОсновныеПараметрыОтметкиКОбработке
//
Процедура ЗарегистрироватьДанныеКОбработкеДляПереходаНаНовуюВерсию(Параметры) Экспорт
	
	ПараметрыВыборки = Параметры.ПараметрыВыборки;
	ПараметрыВыборки.ПолныеИменаОбъектов = ПустаяСсылка().Метаданные().ПолноеИмя();
	ПараметрыВыборки.СпособВыборки = ОбновлениеИнформационнойБазы.СпособВыборкиСсылки();
	
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ОтражениеЗарплаты.Ссылка КАК Ссылка
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.ВыплатаЗаСчетРезервов КАК ОтражениеЗарплаты
	|ГДЕ
	|	ОтражениеЗарплаты.Резерв = ЗНАЧЕНИЕ(Справочник.Резервы.ПустаяСсылка)
	|	И ОтражениеЗарплаты.ВидОперации В (&ВидыОпераций)
	|	И ОтражениеЗарплаты.Ссылка.Проведен
	|";
	
	ВидыОпераций = Новый Массив;
	ВидыОпераций.Добавить(Перечисления.ВидыОперацийПоЗарплате.КомпенсацияЕжегодногоОтпуска);
	ВидыОпераций.Добавить(Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпускАвансом);
	ВидыОпераций.Добавить(Перечисления.ВидыОперацийПоЗарплате.ЕжегодныйОтпуск);
	Запрос.УстановитьПараметр("ВидыОпераций", ВидыОпераций);
	
	ОбновлениеИнформационнойБазы.ОтметитьКОбработке(Параметры, Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Ссылка"));
	
КонецПроцедуры

// Обработчик обновления.
// 
// Параметры:
//  Параметры - Структура - параметры.
//
Процедура ОбработатьДанныеДляПереходаНаНовуюВерсию(Параметры) Экспорт
	
	ПолноеИмяОбъекта = ПустаяСсылка().Метаданные().ПолноеИмя();
	
	РезервЕжегодныхОтпусков = Справочники.Резервы.РезервЕжегодныхОтпусков();
	ОбновляемыеДанные = ОбновлениеИнформационнойБазы.ДанныеДляОбновленияВМногопоточномОбработчике(Параметры);
	
	Для каждого Документ Из ОбновляемыеДанные Цикл
		
		НачатьТранзакцию();
		
		Попытка
			
			Блокировка = Новый БлокировкаДанных;
			
			ЭлементБлокировки = Блокировка.Добавить(ПолноеИмяОбъекта);
			ЭлементБлокировки.УстановитьЗначение("Ссылка", Документ.Ссылка);
			ЭлементБлокировки.Режим = РежимБлокировкиДанных.Исключительный;
			
			Блокировка.Заблокировать();
			
			ДокументОбъект = Документ.Ссылка.ПолучитьОбъект(); // ДокументОбъект
			
			Если ДокументОбъект = Неопределено Тогда
				ОбновлениеИнформационнойБазы.ОтметитьВыполнениеОбработки(Документ.Ссылка);
			КонецЕсли;
			
			Для Каждого СтрокаТЧ Из ДокументОбъект.ВыплатаЗаСчетРезервов Цикл
				Если ЗначениеЗаполнено(СтрокаТЧ.Резерв) Тогда Продолжить; КонецЕсли;
				СтрокаТЧ.Резерв = РезервЕжегодныхОтпусков;
			КонецЦикла;
			
			Если ДокументОбъект.Модифицированность() Тогда
				ОбновлениеИнформационнойБазы.ЗаписатьДанные(ДокументОбъект);
			Иначе
				ОбновлениеИнформационнойБазы.ОтметитьВыполнениеОбработки(Документ.Ссылка);
			КонецЕсли;
			
			ЗафиксироватьТранзакцию();
			
		Исключение
			ОтменитьТранзакцию();
			ОбновлениеИнформационнойБазыУТ.СообщитьОНеудачнойОбработке(ИнформацияОбОшибке(), Документ.Ссылка);
		КонецПопытки;
	КонецЦикла;
	
	Параметры.ОбработкаЗавершена = ОбновлениеИнформационнойБазы.ОбработкаДанныхЗавершена(Параметры.Очередь, ПолноеИмяОбъекта);
	
КонецПроцедуры

#КонецОбласти

#Область БлокировкаПриОбновленииИБ

Процедура ПроверитьБлокировкуВходящихДанныхПриОбновленииИБ(ПредставлениеОперации)
	
	ВходящиеДанные = Новый Соответствие;
	
	// из БазаРаспределенияТрудозатрат()
	ВходящиеДанные.Вставить(Метаданные.Документы.ВыработкаСотрудников);
	//++ НЕ УТКА
	ВходящиеДанные.Вставить(Метаданные.Документы.ЗаказНаПроизводство);
	ВходящиеДанные.Вставить(Метаданные.Документы.ЗаказНаРемонт);
	//-- НЕ УТКА
	ВходящиеДанные.Вставить(Метаданные.Документы.ОтражениеЗарплатыВФинансовомУчете);
	ВходящиеДанные.Вставить(Метаданные.РегистрыНакопления.ТрудозатратыНезавершенногоПроизводства);
	
	ЗакрытиеМесяцаСервер.ПроверитьБлокировкуВходящихДанныхПриОбновленииИБ(ВходящиеДанные, ПредставлениеОперации);
	
КонецПроцедуры

#КонецОбласти

Функция ИдентификаторФискальнойЗаписи(ДокументСсылка, СтрокаУдержания) Экспорт
	
	Если Не СтрокаУдержания.ЯвляетсяОснованиемОформленияКассовогоЧека Тогда
		Возврат "";
	КонецЕсли;
	
	ХешированиеДанных = Новый ХешированиеДанных(ХешФункция.CRC32);
	ХешированиеДанных.Добавить(XMLСтрока(ДокументСсылка));
	ХешированиеДанных.Добавить(XMLСтрока(СтрокаУдержания.ФизическоеЛицо));
	ХешированиеДанных.Добавить(XMLСтрока(СтрокаУдержания.ПодразделениеПредприятия));
	ХешированиеДанных.Добавить(XMLСтрока(СтрокаУдержания.ВидОперации));
	ХешированиеДанных.Добавить(XMLСтрока(СтрокаУдержания.Контрагент));
	ХешированиеДанных.Добавить(XMLСтрока(СтрокаУдержания.ОписаниеУдержанияДляЧека));
	ХешированиеДанных.Добавить(Формат(СтрокаУдержания.Сумма, "ЧДЦ=2; ЧРД=.; ЧН=-; ЧГ=; ЧО=1"));
	
	Возврат ОбщегоНазначения.СократитьСтрокуКонтрольнойСуммой(Формат(ХешированиеДанных.ХешСумма, "ЧГ="), 36);
	
КонецФункции

// Возвращает данные по платежному агенту
// 
// Параметры:
//  ПлатежныйАгент - СправочникСсылка.Организации, СправочникСсылка.Контрагенты - Платежный агент
//  ДатаСведений - Дата - Дата сведений
// 
// Возвращаемое значение:
//  Структура - Реквизиты платежного агента:
// * ДанныеАгента - Структура - :
// ** ОператорПеревода - Структура - :
// *** Телефон - Строка - 
// *** Наименование - Строка - 
// *** Адрес - Строка - 
// *** ИНН - Строка - 
// * ДанныеПоставщика - Структура - :
// ** Телефон - Строка -
// ** Наименование  - Строка - 
// ** ИНН - Строка 
// * ПризнакАгентаПоПредметуРасчета - ПеречислениеСсылка.ПризнакиАгента - 
Функция РеквизитыПлатежногоАгента(ПлатежныйАгент, ДатаСведений) Экспорт
	
	Результат = Новый Структура;
	
	СведенияОКонтрагенте = ФормированиеПечатныхФорм.СведенияОЮрФизЛице(ПлатежныйАгент, ДатаСведений);
	
	ДанныеАгента = ОборудованиеЧекопечатающиеУстройстваКлиентСервер.ПараметрыДанныеАгента();
	ДанныеАгента.ПлатежныйАгент.Телефон           = СведенияОКонтрагенте.Телефоны;
	ДанныеАгента.ОператорПеревода.Наименование    = СведенияОКонтрагенте.НаименованиеДляПечатныхФорм;
	ДанныеАгента.ОператорПеревода.Телефон         = СведенияОКонтрагенте.Телефоны;
	ДанныеАгента.ОператорПеревода.Адрес           = СведенияОКонтрагенте.ЮридическийАдрес;
	ДанныеАгента.ОператорПеревода.ИНН             = СведенияОКонтрагенте.ИНН;
	ДанныеАгента.ОператорПоПриемуПлатежей.Телефон = СведенияОКонтрагенте.Телефоны;
	Результат.Вставить("ДанныеАгента", ДанныеАгента);
	
	ДанныеПоставщика = ОборудованиеЧекопечатающиеУстройстваКлиентСервер.ПараметрыДанныеПоставщика();
	ДанныеПоставщика.Телефон      = СведенияОКонтрагенте.Телефоны;
	ДанныеПоставщика.Наименование = СведенияОКонтрагенте.НаименованиеДляПечатныхФорм;
	ДанныеПоставщика.ИНН          = СведенияОКонтрагенте.ИНН;
	Результат.Вставить("ДанныеПоставщика", ДанныеПоставщика);
	
	Результат.Вставить("ПризнакАгентаПоПредметуРасчета", Перечисления.ПризнакиАгента.ПлатежныйАгент);
	
	Возврат Результат;
	
КонецФункции

#Область Печать

// Возвращает предварительные параметры фискализации чеков для документа.
//
// Параметры:
//   ДокументСсылка - ДокументСсылка.РасходныйКассовыйОрдер - Документ.
//
// ВозвращаемоеЗначение:
//  Массив Из Структура - Данные чека
Функция СобратьДанныеЧеков(ДокументСсылка) Экспорт
	
	МассивЧеков = Новый Массив;
	
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
	
	Запрос.Текст =
	"ВЫБРАТЬ
	|	ДанныеДокумента.Ссылка КАК ДокументСсылка,
	|	ДанныеДокумента.Организация КАК Организация,
	|	ДанныеДокумента.Дата КАК ДатаДокумента,
	|	ДанныеДокумента.Номер КАК НомерДокумента
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете КАК ДанныеДокумента
	|ГДЕ
	|	ДанныеДокумента.Ссылка = &Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Удержания.ИдентификаторФискальнойЗаписи,
	|	Удержания.ПодразделениеПредприятия,
	|	Удержания.ВидОперации,
	|	Удержания.ФизическоеЛицо,
	|	Удержания.ФизическоеЛицо.Наименование КАК ФизическоеЛицоНаименование,
	|	Удержания.ОписаниеУдержанияДляЧека,
	|	Удержания.Контрагент,
	|	Удержания.Сумма
	|ИЗ
	|	Документ.ОтражениеЗарплатыВФинансовомУчете.УдержаннаяЗарплата КАК Удержания
	|ГДЕ
	|	Удержания.Ссылка = &Ссылка
	|	И Удержания.ЯвляетсяОснованиемОформленияКассовогоЧека
	|";
	
	Результат = Запрос.ВыполнитьПакет();
	
	Реквизиты = Результат[0].Выбрать();
	Если Не Реквизиты.Следующий() Тогда
		Возврат МассивЧеков;
	КонецЕсли;
	
	ДанныеЧека = Новый Структура("ДокументСсылка, Организация, ДатаДокумента, НомерДокумента");
	ЗаполнитьЗначенияСвойств(ДанныеЧека, Реквизиты);
	
	ДанныеЧека.Вставить("СведенияОбОрганизации",
		ФормированиеПечатныхФорм.СведенияОЮрФизЛице(Реквизиты.Организация, ТекущаяДатаСеанса()));
	ДанныеЧека.Вставить("СистемаНалогообложения",
		РозничныеПродажиЛокализация.СистемаНалогообложенияФискальнойОперации(Реквизиты.Организация));
	
	// Кэш реквизитов платежных агентов
	РеквизитыПлатежныхАгентов = Новый Соответствие;
	
	ВыборкаЧеков = Результат[1].Выбрать();
	Пока ВыборкаЧеков.Следующий() Цикл
		
		Если ЗначениеЗаполнено(ВыборкаЧеков.ИдентификаторФискальнойЗаписи) Тогда
			ДанныеЧека.Вставить("ИдентификаторФискальнойЗаписи", ВыборкаЧеков.ИдентификаторФискальнойЗаписи);
		Иначе
			ДанныеЧека.Вставить("ИдентификаторФискальнойЗаписи", ИдентификаторФискальнойЗаписи(ДокументСсылка, ВыборкаЧеков));
		КонецЕсли;
		
		НаименованиеПозиции = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			НСтр("ru = '%1: %2';
				|en = '%1: %2'"), ВыборкаЧеков.ФизическоеЛицоНаименование, ВыборкаЧеков.ОписаниеУдержанияДляЧека);
		
		ДанныеЧека.Вставить("ПозицияЧека", НаименованиеПозиции);
		ДанныеЧека.Вставить("Сумма",       ВыборкаЧеков.Сумма);
		
		Если ЗначениеЗаполнено(ВыборкаЧеков.Контрагент) Тогда
			Если РеквизитыПлатежныхАгентов.Получить(ВыборкаЧеков.Контрагент) = Неопределено Тогда
				РеквизитыПлатежныхАгентов.Вставить(ВыборкаЧеков.Контрагент,
					РеквизитыПлатежногоАгента(ВыборкаЧеков.Контрагент, ТекущаяДатаСеанса()));
			КонецЕсли;
			ДанныеЧека.Вставить("СведенияОПлатежномАгенте", РеквизитыПлатежныхАгентов[ВыборкаЧеков.Контрагент]);
		Иначе
			ДанныеЧека.Вставить("СведенияОПлатежномАгенте", Неопределено);
		КонецЕсли;
		
		МассивЧеков.Добавить(ПараметрыОперацииФискализацииЧека(ДанныеЧека));
		
	КонецЦикла;
	
	Возврат МассивЧеков;
	
КонецФункции

Функция ПараметрыОперацииФискализацииЧека(ДанныеЧека)
	
	ПараметрыФискализации = ОборудованиеЧекопечатающиеУстройстваКлиентСервер.ПараметрыОперацииФискализацииЧека();
	
	ПараметрыФискализации.ДокументОснование             = ДанныеЧека.ДокументСсылка;
	ПараметрыФискализации.ИдентификаторФискальнойЗаписи = ДанныеЧека.ИдентификаторФискальнойЗаписи;
	
	ПараметрыФискализации.Организация          = ДанныеЧека.Организация;
	ПараметрыФискализации.ОрганизацияНазвание  = ДанныеЧека.СведенияОбОрганизации.ПолноеНаименование;
	ПараметрыФискализации.ОрганизацияИНН       = ДанныеЧека.СведенияОбОрганизации.ИНН;
	ПараметрыФискализации.ОрганизацияКПП       = ДанныеЧека.СведенияОбОрганизации.КПП;
	
	ПараметрыФискализации.АдресМагазина        = ДанныеЧека.СведенияОбОрганизации.ФактическийАдрес;
	ПараметрыФискализации.НаименованиеМагазина = ДанныеЧека.СведенияОбОрганизации.СокращенноеНаименование;
	
	ПараметрыФискализации.СистемаНалогообложения = ДанныеЧека.СистемаНалогообложения;
	
	// Заполняем позицию чека
	СтрокаПозицииЧека = ОборудованиеЧекопечатающиеУстройстваКлиентСервер.ПараметрыФискальнойСтрокиЧека();
	
	СтрокаПозицииЧека.НомерСекции            = 1;
	СтрокаПозицииЧека.НомерСтрокиТовара      = ПараметрыФискализации.ПозицииЧека.Количество() + 1;
	
	СтрокаПозицииЧека.Наименование           = ДанныеЧека.ПозицияЧека;
	СтрокаПозицииЧека.Количество             = 1;
	СтрокаПозицииЧека.Цена                   = ДанныеЧека.Сумма;
	СтрокаПозицииЧека.ЦенаСоСкидками         = ДанныеЧека.Сумма;
	СтрокаПозицииЧека.Сумма                  = ДанныеЧека.Сумма;
	СтрокаПозицииЧека.СтавкаНДС              = Неопределено;
	
	СтрокаПозицииЧека.ПризнакСпособаРасчета  = Перечисления.ПризнакиСпособаРасчета.ОплатаКредита;
	СтрокаПозицииЧека.ПризнакПредметаРасчета = Перечисления.ПризнакиПредметаРасчета.ПлатежВыплата;
	
	Если ДанныеЧека.СведенияОПлатежномАгенте <> Неопределено Тогда
		ЗаполнитьЗначенияСвойств(СтрокаПозицииЧека, ДанныеЧека.СведенияОПлатежномАгенте);
	КонецЕсли;
	
	ПараметрыФискализации.ПозицииЧека.Добавить(СтрокаПозицииЧека);
	
	// Заполняем тип оплаты
	СтрокаОплаты = Новый Структура;
	СтрокаОплаты.Вставить("ТипОплаты", Перечисления.ТипыОплатыККТ.ВстречноеПредоставление);
	СтрокаОплаты.Вставить("Сумма", ДанныеЧека.Сумма);
	ПараметрыФискализации.ТаблицаОплат.Добавить(СтрокаОплаты);
	
	Возврат ПараметрыФискализации;
	
КонецФункции

#КонецОбласти

#КонецОбласти

#КонецЕсли
